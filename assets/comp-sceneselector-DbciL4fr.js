import{r as a,j as e,U as I,e as O,f as _,S as L,T as V,V as he,g as ue,h as S}from"./vendor-DtxQH04y.js";import{D as xe,a as me,b as pe,c as be,d as ge}from"./comp-audiocontroller-BpCVJ6ce.js";function F(r,i){const c=a.useRef(null);return a.useCallback(((...f)=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>r(...f),i)}),[r,i])}const Y="zen_user_colors",J="zen_user_gradients";function ve({currentScene:r,setScene:i,isBgMuted:c,setIsBgMuted:f,setShowVideoModal:M=l=>{}}){const[l,x]=a.useState("image"),[h,P]=a.useState(new Set(["image"]));a.useEffect(()=>{h.has(l)||P(t=>new Set([...t,l]))},[l,h]);const[u,U]=a.useState(""),[v,G]=a.useState(""),[m,q]=a.useState("#1a1a1a"),[n,K]=a.useState([{color:"#0d1b2a",position:0},{color:"#2a1f3d",position:100}]),[j,T]=a.useState(180),N=F(q,100),p=F(K,100),[b,$]=a.useState([]),[g,A]=a.useState([]);a.useEffect(()=>{const t=localStorage.getItem(Y),s=localStorage.getItem(J);t&&$(JSON.parse(t)),s&&A(JSON.parse(s))},[]);const D=t=>{$(t),localStorage.setItem(Y,JSON.stringify(t))},z=t=>{A(t),localStorage.setItem(J,JSON.stringify(t))},W=()=>{const t=prompt("Enter a name for this color:");if(!t)return;const s={id:`user-color-${Date.now()}`,type:"color",url:m,name:t};D([...b,s])},X=()=>{const t=prompt("Enter a name for this gradient:");if(!t)return;const s={id:`user-gradient-${Date.now()}`,type:"gradient",url:C(),name:t};z([...g,s])},H=t=>{D(b.filter(s=>s.id!==t))},Q=t=>{z(g.filter(s=>s.id!==t))},Z=()=>{i({id:`custom-color-${Date.now()}`,type:"color",url:m,name:"Custom Color"})},B=()=>{const t=n[n.length-1],s=n[n.length-2],o=Math.min(100,Math.round((t.position+s.position)/2)),d=[...n];d.splice(n.length-1,0,{color:"#1a3a3a",position:o}),p(d)},ee=t=>{n.length<=2||p(n.filter((s,o)=>o!==t))},y=(t,s,o)=>{const d=[...n];s==="color"?d[t].color=o:d[t].position=Math.min(100,Math.max(0,o)),p(d)},C=()=>{const s=[...n].sort((o,d)=>o.position-d.position).map(o=>`${o.color} ${o.position}%`).join(", ");return`linear-gradient(${j}deg, ${s})`},te=t=>{const s=t.match(/linear-gradient\((\d+)deg/),o=s?parseInt(s[1]):180,d=/(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3})\s+(\d+)%/g,w=[];let k;for(;(k=d.exec(t))!==null;)w.push({color:k[1],position:parseInt(k[2])});return{angle:o,stops:w}},E=t=>{i(t),N(t.url)},R=t=>{i(t);const{angle:s,stops:o}=te(t.url);o.length>=2&&(p(o),T(s))},se=()=>{i({id:`custom-gradient-${Date.now()}`,type:"gradient",url:C(),name:"Custom Gradient"})},oe=t=>{var o;const s=(o=t.target.files)==null?void 0:o[0];if(s){const d=URL.createObjectURL(s),w=s.type.startsWith("video")?"video":"image";i({id:`custom-${Date.now()}`,type:w,url:d,name:s.name})}},re=t=>{if(t.preventDefault(),!u)return;const s=u.includes("youtube.com")||u.includes("youtu.be");i({id:`custom-vid-${Date.now()}`,type:s?"youtube":"video",url:u,name:"Custom Video"}),U("")},le=t=>{t.preventDefault(),v&&(i({id:`custom-img-${Date.now()}`,type:"image",url:v,name:"Custom Image"}),G(""))},ae=()=>e.jsxs("div",{className:"flex border-b border-white/10 mb-4",children:[e.jsx("button",{onClick:()=>x("color"),className:`flex-1 py-3 text-sm font-medium transition-colors ${l==="color"?"text-white border-b-2 border-white":"text-white/50 hover:text-white"}`,children:"Color"}),e.jsx("button",{onClick:()=>x("image"),className:`flex-1 py-3 text-sm font-medium transition-colors ${l==="image"?"text-white border-b-2 border-white":"text-white/50 hover:text-white"}`,children:"Image"}),e.jsx("button",{onClick:()=>x("video"),className:`flex-1 py-3 text-sm font-medium transition-colors ${l==="video"?"text-white border-b-2 border-white":"text-white/50 hover:text-white"}`,children:"Video"}),e.jsx("button",{onClick:()=>x("custom"),className:`flex-1 py-3 text-sm font-medium transition-colors ${l==="custom"?"text-white border-b-2 border-white":"text-white/50 hover:text-white"}`,children:"Upload"})]}),ie=()=>e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("label",{className:"text-xs font-bold text-white/50 uppercase mb-2 block",children:"Image URL"}),e.jsxs("form",{onSubmit:le,className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"https://example.com/image.jpg",value:v,onChange:t=>G(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-white/50"}),e.jsx("button",{type:"submit",className:"bg-white text-black p-2 rounded-lg hover:bg-white/90",children:e.jsx(I,{size:18})})]}),e.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:"Supports direct image URLs (.jpg, .png, .gif, etc.)"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:xe.map(t=>e.jsxs("button",{onClick:()=>i(t),className:`relative group aspect-video rounded-xl overflow-hidden border-2 transition-all ${r.id===t.id?"border-white shadow-xl scale-[1.02]":"border-transparent hover:scale-[1.02]"}`,children:[e.jsx("img",{src:t.thumbnail||t.url,alt:t.name,loading:"lazy",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-xs font-bold tracking-wide",children:t.name})}),r.id===t.id&&e.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-500 rounded-full shadow-glow"})]},t.id))})]}),ne=()=>e.jsxs("div",{className:"pb-4 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Solid Colors"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:me.map(t=>e.jsxs("button",{onClick:()=>E(t),className:`relative group aspect-square rounded-xl overflow-hidden border-2 transition-all ${r.id===t.id?"border-white shadow-xl scale-[1.02]":"border-transparent hover:scale-[1.02]"}`,children:[e.jsx("div",{style:{backgroundColor:t.url},className:"w-full h-full"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-[10px] font-bold tracking-wide text-center px-1",children:t.name})}),r.id===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-glow"})]},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Gradients"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:pe.map(t=>e.jsxs("button",{onClick:()=>R(t),className:`relative group aspect-video rounded-xl overflow-hidden border-2 transition-all ${r.id===t.id?"border-white shadow-xl scale-[1.02]":"border-transparent hover:scale-[1.02]"}`,children:[e.jsx("div",{style:{background:t.url},className:"w-full h-full"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-xs font-bold tracking-wide",children:t.name})}),r.id===t.id&&e.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-500 rounded-full shadow-glow"})]},t.id))})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("h3",{className:"text-xs font-bold text-white/50 uppercase mb-3 flex items-center gap-2",children:[e.jsx(O,{size:14}),"Custom Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative",children:e.jsx("input",{type:"color",value:m,onChange:t=>N(t.target.value),className:"w-12 h-12 rounded-lg cursor-pointer border-2 border-white/20 bg-transparent"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:m,onChange:t=>N(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-white/50 font-mono",placeholder:"#1a1a1a"})}),e.jsx("button",{onClick:Z,className:"p-2 bg-white text-black rounded-lg hover:bg-white/90 transition-colors",title:"Apply",children:e.jsx(_,{size:18})}),e.jsx("button",{onClick:W,className:"p-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",title:"Save to presets",children:e.jsx(L,{size:18})})]})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"My Saved Colors"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:b.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>E(t),className:`w-full aspect-square rounded-xl overflow-hidden border-2 transition-all ${r.id===t.id?"border-white shadow-xl scale-[1.02]":"border-transparent hover:scale-[1.02]"}`,children:e.jsx("div",{style:{backgroundColor:t.url},className:"w-full h-full"})}),e.jsx("button",{onClick:()=>H(t.id),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(V,{size:10})}),e.jsx("span",{className:"absolute bottom-1 left-1 right-1 text-[8px] text-white/70 text-center truncate",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("h3",{className:"text-xs font-bold text-white/50 uppercase mb-3 flex items-center gap-2",children:[e.jsx(O,{size:14}),"Custom Gradient"]}),e.jsx("div",{className:"w-full h-24 rounded-lg mb-3 border border-white/10",style:{background:C()}}),e.jsx("div",{className:"flex flex-col gap-2 mb-3",children:n.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t.color,onChange:o=>y(s,"color",o.target.value),className:"w-10 h-8 rounded-lg cursor-pointer border-2 border-white/20 bg-transparent"}),e.jsx("input",{type:"text",value:t.color,onChange:o=>y(s,"color",o.target.value),className:"w-20 bg-white/5 border border-white/10 rounded-lg px-2 py-1 text-xs focus:outline-none focus:border-white/50 font-mono"}),e.jsx("input",{type:"number",min:"0",max:"100",value:t.position,onChange:o=>y(s,"position",Number(o.target.value)),className:"w-14 bg-white/5 border border-white/10 rounded-lg px-2 py-1 text-xs focus:outline-none focus:border-white/50 font-mono text-center"}),e.jsx("span",{className:"text-xs text-white/50",children:"%"}),n.length>2&&e.jsx("button",{onClick:()=>ee(s),className:"w-6 h-6 flex items-center justify-center rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors text-xs",children:"✕"})]},s))}),e.jsx("button",{onClick:B,className:"w-full py-1.5 mb-3 border border-dashed border-white/20 rounded-lg text-xs text-white/50 hover:text-white hover:border-white/40 transition-colors",children:"+ Add Color Stop"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0",max:"360",value:j,onChange:t=>T(Number(t.target.value)),className:"flex-1 accent-white"}),e.jsxs("span",{className:"text-xs font-mono w-10",children:[j,"°"]}),e.jsx("button",{onClick:se,className:"p-2 bg-white text-black rounded-lg hover:bg-white/90 transition-colors",title:"Apply",children:e.jsx(_,{size:18})}),e.jsx("button",{onClick:X,className:"p-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-colors",title:"Save to presets",children:e.jsx(L,{size:18})})]})]}),g.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"My Saved Gradients"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>R(t),className:`w-full aspect-video rounded-xl overflow-hidden border-2 transition-all ${r.id===t.id?"border-white shadow-xl scale-[1.02]":"border-transparent hover:scale-[1.02]"}`,children:e.jsx("div",{style:{background:t.url},className:"w-full h-full"})}),e.jsx("button",{onClick:()=>Q(t.id),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(V,{size:10})}),e.jsx("span",{className:"absolute bottom-1 left-1 right-1 text-[10px] text-white/70 text-center truncate",children:t.name})]},t.id))})]})]}),de=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-shrink-0 p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>f(!c),className:`backdrop-blur-md w-full flex items-center justify-between p-3 rounded-lg border transition-all hover:bg-white/30 ${c?"bg-white/5 border-white/10":"bg-white/20 border-white/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c?e.jsx(he,{size:18,className:"text-white/70"}):e.jsx(ue,{size:18,className:"text-white"}),e.jsx("span",{className:"text-xs font-medium",children:"Audio"})]}),e.jsx("div",{className:`text-[10px] px-2 py-0.5 rounded font-bold ${c?"bg-white/10 text-white/50":"bg-green-500/20 text-green-300"}`,children:c?"OFF":"ON"})]}),e.jsxs("button",{onClick:()=>M(!0),className:"backdrop-blur-md w-full flex items-center justify-center gap-2 p-3 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 transition-all text-white/80 hover:text-white",children:[e.jsx(S,{size:18}),e.jsx("span",{className:"text-xs font-medium",children:"Control Video"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("label",{className:"text-xs font-bold text-white/50 uppercase mb-2 block",children:"Video URL"}),e.jsxs("form",{onSubmit:re,className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"https://youtube.com/watch?v=...",value:u,onChange:t=>U(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-white/50"}),e.jsx("button",{type:"submit",className:"bg-white text-black p-2 rounded-lg hover:bg-white/90",children:e.jsx(S,{size:18})})]}),e.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:"Supports YouTube links or direct .mp4 URLs."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 pb-4",children:[...be,...ge].map(t=>e.jsxs("button",{onClick:()=>i(t),className:`relative group aspect-video rounded-xl overflow-hidden border-2 transition-all ${r.id===t.id?"border-white shadow-xl scale-[1.02]":"border-transparent hover:scale-[1.02]"}`,children:[t.type==="youtube"?e.jsx("img",{src:`https://img.youtube.com/vi/${t.url.split("v=")[1]}/hqdefault.jpg`,loading:"lazy",className:"w-full h-full object-cover opacity-80",alt:t.name}):e.jsx("img",{src:t.thumbnail||t.url,alt:t.name,loading:"lazy",className:"w-full h-full object-cover"}),t.type==="youtube"&&e.jsx("div",{className:"absolute top-2 left-2 bg-red-600 rounded px-1.5 py-0.5 text-[10px] font-bold",children:e.jsx(S,{size:16,className:"text-white"})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-xs font-bold tracking-wide",children:t.name})}),r.id===t.id&&e.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-green-500 rounded-full shadow-glow"})]},t.id))})]})})]}),ce=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("label",{className:"text-xs font-bold text-white/50 uppercase mb-2 block",children:"Upload File"}),e.jsxs("label",{className:"relative cursor-pointer group w-full aspect-video rounded-xl border-2 border-dashed border-white/20 hover:border-white/50 flex flex-col items-center justify-center transition-all bg-white/5 hover:bg-white/10",children:[e.jsx("input",{type:"file",className:"hidden",accept:"image/*,video/*",onChange:oe}),e.jsx(I,{size:24,className:"mb-2 text-white/50 group-hover:text-white"}),e.jsx("span",{className:"text-xs text-white/50 group-hover:text-white font-medium",children:"Click to Upload"})]}),e.jsx("p",{className:"text-[10px] text-white/30 mt-2",children:"Supports images and video files from your device."})]})});return e.jsxs("div",{className:"flex flex-col h-full text-white",children:[ae(),e.jsxs("div",{className:"flex-1 custom-scrollbar"+(l==="video"?" overflow-hidden":" overflow-y-auto p-2"),children:[e.jsx("div",{className:l==="color"?"block":"hidden",children:h.has("color")&&ne()}),e.jsx("div",{className:l==="image"?"block":"hidden",children:h.has("image")&&ie()}),e.jsx("div",{className:l==="video"?"flex flex-col h-full min-h-0":"hidden",children:h.has("video")&&de()}),e.jsx("div",{className:l==="custom"?"block":"hidden",children:h.has("custom")&&ce()})]})]})}export{ve as default};
