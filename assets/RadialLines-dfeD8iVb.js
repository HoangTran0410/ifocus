const d={rotation:0,pulsePhase:0,innerRotation:0};function w({ctx:o,canvas:W,data:P,barCount:v,performanceMode:c=!1,beatIntensity:r=0}){const s=W.width/2,a=W.height/2,u=Math.min(s,a)*.92,f=u*.12,l=P.reduce((n,e)=>n+e,0)/P.length;d.rotation+=.003+l*.008+r*.015,d.innerRotation-=.005+l*.01,d.pulsePhase+=.05+r*.1;const p=c?Math.min(v,48):v;if(!c)for(let n=2;n>=0;n--){const e=u*(.95-n*.08),i=.08+l*.1-n*.02;o.beginPath(),o.arc(s,a,e,0,Math.PI*2),o.strokeStyle=`rgba(168, 85, 247, ${i})`,o.lineWidth=2-n*.5,o.stroke()}if(!c){const n=Math.floor(p/2);for(let e=0;e<n;e++){const i=e/n*Math.PI*2+d.innerRotation,h=e*2%P.length,g=P[h]||l,t=f*1.5,S=t+g*u*.4,$=s+Math.cos(i)*t,b=a+Math.sin(i)*t,R=s+Math.cos(i)*S,y=a+Math.sin(i)*S;o.beginPath(),o.moveTo($,b),o.lineTo(R,y),o.strokeStyle=`hsla(280, 80%, ${50+g*30}%, ${.3+g*.4})`,o.lineWidth=1+g*2,o.lineCap="round",o.stroke()}}for(let n=0;n<p;n++){const e=n/p*Math.PI*2-Math.PI/2,i=Math.sin(d.pulsePhase+n*.3)*.03,h=e+d.rotation+i,g=Math.floor(n/p*P.length),t=P[g]||l,S=Math.sin(d.pulsePhase+n*.2)*.1,$=f+(t+S)*(u-f),b=s+Math.cos(h)*f,R=a+Math.sin(h)*f,y=s+Math.cos(h)*$,T=a+Math.sin(h)*$,I=260+n/p*60+t*30,L=55+t*25,m=.6+t*.4;if(o.beginPath(),o.moveTo(b,R),o.lineTo(y,T),o.strokeStyle=`hsla(${I}, 85%, ${L}%, ${m})`,o.lineWidth=2+t*4,o.lineCap="round",o.stroke(),t>.5){const G=2+t*4+r*3;o.beginPath(),o.arc(y,T,G,0,Math.PI*2),o.fillStyle=`hsla(${I+20}, 100%, 75%, ${t})`,o.fill(),!c&&t>.7&&(o.beginPath(),o.arc(y,T,G*2.5,0,Math.PI*2),o.fillStyle=`hsla(${I}, 100%, 70%, ${t*.3})`,o.fill())}}if(r>.4){const n=c?12:24;for(let e=0;e<n;e++){const i=e/n*Math.PI*2+d.rotation*2,h=u*(.85+r*.15),g=u*.7,t=s+Math.cos(i)*g,S=a+Math.sin(i)*g,$=s+Math.cos(i)*h,b=a+Math.sin(i)*h;o.beginPath(),o.moveTo(t,S),o.lineTo($,b),o.strokeStyle=`rgba(255, 200, 255, ${r*.6})`,o.lineWidth=1+r*2,o.lineCap="round",o.stroke()}}const M=f*(.8+l*.3+r*.2),C=o.createRadialGradient(s,a,0,s,a,M*1.5);C.addColorStop(0,`rgba(200, 150, 255, ${.4+l*.4})`),C.addColorStop(.5,`rgba(168, 85, 247, ${.2+l*.2})`),C.addColorStop(1,"transparent"),o.beginPath(),o.arc(s,a,M*1.5,0,Math.PI*2),o.fillStyle=C,o.fill(),o.beginPath(),o.arc(s,a,M,0,Math.PI*2);const k=o.createRadialGradient(s-M*.3,a-M*.3,0,s,a,M);k.addColorStop(0,`rgba(255, 255, 255, ${.9+l*.1})`),k.addColorStop(.4,`rgba(200, 150, 255, ${.8+l*.2})`),k.addColorStop(1,`rgba(100, 50, 200, ${.7+l*.3})`),o.fillStyle=k,o.fill(),o.beginPath(),o.arc(s,a,M,0,Math.PI*2),o.strokeStyle=`rgba(255, 255, 255, ${.5+r*.5})`,o.lineWidth=2,o.stroke()}export{w as default};
