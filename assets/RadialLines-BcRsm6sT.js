const g={rotation:0,pulsePhase:0,innerRotation:0};function A({ctx:n,canvas:W,data:P,barCount:v,performanceMode:c=!1,beatIntensity:d=0,bass:G=0}){const a=W.width/2,s=W.height/2,u=Math.min(a,s)*.92,f=u*.12,l=P.reduce((o,e)=>o+e,0)/P.length;g.rotation+=.003+l*.008+G*.02,g.innerRotation-=.005+l*.01,g.pulsePhase+=.05+G*.12;const p=c?Math.min(v,48):v;if(!c)for(let o=2;o>=0;o--){const e=u*(.95-o*.08),i=.08+l*.1-o*.02;n.beginPath(),n.arc(a,s,e,0,Math.PI*2),n.strokeStyle=`rgba(168, 85, 247, ${i})`,n.lineWidth=2-o*.5,n.stroke()}if(!c){const o=Math.floor(p/2);for(let e=0;e<o;e++){const i=e/o*Math.PI*2+g.innerRotation,r=e*2%P.length,h=P[r]||l,t=f*1.5,S=t+h*u*.4,$=a+Math.cos(i)*t,b=s+Math.sin(i)*t,R=a+Math.cos(i)*S,y=s+Math.sin(i)*S;n.beginPath(),n.moveTo($,b),n.lineTo(R,y),n.strokeStyle=`hsla(280, 80%, ${50+h*30}%, ${.3+h*.4})`,n.lineWidth=1+h*2,n.lineCap="round",n.stroke()}}for(let o=0;o<p;o++){const e=o/p*Math.PI*2-Math.PI/2,i=Math.sin(g.pulsePhase+o*.3)*.03,r=e+g.rotation+i,h=Math.floor(o/p*P.length),t=P[h]||l,S=Math.sin(g.pulsePhase+o*.2)*.1,$=f+(t+S)*(u-f),b=a+Math.cos(r)*f,R=s+Math.sin(r)*f,y=a+Math.cos(r)*$,I=s+Math.sin(r)*$,T=260+o/p*60+t*30,m=55+t*25,w=.6+t*.4;if(n.beginPath(),n.moveTo(b,R),n.lineTo(y,I),n.strokeStyle=`hsla(${T}, 85%, ${m}%, ${w})`,n.lineWidth=2+t*4,n.lineCap="round",n.stroke(),t>.5){const L=2+t*4+d*3;n.beginPath(),n.arc(y,I,L,0,Math.PI*2),n.fillStyle=`hsla(${T+20}, 100%, 75%, ${t})`,n.fill(),!c&&t>.7&&(n.beginPath(),n.arc(y,I,L*2.5,0,Math.PI*2),n.fillStyle=`hsla(${T}, 100%, 70%, ${t*.3})`,n.fill())}}if(d>.4){const o=c?12:24;for(let e=0;e<o;e++){const i=e/o*Math.PI*2+g.rotation*2,r=u*(.85+d*.15),h=u*.7,t=a+Math.cos(i)*h,S=s+Math.sin(i)*h,$=a+Math.cos(i)*r,b=s+Math.sin(i)*r;n.beginPath(),n.moveTo(t,S),n.lineTo($,b),n.strokeStyle=`rgba(255, 200, 255, ${d*.6})`,n.lineWidth=1+d*2,n.lineCap="round",n.stroke()}}const M=f*(.8+l*.3+d*.2),C=n.createRadialGradient(a,s,0,a,s,M*1.5);C.addColorStop(0,`rgba(200, 150, 255, ${.4+l*.4})`),C.addColorStop(.5,`rgba(168, 85, 247, ${.2+l*.2})`),C.addColorStop(1,"transparent"),n.beginPath(),n.arc(a,s,M*1.5,0,Math.PI*2),n.fillStyle=C,n.fill(),n.beginPath(),n.arc(a,s,M,0,Math.PI*2);const k=n.createRadialGradient(a-M*.3,s-M*.3,0,a,s,M);k.addColorStop(0,`rgba(255, 255, 255, ${.9+l*.1})`),k.addColorStop(.4,`rgba(200, 150, 255, ${.8+l*.2})`),k.addColorStop(1,`rgba(100, 50, 200, ${.7+l*.3})`),n.fillStyle=k,n.fill(),n.beginPath(),n.arc(a,s,M,0,Math.PI*2),n.strokeStyle=`rgba(255, 255, 255, ${.5+d*.5})`,n.lineWidth=2,n.stroke()}export{A as default};
