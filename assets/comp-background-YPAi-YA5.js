const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./comp-effectslayer-CiMWV94r.js","./vendor-DtxQH04y.js"])))=>i.map(i=>d[i]);
import{j as e,L as T,r as u,a as R,l as z}from"./vendor-DtxQH04y.js";const Y="modulepreload",D=function(t,h){return new URL(t,h).href},I={},F=function(h,d,b){let j=Promise.resolve();if(d&&d.length>0){let s=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const r=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),v=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));j=s(d.map(l=>{if(l=D(l,b),l in I)return;I[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(!!b)for(let n=r.length-1;n>=0;n--){const g=r[n];if(g.href===l&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const o=document.createElement("link");if(o.rel=c?"stylesheet":Y,c||(o.as="script"),o.crossOrigin="",o.href=l,v&&o.setAttribute("nonce",v),document.head.appendChild(o),c)return new Promise((n,g)=>{o.addEventListener("load",n),o.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function y(s){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s}return j.then(s=>{for(const r of s||[])r.status==="rejected"&&y(r.reason);return h().catch(y)})},$=e.jsx("div",{className:"flex items-center justify-center w-full h-full min-h-[100px]",children:e.jsx(T,{className:"w-6 h-6 text-white/50 animate-spin"})}),q=z(()=>F(()=>import("./vendor-DtxQH04y.js").then(t=>t.Y),[],import.meta.url),{fallback:$}),U=z(()=>F(()=>import("./comp-effectslayer-CiMWV94r.js"),__vite__mapDeps([0,1]),import.meta.url),{fallback:$});function W({scene:t,effect:h="none",isMuted:d=!0,disableYouTube:b=!1,showVideoModal:j=!1,setShowVideoModal:y=r=>{},isPiP:s=!1}){const r=u.useRef(null),[i,v]=u.useState(!1),[l,c]=u.useState(!1),[f,x]=u.useState(!1),o=u.useRef(!1),n=j||f,g=()=>{y(!1),x(!1)},k=a=>{const m=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,p=a.match(m);return p&&p[2].length===11?p[2]:null};u.useEffect(()=>(v(!1),y(!1),x(!1),o.current=!1,()=>{r.current=null}),[t.url,y]),u.useEffect(()=>{if(r.current&&t.type==="youtube")try{d?r.current.mute():r.current.unMute()}catch(a){console.warn("Error changing mute state:",a)}},[d,t.type]);const E=u.useCallback(()=>{var a,m,p,P;if(!(!r.current||o.current))try{const w=(m=(a=r.current).getPlayerState)==null?void 0:m.call(a);if(w===void 0)return;w!==1&&w!==3&&((P=(p=r.current).playVideo)==null||P.call(p),setTimeout(()=>{var C,L;if(r.current)try{const _=(L=(C=r.current).getPlayerState)==null?void 0:L.call(C);_!==void 0&&_!==1&&_!==3&&!o.current&&x(!0)}catch(_){console.warn("Error checking player state:",_)}},500))}catch(w){console.warn("Error checking YouTube player state:",w)}},[]);u.useEffect(()=>{if(t.type!=="youtube"||b)return;const a=()=>{E()};return window.addEventListener("click",a),()=>window.removeEventListener("click",a)},[t.type,b,E]);const B=a=>{try{r.current=a.target,d?a.target.mute():a.target.unMute(),a.target.playVideo()}catch(m){console.warn("Error in onPlayerReady:",m)}},O=a=>{try{a.data===1&&(o.current=!0,x(!1))}catch(m){console.warn("Error in onPlayerStateChange:",m)}},V=a=>{console.error("YouTube player error:",a.data),a.data===150||a.data===101?console.warn("Video may be unavailable or embedding restricted"):c(!0)},A={playerVars:{autoplay:1,mute:1,controls:1,loop:1,playlist:t.type==="youtube"&&k(t.url)||"",playsinline:1,showinfo:0,rel:0,iv_load_policy:3,disablekb:1,modestbranding:1}},N=()=>e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                @keyframes modalFadeIn {
                  from { opacity: 0; }
                  to { opacity: 1; }
                }
              `}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",style:{zIndex:99998,animation:"modalFadeIn 0.3s ease-out forwards"},onClick:g}),e.jsxs("div",{className:n?"fixed w-[80vw] max-w-4xl aspect-video left-1/2 top-1/2 rounded-xl overflow-hidden shadow-2xl border border-white/10 bg-black":"fixed inset-0 w-full h-full",style:n?{zIndex:99999,transform:"translate(-50%, -50%)",animation:"modalFadeIn 0.3s ease-out forwards"}:{zIndex:-1,pointerEvents:"none"},children:[n&&e.jsxs(e.Fragment,{children:[t.type==="youtube"&&f&&!o.current&&e.jsx("div",{className:"absolute top-3 left-3 z-10 px-3 py-1.5 rounded-lg bg-black/60 text-white/90 text-sm",children:"Click the video to start playback"}),e.jsx("button",{onClick:g,className:"absolute top-3 right-3 z-10 w-8 h-8 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white/80 hover:text-white transition-all cursor-pointer",children:"âœ•"})]}),t.type==="video"?e.jsx("video",{autoPlay:!0,loop:!0,muted:d,controls:n,playsInline:!0,className:"w-full h-full object-cover",children:e.jsx("source",{src:t.url,type:"video/mp4"})},t.url):e.jsx(q,{videoId:k(t.url)||"",opts:A,onReady:B,onStateChange:O,onError:V,className:"w-full h-full",iframeClassName:`w-full h-full ${n?"":"pointer-events-none"}`,style:{width:"100%",height:"100%"}},t.url)]})]}),S=()=>e.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:1},children:e.jsx(U,{type:h})});return e.jsxs("div",{className:"absolute inset-0 w-full h-full -z-10 overflow-hidden transition-all duration-700 ease-in-out bg-black",children:[t.type==="color"&&e.jsx("div",{className:"w-full h-full",style:{backgroundColor:t.url}}),t.type==="gradient"&&e.jsx("div",{className:"w-full h-full",style:{background:t.url}}),t.type==="image"&&e.jsxs(e.Fragment,{children:[t.thumbnail&&!i&&e.jsx("img",{src:t.thumbnail,alt:"background thumbnail",className:"w-full h-full object-cover blur-sm scale-105"}),e.jsx("img",{src:t.url,alt:"background",loading:"eager",onLoad:()=>v(!0),className:`w-full h-full object-cover transition-opacity duration-700 ${i?"opacity-100":"opacity-0"}`,style:{position:t.thumbnail?"absolute":"relative"}}),e.jsx("div",{className:"absolute inset-0 bg-black/20"})]}),(t.type==="video"||t.type==="youtube"&&!b&&!l)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),s?N():R.createPortal(N(),document.body)]}),t.type==="youtube"&&(b||l)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-full",style:{backgroundColor:"#1a1a1a"}}),e.jsx("div",{className:"absolute inset-0 bg-black/20"})]}),h==="sun-rays"&&e.jsxs("div",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-hidden z-10",children:[e.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-[radial-gradient(circle,rgba(255,220,150,0.4)_0%,rgba(0,0,0,0)_70%)] blur-[80px]"}),e.jsx("div",{className:"absolute -top-[50%] -right-[50%] w-[200%] h-[200%] opacity-40 mix-blend-overlay origin-center animate-[spin_120s_linear_infinite]",children:e.jsx("div",{className:"w-full h-full bg-[conic-gradient(from_0deg_at_50%_50%,rgba(0,0,0,0)_0deg,rgba(255,255,255,0.1)_15deg,rgba(0,0,0,0)_30deg,rgba(255,200,100,0.1)_45deg,rgba(0,0,0,0)_60deg,rgba(255,255,255,0.1)_90deg,rgba(0,0,0,0)_130deg)]"})}),e.jsx("div",{className:"absolute -top-[50%] -right-[50%] w-[200%] h-[200%] opacity-30 mix-blend-soft-light origin-center animate-[spin_180s_linear_infinite_reverse]",children:e.jsx("div",{className:"w-full h-full bg-[conic-gradient(from_180deg_at_50%_50%,rgba(0,0,0,0)_0deg,rgba(255,255,200,0.1)_10deg,rgba(0,0,0,0)_20deg,rgba(255,255,255,0.05)_40deg,rgba(0,0,0,0)_80deg)]"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-transparent to-orange-200/20 mix-blend-screen"})]}),s?S():R.createPortal(S(),document.body)]})}const H=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{H as B,$ as L,F as _};
