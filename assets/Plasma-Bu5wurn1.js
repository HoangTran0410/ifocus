const p={time:0};function k({ctx:e,canvas:d,data:o,performanceMode:a=!1,beatIntensity:i=0}){const n=d.width,s=d.height,c=o.reduce((t,l)=>t+l,0)/o.length;p.time+=.02+c*.03+i*.05;const r=p.time,h=a?12:6,u=Math.ceil(n/h),M=Math.ceil(s/h),m=o.slice(0,Math.floor(o.length*.2)).reduce((t,l)=>t+l,0)/(o.length*.2),v=o.slice(Math.floor(o.length*.2),Math.floor(o.length*.6)).reduce((t,l)=>t+l,0)/(o.length*.4),$=o.slice(Math.floor(o.length*.6)).reduce((t,l)=>t+l,0)/(o.length*.4);for(let t=0;t<M;t++)for(let l=0;l<u;l++){const g=l/u,f=t/M,C=Math.sin(g*10+r+m*3),R=Math.sin((f*10+r)*.7+v*2),w=Math.sin((g+f)*5+r*.5),y=Math.sin(Math.sqrt((g-.5)**2+(f-.5)**2)*12+r+$*4),S=(C+R+w+y)/4,G=c*60+i*30,q=(S+1)*90+200+G,P=70+c*30,j=40+(S+1)*20+i*15;e.fillStyle=`hsl(${q%360}, ${P}%, ${j}%)`,e.fillRect(l*h,t*h,h,h)}if(!a&&i>.3){const t=e.createRadialGradient(n/2,s/2,0,n/2,s/2,Math.max(n,s)/2);t.addColorStop(0,`rgba(255, 100, 255, ${i*.3})`),t.addColorStop(.5,`rgba(100, 100, 255, ${i*.15})`),t.addColorStop(1,"transparent"),e.fillStyle=t,e.fillRect(0,0,n,s)}if(!a){const t=e.createRadialGradient(n/2,s/2,0,n/2,s/2,Math.max(n,s)*.7);t.addColorStop(0,"transparent"),t.addColorStop(1,`rgba(0, 0, 0, ${.3+c*.2})`),e.fillStyle=t,e.fillRect(0,0,n,s)}}export{k as default};
