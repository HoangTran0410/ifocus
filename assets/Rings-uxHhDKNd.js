const r={rotation:0,pulsePhase:0};function v({ctx:s,canvas:C,data:t,performanceMode:g=!1,beatIntensity:c=0}){const a=C.width/2,i=C.height/2,P=Math.min(a,i)*.9,o=t.reduce((n,d)=>n+d,0)/t.length;r.rotation+=.005+o*.02+c*.05,r.pulsePhase+=.05+c*.1;const m=g?5:8,$=g?32:64,O=c*P*.1;for(let n=m-1;n>=0;n--){const d=n/m,B=P*(.2+d*.8)+O,T=Math.floor(d*t.length),l=t[T]||o,w=260-d*60,k=70+l*30,D=50+l*20;s.beginPath();for(let e=0;e<$;e++){const f=e/$,M=f*Math.PI*2+r.rotation*(n%2===0?1:-1),h=Math.floor(f*t.length),p=t[h]||o,y=Math.sin(r.pulsePhase+n*.5)*5,R=p*P*.15,S=B+R+y,b=a+Math.cos(M)*S,G=i+Math.sin(M)*S;e===0?s.moveTo(b,G):s.lineTo(b,G)}if(s.closePath(),!g&&l>.3&&(s.shadowColor=`hsla(${w}, ${k}%, ${D+20}%, 0.8)`,s.shadowBlur=15+l*10),s.strokeStyle=`hsla(${w}, ${k}%, ${D}%, ${.5+l*.5})`,s.lineWidth=2+l*2,s.stroke(),s.shadowBlur=0,!g)for(let e=0;e<$;e+=4){const f=e/$,M=Math.floor(f*t.length),h=t[M]||o;if(h>.5){const p=f*Math.PI*2+r.rotation*(n%2===0?1:-1),y=Math.sin(r.pulsePhase+n*.5)*5,R=B+h*P*.15+y,S=a+Math.cos(p)*R,b=i+Math.sin(p)*R;s.beginPath(),s.arc(S,b,2+h*3,0,Math.PI*2),s.fillStyle=`hsla(${w+30}, 90%, 70%, ${h})`,s.fill()}}}const I=20+o*30+c*25,u=s.createRadialGradient(a,i,0,a,i,I);u.addColorStop(0,`rgba(255, 255, 255, ${.9+o*.1})`),u.addColorStop(.3,`hsla(280, 80%, 70%, ${.7+o*.3})`),u.addColorStop(.7,`hsla(260, 70%, 50%, ${.4+o*.3})`),u.addColorStop(1,"transparent"),s.beginPath(),s.arc(a,i,I,0,Math.PI*2),s.fillStyle=u,s.fill(),g||(s.shadowColor="rgba(168, 85, 247, 0.5)",s.shadowBlur=30+o*20,s.beginPath(),s.arc(a,i,I*.5,0,Math.PI*2),s.fillStyle="rgba(255, 255, 255, 0.3)",s.fill(),s.shadowBlur=0)}export{v as default};
