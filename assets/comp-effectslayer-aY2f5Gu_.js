import{r as R,j as D}from"./vendor-COPaNxkS.js";let w=0,k=0,z=0,m=0,M=0,u=0,y=[],b=[];function F(e,o){y=[],b=[];let h=e*(.2+Math.random()*.6),n=0;y.push({x:h,y:n});const a=12+Math.floor(Math.random()*8),i=o*.7/a;for(let r=0;r<a;r++){const t=(1-r/a)*80;if(h+=(Math.random()-.5)*t,n+=i+Math.random()*20,y.push({x:h,y:n}),Math.random()<.3&&r>2&&r<a-2){const l=[{x:h,y:n}];let s=h,g=n;const f=3+Math.floor(Math.random()*4),S=Math.random()<.5?-1:1;for(let c=0;c<f;c++)s+=S*(20+Math.random()*30),g+=15+Math.random()*25,l.push({x:s,y:g});b.push(l)}}}const P=(e,o,h,n,a)=>{e.clearRect(0,0,o.width,o.height);const i=Date.now();i-z>3e3+Math.random()*5e3&&(k=(Math.random()-.5)*4,z=i),w+=(k-w)*.01;const r=(n.slant||0)+w;if(n.hasLightning){if(i-M>5e3+Math.random()*2e4&&u===0&&(u=1,M=i,F(o.width,o.height)),u>0){const l=i-M;l<80?m=.8+Math.random()*.2:l<200?(m=.2,u=2):l<280&&u===2?(m=.5+Math.random()*.2,u=3):l<500?m*=.9:(m=0,u=0)}if(m>.01&&y.length>0){e.fillStyle=`rgba(200, 210, 255, ${m*.15})`,e.fillRect(0,0,o.width,o.height),e.shadowBlur=20,e.shadowColor=`rgba(180, 200, 255, ${m})`,e.strokeStyle=`rgba(255, 255, 255, ${m*.8})`,e.lineWidth=3,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(y[0].x,y[0].y);for(let l=1;l<y.length;l++)e.lineTo(y[l].x,y[l].y);e.stroke(),e.lineWidth=1.5,e.strokeStyle=`rgba(200, 220, 255, ${m*.6})`,b.forEach(l=>{e.beginPath(),e.moveTo(l[0].x,l[0].y);for(let s=1;s<l.length;s++)e.lineTo(l[s].x,l[s].y);e.stroke()}),e.shadowBlur=0}}n.hasRipples&&(a!=null&&a.ripples)&&a.ripples.forEach(t=>{const l=t.radius/t.maxRadius,s=t.opacity*(1-l)*(1-l);s>.01&&(e.strokeStyle=`rgba(200, 220, 255, ${s})`,e.lineWidth=Math.max(.5,1.5*(1-l)),e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.stroke())}),e.lineCap="round",h.forEach(t=>{var s;t.y+=t.speed,t.x-=r,t.y>o.height&&(n.hasRipples&&(a!=null&&a.ripples)&&Math.random()<.15&&a.ripples.push({x:t.x,y:o.height-2,radius:0,maxRadius:15+Math.random()*10,opacity:.3+Math.random()*.2,createdAt:Date.now()}),t.y=-t.length,t.x=Math.random()*o.width),t.x<-20&&(t.x=o.width+20),t.x>o.width+20&&(t.x=-20);const l=e.createLinearGradient(t.x,t.y,t.x-r*2,t.y+t.length);l.addColorStop(0,((s=n.color)==null?void 0:s.replace("0.5","0.2"))||"rgba(174, 194, 224, 0.2)"),l.addColorStop(1,n.color||"rgba(174, 194, 224, 0.5)"),e.strokeStyle=l,e.lineWidth=n.lineWidth||1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x-r*2,t.y+t.length),e.stroke()})},A=(e,o,h,n,a)=>{e.clearRect(0,0,o.width,o.height),n.hasStacking&&(a!=null&&a.stacked)&&(a.stacked.forEach(i=>{const r=Date.now()-i.createdAt,t=(n.stackDuration||3e3)*.7,l=r>t?i.opacity*(1-(r-t)/((n.stackDuration||3e3)*.3)):i.opacity;e.globalAlpha=l,e.fillStyle=n.color||"rgba(255, 255, 255, 0.8)",e.beginPath(),e.arc(i.x,i.y,i.size,0,Math.PI*2),e.fill()}),e.globalAlpha=1),e.fillStyle=n.color||"rgba(255, 255, 255, 0.8)",h.forEach(i=>{i.y+=i.speed,i.x+=Math.sin(i.y*.01)*.5,i.y>o.height-5&&(n.hasStacking&&(a!=null&&a.stacked)&&a.stacked.push({x:i.x,y:o.height-i.size,size:i.size,angle:0,opacity:i.opacity,createdAt:Date.now(),color:n.color||"rgba(255, 255, 255, 0.8)"}),i.y=-5,i.x=Math.random()*o.width),e.globalAlpha=i.opacity,e.beginPath(),e.arc(i.x,i.y,i.size,0,Math.PI*2),e.fill()}),e.globalAlpha=1},E=(e,o,h,n,a)=>{e.clearRect(0,0,o.width,o.height),n.hasStacking&&(a!=null&&a.stacked)&&a.stacked.forEach(i=>{const r=Date.now()-i.createdAt,t=(n.stackDuration||3e3)*.7,l=r>t?i.opacity*(1-(r-t)/((n.stackDuration||3e3)*.3)):i.opacity;e.save(),e.translate(i.x,i.y),e.rotate(i.angle),e.fillStyle=i.color.replace(/,\s*$/,`, ${l})`),e.beginPath(),e.ellipse(0,0,i.size*2,i.size,0,0,Math.PI*2),e.fill(),e.restore()}),h.forEach(i=>{i.y+=i.speed*.5,i.x+=Math.sin(i.y*.005+i.angle)*1,i.angle+=i.spin,i.y>o.height-10&&(n.hasStacking&&(a!=null&&a.stacked)&&a.stacked.push({x:i.x,y:o.height-i.size,size:i.size,angle:i.angle,opacity:i.opacity,createdAt:Date.now(),color:n.color||"rgba(218, 165, 32,"}),i.y=-10,i.x=Math.random()*o.width,i.angle=Math.random()*Math.PI*2),e.save(),e.translate(i.x,i.y),e.rotate(i.angle),e.fillStyle=`${n.color} ${i.opacity})`,e.beginPath(),e.ellipse(0,0,i.size*2,i.size,0,0,Math.PI*2),e.fill(),e.restore()})},C=(e,o,h)=>{e.clearRect(0,0,o.width,o.height),h.forEach(n=>{n.vx===void 0&&(n.vx=(Math.random()-.5)*2),n.vy===void 0&&(n.vy=(Math.random()-.5)*2),n.vx+=(Math.random()-.5)*.3,n.vy+=(Math.random()-.5)*.3,n.vx*=.95,n.vy*=.95;const a=2,i=Math.sqrt(n.vx*n.vx+n.vy*n.vy);i>a&&(n.vx=n.vx/i*a,n.vy=n.vy/i*a),n.x+=n.vx,n.y+=n.vy,n.oscillation+=.02,n.x+=Math.sin(n.oscillation*.5)*.2,n.y+=Math.cos(n.oscillation*.3)*.2;const r=50;n.x<r&&(n.vx+=.2),n.x>o.width-r&&(n.vx-=.2),n.y<r&&(n.vy+=.2),n.y>o.height-r&&(n.vy-=.2),n.x>o.width+20&&(n.x=-20),n.x<-20&&(n.x=o.width+20),n.y>o.height+20&&(n.y=-20),n.y<-20&&(n.y=o.height+20);const t=Math.abs(Math.sin(n.oscillation*2))*.7+.3,l=n.opacity*t,s=n.size*(1+t),g=e.createRadialGradient(n.x,n.y,0,n.x,n.y,s*3);g.addColorStop(0,`rgba(255, 255, 150, ${l*.8})`),g.addColorStop(.4,`rgba(255, 255, 150, ${l*.3})`),g.addColorStop(1,"rgba(255, 255, 150, 0)"),e.fillStyle=g,e.beginPath(),e.arc(n.x,n.y,s*3,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255, 255, 200, ${l})`,e.shadowBlur=8,e.shadowColor="rgba(255, 255, 150, 0.8)",e.beginPath(),e.arc(n.x,n.y,n.size,0,Math.PI*2),e.fill(),e.shadowBlur=0})},I=(e,o,h,n)=>{e.clearRect(0,0,o.width,o.height),e.filter=`blur(${n.blur||60}px)`,e.fillStyle=n.color||"rgba(0, 0, 0, 1)",h.forEach(a=>{a.x+=a.speed,a.x>o.width+a.size&&(a.x=-a.size),e.globalAlpha=a.opacity,e.beginPath(),e.arc(a.x,a.y,a.size,0,Math.PI*2),e.fill()}),e.filter="none",e.globalAlpha=1},$={rain:{count:300,speedRange:{min:10,max:15},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:P,color:"rgba(174, 194, 224, 0.5)",lineWidth:1,hasRipples:!0},"heavy-rain":{count:500,speedRange:{min:10,max:15},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:P,color:"rgba(174, 194, 224, 0.2)",lineWidth:2,slant:1,hasRipples:!0,hasLightning:!0},snow:{count:150,speedRange:{min:1,max:2},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:A,color:"rgba(255, 255, 255, 0.8)",hasStacking:!0,stackDuration:4e3},leaves:{count:50,speedRange:{min:1,max:4},sizeRange:{min:2,max:6},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:E,color:"rgba(218, 165, 32,",hasStacking:!0,stackDuration:5e3},"cherry-blossom":{count:50,speedRange:{min:1,max:4},sizeRange:{min:2,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:E,color:"rgba(255, 183, 197,",hasStacking:!0,stackDuration:5e3},fireflies:{count:40,speedRange:{min:.5,max:1},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:C},"cloud-shadows":{count:6,speedRange:{min:.2,max:.4},sizeRange:{min:300,max:700},lengthRange:{min:10,max:30},opacityRange:{min:.15,max:.15},renderFunction:I,color:"rgba(0, 0, 0, 1)",blur:60}};function W({type:e}){const o=R.useRef(null),h=R.useRef([]),n=R.useRef([]);return R.useEffect(()=>{const a=o.current;if(!a||e==="none"||e==="sun-rays")return;const i=a.getContext("2d");if(!i)return;const r=$[e];if(!r)return;let t,l=[];const s=()=>{const d=a.parentElement;d?(a.width=d.clientWidth||window.innerWidth,a.height=d.clientHeight||window.innerHeight):(a.width=window.innerWidth,a.height=window.innerHeight)},g=new ResizeObserver(()=>{s()}),f=a.parentElement;f&&g.observe(f),window.addEventListener("resize",s),s(),(()=>{l=[];for(let d=0;d<r.count;d++)l.push({x:Math.random()*a.width,y:Math.random()*a.height,speed:Math.random()*(r.speedRange.max-r.speedRange.min)+r.speedRange.min,length:r.lengthRange?Math.random()*(r.lengthRange.max-r.lengthRange.min)+r.lengthRange.min:20,size:Math.random()*(r.sizeRange.max-r.sizeRange.min)+r.sizeRange.min,angle:Math.random()*Math.PI*2,spin:Math.random()*.1-.05,opacity:Math.random()*(r.opacityRange.max-r.opacityRange.min)+r.opacityRange.min,oscillation:Math.random()*Math.PI*2})})();const c=()=>{if(r.hasRipples&&(h.current.forEach(d=>{d.radius+=.5,d.opacity-=.01}),h.current=h.current.filter(d=>d.opacity>0&&d.radius<d.maxRadius)),r.hasStacking){const d=Date.now();n.current=n.current.filter(v=>d-v.createdAt<(r.stackDuration||3e3))}r.renderFunction(i,a,l,r,{ripples:h.current,stacked:n.current}),t=requestAnimationFrame(c)};return c(),()=>{g.disconnect(),window.removeEventListener("resize",s),cancelAnimationFrame(t),h.current=[],n.current=[]}},[e]),e==="none"||e==="sun-rays"?null:D.jsx("canvas",{ref:o,className:"absolute inset-0 w-full h-full pointer-events-none z-10"})}export{W as default};
