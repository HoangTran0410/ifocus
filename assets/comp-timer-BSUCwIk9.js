import{r as i,j as o,q as v,P as y,R as T,X as j}from"./vendor-fot2g0I_.js";import{u as S,T as r}from"./comp-audiocontroller-CYS9XcwS.js";import{x as N,y as B}from"./comp-background-CmMYPKJk.js";function z({onClose:c}){const e=N(),d=B(),[p,u]=S("zen_timer_states",{pomodoro:r.pomodoro,shortBreak:r.shortBreak,longBreak:r.longBreak,clock:r.clock,stopwatch:r.stopwatch}),[l,n]=i.useState(!1),[f,x]=i.useState(new Date),s=p[e],h=t=>{u(a=>({...a,[e]:typeof t=="function"?t(a[e]):t}))};i.useEffect(()=>{if(e==="clock"){const t=setInterval(()=>{x(new Date)},1e3);return()=>clearInterval(t)}},[e]),i.useEffect(()=>{n(!1)},[e]),i.useEffect(()=>{let t=null;return e==="stopwatch"&&l?t=window.setInterval(()=>{h(a=>a+1)},1e3):e!=="clock"&&e!=="stopwatch"&&l&&s>0?t=window.setInterval(()=>{h(a=>a-1)},1e3):e!=="stopwatch"&&s===0&&n(!1),()=>{t&&window.clearInterval(t)}},[l,s,e]);const w=()=>n(!l),g=()=>{n(!1),u(t=>({...t,[e]:r[e]}))},m=t=>{const a=Math.floor(t/60),b=t%60;return`${a.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`},k=t=>t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return i.useEffect(()=>{e==="clock"?document.title="iFocus":document.title=`${m(s)} - iFocus`},[s,e]),o.jsxs("div",{className:"group relative flex items-center justify-center p-8 transition-all duration-500 ease-in-out text-white max-w-md mx-auto hover:bg-black/40 hover:backdrop-blur-md rounded-3xl font-sans",children:[o.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-full mb-4 flex sm:space-x-2 space-x-1 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 translate-y-4 group-hover:translate-y-0 bg-white/10",children:["pomodoro","shortBreak","longBreak","stopwatch","clock"].map(t=>o.jsx("button",{onClick:()=>d(t),className:`px-2 py-1 sm:px-4 sm:py-2 rounded-full text-sm font-semibold transition-all duration-300 ${e===t?"bg-white text-black shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"}`,children:t==="pomodoro"?"Focus":t==="shortBreak"?"Short":t==="longBreak"?"Long":t==="stopwatch"?"Stopwatch":"Clock"},t))}),o.jsx("div",{className:"timer-display text-7xl sm:text-9xl font-bold tracking-tight select-none drop-shadow-2xl transition-transform duration-500 group-hover:scale-105",children:e==="clock"?k(f):m(s)}),e!=="clock"&&o.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-4 flex items-center space-x-3 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-y-4 group-hover:translate-y-0",children:[o.jsx("button",{onClick:w,className:"bg-white text-black sm:p-6 p-4 rounded-full hover:scale-105 transition-transform shadow-lg active:scale-95",children:l?o.jsx(v,{size:32,fill:"black"}):o.jsx(y,{size:32,fill:"black",className:"ml-1"})}),(e==="stopwatch"?s>0:s<r[e])&&o.jsx("button",{onClick:g,className:"bg-white/10 text-white sm:p-4 p-3 rounded-full hover:bg-white/20 transition-colors",children:o.jsx(T,{size:24})})]}),c&&o.jsx("button",{onClick:c,className:"absolute top-2 right-2 p-2 rounded-full bg-white/10 text-white/50 hover:bg-white/20 hover:text-white transition-all opacity-0 group-hover:opacity-100 cursor-pointer",title:"Hide Timer",children:o.jsx(j,{size:16})})]})}export{z as default};
