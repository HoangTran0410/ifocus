import{r as R,j as E}from"./react-vendor-DAgaEvQw.js";import"./vendor-Doe1xN7X.js";let M=0,S=0,k=0,g=0,w=0,u=0,m=[],b=[];function D(e,o){m=[],b=[];let h=e*(.2+Math.random()*.6),a=0;m.push({x:h,y:a});const n=12+Math.floor(Math.random()*8),i=o*.7/n;for(let r=0;r<n;r++){const t=(1-r/n)*80;if(h+=(Math.random()-.5)*t,a+=i+Math.random()*20,m.push({x:h,y:a}),Math.random()<.3&&r>2&&r<n-2){const l=[{x:h,y:a}];let s=h,y=a;const f=3+Math.floor(Math.random()*4),d=Math.random()<.5?-1:1;for(let c=0;c<f;c++)s+=d*(20+Math.random()*30),y+=15+Math.random()*25,l.push({x:s,y});b.push(l)}}}const z=(e,o,h,a,n)=>{e.clearRect(0,0,o.width,o.height);const i=Date.now();i-k>3e3+Math.random()*5e3&&(S=(Math.random()-.5)*4,k=i),M+=(S-M)*.01;const r=(a.slant||0)+M;if(a.hasLightning){if(i-w>5e3+Math.random()*2e4&&u===0&&(u=1,w=i,D(o.width,o.height)),u>0){const l=i-w;l<80?g=.8+Math.random()*.2:l<200?(g=.2,u=2):l<280&&u===2?(g=.5+Math.random()*.2,u=3):l<500?g*=.9:(g=0,u=0)}if(g>.01&&m.length>0){e.fillStyle=`rgba(200, 210, 255, ${g*.15})`,e.fillRect(0,0,o.width,o.height),e.shadowBlur=20,e.shadowColor=`rgba(180, 200, 255, ${g})`,e.strokeStyle=`rgba(255, 255, 255, ${g*.8})`,e.lineWidth=3,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(m[0].x,m[0].y);for(let l=1;l<m.length;l++)e.lineTo(m[l].x,m[l].y);e.stroke(),e.lineWidth=1.5,e.strokeStyle=`rgba(200, 220, 255, ${g*.6})`,b.forEach(l=>{e.beginPath(),e.moveTo(l[0].x,l[0].y);for(let s=1;s<l.length;s++)e.lineTo(l[s].x,l[s].y);e.stroke()}),e.shadowBlur=0}}a.hasRipples&&(n!=null&&n.ripples)&&n.ripples.forEach(t=>{const l=t.radius/t.maxRadius,s=t.opacity*(1-l)*(1-l);s>.01&&(e.strokeStyle=`rgba(200, 220, 255, ${s})`,e.lineWidth=Math.max(.5,1.5*(1-l)),e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.stroke())}),e.lineCap="round",h.forEach(t=>{var s;t.y+=t.speed,t.x-=r,t.y>o.height&&(a.hasRipples&&(n!=null&&n.ripples)&&Math.random()<.15&&n.ripples.push({x:t.x,y:o.height-2,radius:0,maxRadius:15+Math.random()*10,opacity:.3+Math.random()*.2,createdAt:Date.now()}),t.y=-t.length,t.x=Math.random()*o.width),t.x<-20&&(t.x=o.width+20),t.x>o.width+20&&(t.x=-20);const l=e.createLinearGradient(t.x,t.y,t.x-r*2,t.y+t.length);l.addColorStop(0,((s=a.color)==null?void 0:s.replace("0.5","0.2"))||"rgba(174, 194, 224, 0.2)"),l.addColorStop(1,a.color||"rgba(174, 194, 224, 0.5)"),e.strokeStyle=l,e.lineWidth=a.lineWidth||1,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x-r*2,t.y+t.length),e.stroke()})},F=(e,o,h,a,n)=>{e.clearRect(0,0,o.width,o.height),a.hasStacking&&(n!=null&&n.stacked)&&(n.stacked.forEach(i=>{const r=Date.now()-i.createdAt,t=(a.stackDuration||3e3)*.7,l=r>t?i.opacity*(1-(r-t)/((a.stackDuration||3e3)*.3)):i.opacity;e.globalAlpha=l,e.fillStyle=a.color||"rgba(255, 255, 255, 0.8)",e.beginPath(),e.arc(i.x,i.y,i.size,0,Math.PI*2),e.fill()}),e.globalAlpha=1),e.fillStyle=a.color||"rgba(255, 255, 255, 0.8)",h.forEach(i=>{i.y+=i.speed,i.x+=Math.sin(i.y*.01)*.5,i.y>o.height-5&&(a.hasStacking&&(n!=null&&n.stacked)&&n.stacked.push({x:i.x,y:o.height-i.size,size:i.size,angle:0,opacity:i.opacity,createdAt:Date.now(),color:a.color||"rgba(255, 255, 255, 0.8)"}),i.y=-5,i.x=Math.random()*o.width),e.globalAlpha=i.opacity,e.beginPath(),e.arc(i.x,i.y,i.size,0,Math.PI*2),e.fill()}),e.globalAlpha=1},P=(e,o,h,a,n)=>{e.clearRect(0,0,o.width,o.height),a.hasStacking&&(n!=null&&n.stacked)&&n.stacked.forEach(i=>{const r=Date.now()-i.createdAt,t=(a.stackDuration||3e3)*.7,l=r>t?i.opacity*(1-(r-t)/((a.stackDuration||3e3)*.3)):i.opacity;e.save(),e.translate(i.x,i.y),e.rotate(i.angle),e.fillStyle=i.color.replace(/,\s*$/,`, ${l})`),e.beginPath(),e.ellipse(0,0,i.size*2,i.size,0,0,Math.PI*2),e.fill(),e.restore()}),h.forEach(i=>{i.y+=i.speed*.5,i.x+=Math.sin(i.y*.005+i.angle)*1,i.angle+=i.spin,i.y>o.height-10&&(a.hasStacking&&(n!=null&&n.stacked)&&n.stacked.push({x:i.x,y:o.height-i.size,size:i.size,angle:i.angle,opacity:i.opacity,createdAt:Date.now(),color:a.color||"rgba(218, 165, 32,"}),i.y=-10,i.x=Math.random()*o.width,i.angle=Math.random()*Math.PI*2),e.save(),e.translate(i.x,i.y),e.rotate(i.angle),e.fillStyle=`${a.color} ${i.opacity})`,e.beginPath(),e.ellipse(0,0,i.size*2,i.size,0,0,Math.PI*2),e.fill(),e.restore()})},A=(e,o,h)=>{e.clearRect(0,0,o.width,o.height),h.forEach(a=>{a.vx===void 0&&(a.vx=(Math.random()-.5)*2),a.vy===void 0&&(a.vy=(Math.random()-.5)*2),a.vx+=(Math.random()-.5)*.3,a.vy+=(Math.random()-.5)*.3,a.vx*=.95,a.vy*=.95;const n=2,i=Math.sqrt(a.vx*a.vx+a.vy*a.vy);i>n&&(a.vx=a.vx/i*n,a.vy=a.vy/i*n),a.x+=a.vx,a.y+=a.vy,a.oscillation+=.02,a.x+=Math.sin(a.oscillation*.5)*.2,a.y+=Math.cos(a.oscillation*.3)*.2;const r=50;a.x<r&&(a.vx+=.2),a.x>o.width-r&&(a.vx-=.2),a.y<r&&(a.vy+=.2),a.y>o.height-r&&(a.vy-=.2),a.x>o.width+20&&(a.x=-20),a.x<-20&&(a.x=o.width+20),a.y>o.height+20&&(a.y=-20),a.y<-20&&(a.y=o.height+20);const t=Math.abs(Math.sin(a.oscillation*2))*.7+.3,l=a.opacity*t,s=a.size*(1+t),y=e.createRadialGradient(a.x,a.y,0,a.x,a.y,s*3);y.addColorStop(0,`rgba(255, 255, 150, ${l*.8})`),y.addColorStop(.4,`rgba(255, 255, 150, ${l*.3})`),y.addColorStop(1,"rgba(255, 255, 150, 0)"),e.fillStyle=y,e.beginPath(),e.arc(a.x,a.y,s*3,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255, 255, 200, ${l})`,e.shadowBlur=8,e.shadowColor="rgba(255, 255, 150, 0.8)",e.beginPath(),e.arc(a.x,a.y,a.size,0,Math.PI*2),e.fill(),e.shadowBlur=0})},C=(e,o,h,a)=>{e.clearRect(0,0,o.width,o.height),e.filter=`blur(${a.blur||60}px)`,e.fillStyle=a.color||"rgba(0, 0, 0, 1)",h.forEach(n=>{n.x+=n.speed,n.x>o.width+n.size&&(n.x=-n.size),e.globalAlpha=n.opacity,e.beginPath(),e.arc(n.x,n.y,n.size,0,Math.PI*2),e.fill()}),e.filter="none",e.globalAlpha=1},I={rain:{count:300,speedRange:{min:10,max:15},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:z,color:"rgba(174, 194, 224, 0.5)",lineWidth:1,hasRipples:!0},"heavy-rain":{count:500,speedRange:{min:10,max:15},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:z,color:"rgba(174, 194, 224, 0.2)",lineWidth:2,slant:1,hasRipples:!0,hasLightning:!0},snow:{count:150,speedRange:{min:1,max:2},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:F,color:"rgba(255, 255, 255, 0.8)",hasStacking:!0,stackDuration:4e3},leaves:{count:50,speedRange:{min:1,max:4},sizeRange:{min:2,max:6},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:P,color:"rgba(218, 165, 32,",hasStacking:!0,stackDuration:5e3},"cherry-blossom":{count:50,speedRange:{min:1,max:4},sizeRange:{min:2,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:P,color:"rgba(255, 183, 197,",hasStacking:!0,stackDuration:5e3},fireflies:{count:40,speedRange:{min:.5,max:1},sizeRange:{min:1,max:4},lengthRange:{min:10,max:30},opacityRange:{min:.1,max:.6},renderFunction:A},"cloud-shadows":{count:6,speedRange:{min:.2,max:.4},sizeRange:{min:300,max:700},lengthRange:{min:10,max:30},opacityRange:{min:.15,max:.15},renderFunction:C,color:"rgba(0, 0, 0, 1)",blur:60}};function L({type:e}){const o=R.useRef(null),h=R.useRef([]),a=R.useRef([]);return R.useEffect(()=>{const n=o.current;if(!n||e==="none"||e==="sun-rays")return;const i=n.getContext("2d");if(!i)return;const r=I[e];if(!r)return;let t,l=[];const s=()=>{n.width=window.innerWidth,n.height=window.innerHeight};window.addEventListener("resize",s),s(),(()=>{l=[];for(let d=0;d<r.count;d++)l.push({x:Math.random()*n.width,y:Math.random()*n.height,speed:Math.random()*(r.speedRange.max-r.speedRange.min)+r.speedRange.min,length:r.lengthRange?Math.random()*(r.lengthRange.max-r.lengthRange.min)+r.lengthRange.min:20,size:Math.random()*(r.sizeRange.max-r.sizeRange.min)+r.sizeRange.min,angle:Math.random()*Math.PI*2,spin:Math.random()*.1-.05,opacity:Math.random()*(r.opacityRange.max-r.opacityRange.min)+r.opacityRange.min,oscillation:Math.random()*Math.PI*2})})();const f=()=>{if(r.hasRipples&&(h.current.forEach(d=>{d.radius+=.5,d.opacity-=.01}),h.current=h.current.filter(d=>d.opacity>0&&d.radius<d.maxRadius)),r.hasStacking){const d=Date.now();a.current=a.current.filter(c=>d-c.createdAt<(r.stackDuration||3e3))}r.renderFunction(i,n,l,r,{ripples:h.current,stacked:a.current}),t=requestAnimationFrame(f)};return f(),()=>{window.removeEventListener("resize",s),cancelAnimationFrame(t),h.current=[],a.current=[]}},[e]),e==="none"||e==="sun-rays"?null:E.jsx("canvas",{ref:o,className:"absolute inset-0 w-full h-full pointer-events-none z-10"})}export{L as default};
