const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./comp-background-CmMYPKJk.js","./vendor-fot2g0I_.js","./comp-audiocontroller-CYS9XcwS.js","./comp-timer-BSUCwIk9.js","./comp-tasks-CAPe0Fzz.js","./comp-pipcontent-kN4ZZuTb.js","./comp-notes-DamlPTOa.js","./comp-sceneselector-CuamIK_3.js","./comp-effectsselector-C2kagqiZ.js","./comp-visualizer-C6dUs0wo.js"])))=>i.map(i=>d[i]);
import{l,r as m,j as e,a as A,t as C,x as I,y as L,I as T,z as R,M as O,B as V,d as D,X as F,D as M,E as $}from"./vendor-fot2g0I_.js";import{_ as c,L as a,b as B,c as q,f as W,d as G,e as K}from"./comp-background-CmMYPKJk.js";import"./comp-audiocontroller-CYS9XcwS.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function x(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(s){if(s.ep)return;s.ep=!0;const t=x(s);fetch(s.href,t)}})();const X=l(()=>c(()=>import("./comp-background-CmMYPKJk.js").then(n=>n.G),__vite__mapDeps([0,1,2]),import.meta.url),{fallback:a}),H=l(()=>c(()=>import("./comp-timer-BSUCwIk9.js"),__vite__mapDeps([3,1,2,0]),import.meta.url),{fallback:a}),J=l(()=>c(()=>import("./comp-audiocontroller-CYS9XcwS.js").then(n=>n.A),__vite__mapDeps([2,1]),import.meta.url),{fallback:a}),Q=l(()=>c(()=>import("./comp-tasks-CAPe0Fzz.js"),__vite__mapDeps([4,1,0,2]),import.meta.url),{fallback:a}),U=l(()=>c(()=>import("./comp-pipcontent-kN4ZZuTb.js"),__vite__mapDeps([5,0,1,2]),import.meta.url),{fallback:a}),Y=l(()=>c(()=>import("./comp-notes-DamlPTOa.js"),__vite__mapDeps([6,1,0,2]),import.meta.url),{fallback:a}),Z=l(()=>c(()=>import("./comp-sceneselector-CuamIK_3.js"),__vite__mapDeps([7,1,2,0]),import.meta.url),{fallback:a}),ee=l(()=>c(()=>import("./comp-effectsselector-C2kagqiZ.js"),__vite__mapDeps([8,1,2,0]),import.meta.url),{fallback:a}),_=l(()=>c(()=>import("./comp-visualizer-C6dUs0wo.js"),__vite__mapDeps([9,1,2,0]),import.meta.url),{fallback:a});function te(){const n=B(),d=q(),x=W(),u=G(),s=K(),[t,i]=m.useState("none"),[h,k]=m.useState(new Set),[y,w]=m.useState(!1),[v,b]=m.useState(!1),r=m.useRef(null);m.useEffect(()=>{t!=="none"&&!h.has(t)&&k(o=>new Set([...o,t]))},[t,h]),m.useEffect(()=>{!u&&t==="none"&&i("effects")},[u]);const E=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),w(!1)):(document.documentElement.requestFullscreen(),w(!0))},N=async()=>{try{if(console.log("Toggle PiP clicked"),!window.documentPictureInPicture){alert("Document Picture-in-Picture is not supported in your browser. Please use Chrome 116+ or Edge 116+.");return}if(r.current&&!r.current.closed){r.current.close(),r.current=null,b(!1);return}const o=await window.documentPictureInPicture.requestWindow({width:800,height:450});r.current=o,Array.from(document.styleSheets).forEach(j=>{try{const g=Array.from(j.cssRules).map(z=>z.cssText).join(`
`),f=o.document.createElement("style");f.textContent=g,o.document.head.appendChild(f)}catch{const f=o.document.createElement("link");f.rel="stylesheet",f.href=j.href||"",f.href&&o.document.head.appendChild(f)}}),o.document.body.style.margin="0",o.document.body.style.padding="0",o.document.body.style.overflow="hidden",o.addEventListener("pagehide",()=>{r.current=null,b(!1)}),b(!0)}catch(o){console.error("PiP error:",o),alert("Failed to activate Picture-in-Picture mode. Error: "+o.message),b(!1)}},S=()=>{window.open("https://github.com/hoangtran0410/ifocus","_blank")};return m.useEffect(()=>()=>{r.current&&!r.current.closed&&r.current.close()},[]),e.jsxs("div",{className:"pip-capture-root relative w-screen h-screen overflow-hidden font-sans",children:[e.jsx(X,{}),n&&x==="window"&&e.jsx(_,{onClose:()=>d(!1)}),e.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 pointer-events-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-white/10 rounded-lg p-2 transition-colors",onClick:S,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/20 backdrop-blur-md flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-white",children:"F"})}),e.jsx("span",{className:"text-white font-semibold tracking-wide text-lg shadow-black drop-shadow-md",children:"iFocus"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:N,className:`p-3 transition-colors rounded-full hover:bg-white/10 ${v?"text-white":"text-white/70 hover:text-white"}`,title:"Picture-in-Picture",children:e.jsx(C,{size:20})}),e.jsx("button",{onClick:E,className:"p-3 text-white/70 hover:text-white transition-colors rounded-full hover:bg-white/10",title:"Fullscreen",children:y?e.jsx(I,{size:20}):e.jsx(L,{size:20})})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pointer-events-auto",children:n&&x==="center"?e.jsx("div",{className:"transition-all duration-500 w-full max-w-2xl",children:e.jsx(_,{onClose:()=>d(!1),isCenterMode:!0})}):u?e.jsx("div",{className:"transition-all duration-500",children:e.jsx(H,{onClose:()=>s(!1)})}):null}),e.jsx("div",{className:"flex justify-center pb-6 pointer-events-auto",children:e.jsx("div",{className:"transition-all duration-500",children:e.jsxs("div",{className:"flex gap-0 sm:gap-2 p-2 bg-black/40 opacity-50 hover:opacity-100 hover:backdrop-blur transition-all rounded-2xl border border-white/10 shadow-2xl",children:[e.jsx(p,{icon:e.jsx(T,{size:20}),label:"Scenes",isActive:t==="scenes",onClick:()=>i(t==="scenes"?"none":"scenes")}),e.jsx(p,{icon:e.jsx(R,{size:20}),label:"Effects",isActive:t==="effects",onClick:()=>i(t==="effects"?"none":"effects")}),e.jsx(p,{icon:e.jsx(O,{size:20}),label:"Sounds",isActive:t==="audio",onClick:()=>i(t==="audio"?"none":"audio")}),e.jsx("div",{className:"w-px h-10 bg-white/10 mx-1 self-center"}),e.jsx(p,{icon:e.jsx(V,{size:20}),label:"Tasks",isActive:t==="tasks",onClick:()=>i(t==="tasks"?"none":"tasks")}),e.jsx(p,{icon:e.jsx(D,{size:20}),label:"Notes",isActive:t==="notes",onClick:()=>i(t==="notes"?"none":"notes")})]})})})]}),e.jsx("div",{className:`absolute top-0 right-0 h-full w-full sm:w-96 glass-panel border-l border-white/10 transition-transform duration-300 ease-out z-20 ${t!=="none"?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-white/50 text-xs font-bold uppercase tracking-widest",children:t}),e.jsx("button",{onClick:()=>i("none"),className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:e.jsx(F,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[e.jsx("div",{className:`absolute inset-0 ${t==="audio"?"block":"hidden"}`,children:h.has("audio")&&e.jsx(J,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="tasks"?"block":"hidden"}`,children:h.has("tasks")&&e.jsx(Q,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="notes"?"block":"hidden"}`,children:h.has("notes")&&e.jsx(Y,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="scenes"?"block":"hidden"}`,children:h.has("scenes")&&e.jsx(Z,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="effects"?"block":"hidden"}`,children:h.has("effects")&&e.jsx(ee,{})})]})]})}),v&&r.current&&A.createPortal(e.jsx(U,{}),r.current.document.body)]})}const p=({icon:n,label:d,isActive:x,onClick:u})=>e.jsxs("button",{onClick:u,className:`group relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 ${x?"bg-white text-black shadow-lg":"text-white/70 hover:bg-white/10 hover:text-white hover:translate-y-[-2px]"}`,children:[n,e.jsx("span",{className:"absolute -bottom-8 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-medium text-white bg-black/60 px-2 py-1 rounded backdrop-blur-sm whitespace-nowrap pointer-events-none",children:d})]}),P=document.getElementById("root");if(!P)throw new Error("Could not find root element to mount to");const se=M.createRoot(P);se.render(e.jsx($.StrictMode,{children:e.jsx(te,{})}));
