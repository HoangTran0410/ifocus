const c=new WeakMap,d=new Set;function A(e){let t=c.get(e);if(t)return t;const r={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1};return t=e.getContext("webgl2",r)||e.getContext("webgl",r)||e.getContext("experimental-webgl",r),t&&(c.set(e,t),d.add({canvas:e,gl:t}),t.clearColor(0,0,0,0)),t}function C(e){const t=c.get(e);if(t){const r=t.getExtension("WEBGL_lose_context");r&&r.loseContext(),c.delete(e);for(const n of d)if(n.canvas===e){d.delete(n);break}}}function l(e,t,r,n){n&&n.length>0&&(r=n.map(s=>`#define ${s}
`).join("")+r);const o=e.createShader(t);return o?(e.shaderSource(o,r),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(console.error("Shader compile error:",e.getShaderInfoLog(o)),e.deleteShader(o),null)):null}function g(e,t,r){const n=l(e,e.VERTEX_SHADER,t),o=l(e,e.FRAGMENT_SHADER,r);return!n||!o?null:m(e,n,o)}function m(e,t,r){const n=e.createProgram();return n?(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)?n:(console.error("Program link error:",e.getProgramInfoLog(n)),e.deleteProgram(n),null)):null}function R(e,t){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<n;o++){const a=e.getActiveUniform(t,o);a&&(r[a.name]=e.getUniformLocation(t,a.name))}return r}const _=`
  attribute vec2 a_position;
  varying vec2 v_uv;

  void main() {
    v_uv = a_position * 0.5 + 0.5;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`;function p(e){const t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,-1,-1,1,1,1,-1]),e.STATIC_DRAW)}function E(e,t){const r=e.getAttribLocation(t,"a_position");e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6)}function x(e,t,r){t.clearRect(0,0,r.width,r.height),t.drawImage(e,0,0)}function S(e,t,r){let n=0,o=0,a=0;const s=Math.floor(e*6),h=e*6-s,i=r*(1-t),f=r*(1-h*t),u=r*(1-(1-h)*t);switch(s%6){case 0:n=r,o=u,a=i;break;case 1:n=f,o=r,a=i;break;case 2:n=i,o=r,a=u;break;case 3:n=i,o=f,a=r;break;case 4:n=u,o=i,a=r;break;case 5:n=r,o=i,a=f;break}return[n,o,a]}function P(e){if(e.length===0)return 0;let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}function b(e,t,r){const[n,o,a]=S(e,t,r);return{r:n,g:o,b:a}}function L(){const e=b(Math.random(),1,1);return e.r*=.15,e.g*=.15,e.b*=.15,e}export{_ as F,m as a,R as b,l as c,A as d,g as e,E as f,L as g,P as h,x as i,C as r,p as s};
