const r={rotation:0,pulsePhase:0};function E({ctx:t,canvas:C,data:o,performanceMode:g=!1,beatIntensity:O=0,bass:p=0}){const a=C.width/2,i=C.height/2,c=Math.min(a,i)*.9,s=o.reduce((n,d)=>n+d,0)/o.length;r.rotation+=.005+s*.02+p*.06,r.pulsePhase+=.05+p*.15;const m=g?5:8,P=g?32:64,T=p*c*.15;for(let n=m-1;n>=0;n--){const d=n/m,B=c*(.2+d*.8)+T,v=Math.floor(d*o.length),l=o[v]||s,S=260-d*60,k=70+l*30,D=50+l*20;t.beginPath();for(let e=0;e<P;e++){const f=e/P,$=f*Math.PI*2+r.rotation*(n%2===0?1:-1),h=Math.floor(f*o.length),I=o[h]||s,w=Math.sin(r.pulsePhase+n*.5)*5,M=I*c*.15,y=B+M+w,b=a+Math.cos($)*y,G=i+Math.sin($)*y;e===0?t.moveTo(b,G):t.lineTo(b,G)}if(t.closePath(),!g&&l>.3&&(t.shadowColor=`hsla(${S}, ${k}%, ${D+20}%, 0.8)`,t.shadowBlur=15+l*10),t.strokeStyle=`hsla(${S}, ${k}%, ${D}%, ${.5+l*.5})`,t.lineWidth=2+l*2,t.stroke(),t.shadowBlur=0,!g)for(let e=0;e<P;e+=4){const f=e/P,$=Math.floor(f*o.length),h=o[$]||s;if(h>.5){const I=f*Math.PI*2+r.rotation*(n%2===0?1:-1),w=Math.sin(r.pulsePhase+n*.5)*5,M=B+h*c*.15+w,y=a+Math.cos(I)*M,b=i+Math.sin(I)*M;t.beginPath(),t.arc(y,b,2+h*3,0,Math.PI*2),t.fillStyle=`hsla(${S+30}, 90%, 70%, ${h})`,t.fill()}}}const R=20+s*30+O*25,u=t.createRadialGradient(a,i,0,a,i,R);u.addColorStop(0,`rgba(255, 255, 255, ${.9+s*.1})`),u.addColorStop(.3,`hsla(280, 80%, 70%, ${.7+s*.3})`),u.addColorStop(.7,`hsla(260, 70%, 50%, ${.4+s*.3})`),u.addColorStop(1,"transparent"),t.beginPath(),t.arc(a,i,R,0,Math.PI*2),t.fillStyle=u,t.fill(),g||(t.shadowColor="rgba(168, 85, 247, 0.5)",t.shadowBlur=30+s*20,t.beginPath(),t.arc(a,i,R*.5,0,Math.PI*2),t.fillStyle="rgba(255, 255, 255, 0.3)",t.fill(),t.shadowBlur=0)}export{E as default};
