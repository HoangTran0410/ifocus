const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Bars-CLOSDa-b.js","./vendor-COPaNxkS.js","./comp-audiocontroller-Cl3Cj2Ve.js","./comp-background-B54EcfXi.js","./Wave-BQKMfr23.js","./Circular-DJ51-QvU.js","./Spectrum-CUI1TYHJ.js","./WebGL_Fluid-p_fWKj1M.js","./WebGL_Fiber-CmIjI2dj.js"])))=>i.map(i=>d[i]);
import{r as s,j as e,s as Qe,t as Je,u as et,v as tt,w as rt,x as ot,X as it,T as nt,U as at,y as st,R as lt,z as ut}from"./vendor-COPaNxkS.js";import{u as V}from"./comp-audiocontroller-Cl3Cj2Ve.js";import{_ as n,f as ct,g as dt,z as ce,A as K,B as mt,C as pt,D as ht,E as ft,F as _t,G as gt,H as xt}from"./comp-background-B54EcfXi.js";const Ae=new WeakMap,de=new Set;function bt(r){let o=Ae.get(r);if(o)return o;const a={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1};return o=r.getContext("webgl2",a)||r.getContext("webgl",a)||r.getContext("experimental-webgl",a),o&&(Ae.set(r,o),de.add({canvas:r,gl:o}),o.clearColor(0,0,0,0),de.size>6&&console.warn(`[WebGL] WARNING: ${de.size} active WebGL contexts! Risk of context loss.`)),o}const f={glCanvas:null,gl:null,quadBuffer:null,quadSetup:!1};function ze(){return f.glCanvas||(f.glCanvas=document.createElement("canvas")),f.glCanvas}function wt(r,o){const a=ze();return(a.width!==r||a.height!==o)&&(a.width=r,a.height=o),f.gl||(console.log("[WebGL] Creating shared WebGL context"),f.gl=bt(a),f.quadSetup=!1,f.gl||console.warn("[WebGL] Failed to create shared WebGL context!")),f.gl!==null}function vt(){return f.gl}function Et(){const r=f.gl;!r||f.quadSetup||(f.quadBuffer||(f.quadBuffer=r.createBuffer()),r.bindBuffer(r.ARRAY_BUFFER,f.quadBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),r.STATIC_DRAW),f.quadSetup=!0)}function Rt(r){const o=f.gl;if(!o||!f.quadBuffer)return;const a=o.getAttribLocation(r,"a_position");o.bindBuffer(o.ARRAY_BUFFER,f.quadBuffer),o.enableVertexAttribArray(a),o.vertexAttribPointer(a,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,6)}function je(r,o,a,c){c&&c.length>0&&(a=c.map(g=>`#define ${g}
`).join("")+a);const l=r.createShader(o);return l?(r.shaderSource(l,a),r.compileShader(l),r.getShaderParameter(l,r.COMPILE_STATUS)?l:(console.error("Shader compile error:",r.getShaderInfoLog(l)),r.deleteShader(l),null)):null}function Lt(r,o,a){const c=je(r,r.VERTEX_SHADER,o),l=je(r,r.FRAGMENT_SHADER,a);return!c||!l?null:Tt(r,c,l)}function Tt(r,o,a){const c=r.createProgram();return c?(r.attachShader(c,o),r.attachShader(c,a),r.linkProgram(c),r.getProgramParameter(c,r.LINK_STATUS)?c:(console.error("Program link error:",r.getProgramInfoLog(c)),r.deleteProgram(c),null)):null}function Pt(r,o){const a={},c=r.getProgramParameter(o,r.ACTIVE_UNIFORMS);for(let l=0;l<c;l++){const h=r.getActiveUniform(o,l);h&&(a[h.name]=r.getUniformLocation(o,h.name))}return a}const Dt=`
  attribute vec2 a_position;
  varying vec2 v_uv;

  void main() {
    v_uv = a_position * 0.5 + 0.5;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`;function At(r,o,a){o.clearRect(0,0,a.width,a.height),o.drawImage(r,0,0)}function jt(r,o,a){let c=0,l=0,h=0;const g=Math.floor(r*6),M=r*6-g,T=a*(1-o),C=a*(1-M*o),P=a*(1-(1-M)*o);switch(g%6){case 0:c=a,l=P,h=T;break;case 1:c=C,l=a,h=T;break;case 2:c=T,l=a,h=P;break;case 3:c=T,l=C,h=a;break;case 4:c=P,l=T,h=a;break;case 5:c=a,l=T,h=C;break}return[c,l,h]}function Ft(r){if(r.length===0)return 0;let o=0;for(let a=0;a<r.length;a++)o=(o<<5)-o+r.charCodeAt(a)|0;return o}function It(r,o,a){const[c,l,h]=jt(r,o,a);return{r:c,g:l,b:h}}function Wt(){const r=It(Math.random(),1,1);return r.r*=.15,r.g*=.15,r.b*=.15,r}const te=new Map,Q=512;function Ct(r,o){const{ctx:a,canvas:c,data:l,performanceMode:h=!1,beatIntensity:g=0,bass:M=0,mid:T=0,high:C=0}=r;if(!wt(c.width,c.height))return;const P=ze(),i=vt();if(!i)return;const E=r.mode||"default";let u=te.get(E);if(u||(u={program:null,uniforms:{},time:0,audioTexture:null,audioData:null},te.set(E,u)),!u.program){if(u.program=Lt(i,Dt,o),!u.program)return;u.uniforms=Pt(i,u.program)}const m=u.uniforms.u_audioData!=null;if(m&&(u.audioTexture||(u.audioTexture=i.createTexture(),u.audioData=new Uint8Array(Q*2*4)),u.audioTexture&&u.audioData)){for(let b=0;b<Q;b++){const G=Math.floor(b/Q*l.length),D=Math.floor((l[G]||0)*255),A=b*4;u.audioData[A]=D,u.audioData[A+1]=D,u.audioData[A+2]=D,u.audioData[A+3]=255}i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,u.audioTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,Q,2,0,i.RGBA,i.UNSIGNED_BYTE,u.audioData),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)}if(Et(),!u.program)return;u.time+=h?.012:.016;const re=l.reduce((b,G)=>b+G,0)/l.length;i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.useProgram(u.program),i.uniform1f(u.uniforms.u_time,u.time),i.uniform1f(u.uniforms.u_intensity,re),i.uniform1f(u.uniforms.u_beatIntensity,g),i.uniform1f(u.uniforms.u_bass,M),i.uniform1f(u.uniforms.u_mid,T),i.uniform1f(u.uniforms.u_high,C),i.uniform2f(u.uniforms.u_resolution,c.width,c.height),m&&u.audioTexture&&(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,u.audioTexture),i.uniform1i(u.uniforms.u_audioData,0)),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),Rt(u.program),At(P,a,c)}function Me(r){if(r===0)te.clear();else if(typeof r=="string"){const o=te.get(r);if(!o)return;o.program=null,o.uniforms={}}}const me={"ðŸ”§ (Test)":()=>n(()=>import("./FrequencyBands-CYy9ju4N.js"),[],import.meta.url),"ðŸ“Š Bars":()=>n(()=>import("./Bars-CLOSDa-b.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),"ðŸŒŠ Wave":()=>n(()=>import("./Wave-BQKMfr23.js"),__vite__mapDeps([4,1,2,3]),import.meta.url),"ðŸŸ£ Circular":()=>n(()=>import("./Circular-DJ51-QvU.js"),__vite__mapDeps([5,1,2,3]),import.meta.url),"ðŸ”Š TrapNation":()=>n(()=>import("./TrapNation-B6nzrewg.js"),[],import.meta.url),"ðŸŒˆ Spectrum":()=>n(()=>import("./Spectrum-CUI1TYHJ.js"),__vite__mapDeps([6,1,2,3]),import.meta.url),"âœ¨ Particles":()=>n(()=>import("./Particles-D5t2gMHO.js"),[],import.meta.url),"ðŸ§¬ DnaHelix":()=>n(()=>import("./DnaHelix-ssc88XVj.js"),[],import.meta.url),"ã€°ï¸ Oscilloscope":()=>n(()=>import("./Oscilloscope-D17QgPTu.js"),[],import.meta.url),"ðŸ”† RadialLines":()=>n(()=>import("./RadialLines-BcRsm6sT.js"),[],import.meta.url),"ðŸŒŒ Galaxy":()=>n(()=>import("./Galaxy-i7ixP_Vy.js"),[],import.meta.url),"âš« BlackHole":()=>n(()=>import("./BlackHole-CQSDrsO8.js"),[],import.meta.url),"ðŸ’» Matrix":()=>n(()=>import("./Matrix-GbIVE_cS.js"),[],import.meta.url),"ðŸŽ† Fireworks":()=>n(()=>import("./Fireworks-Btw7m9vA.js"),[],import.meta.url),"ðŸŒ  Aurora":()=>n(()=>import("./Aurora-eR0gUR6a.js"),[],import.meta.url),"ðŸ’ Rings":()=>n(()=>import("./Rings-DgCSEA4s.js"),[],import.meta.url),"ðŸ“ˆ Waveform3D":()=>n(()=>import("./Waveform3D-CKcxO5iK.js"),[],import.meta.url),"â­ Starfield":()=>n(()=>import("./Starfield-BqVxL3YO.js"),[],import.meta.url),"âš›ï¸ Plasma":()=>n(()=>import("./Plasma-TxBw0kFf.js"),[],import.meta.url),"âš¡ Lightning":()=>n(()=>import("./Lightning-ZfCAkrcJ.js"),[],import.meta.url),"ðŸ Hexagons":()=>n(()=>import("./Hexagons-DL83dJF1.js"),[],import.meta.url),"ðŸŒ¿ Fractal":()=>n(()=>import("./Fractal-CrOs2AwR.js"),[],import.meta.url),"ðŸ’§ Fluid (WebGL)":()=>n(()=>import("./WebGL_Fluid-p_fWKj1M.js"),__vite__mapDeps([7,1,2,3]),import.meta.url),"ðŸ•³ï¸ BlackHole (WebGL)":()=>n(()=>import("./WebGL_BlackHole-CgCn8LL6.js"),[],import.meta.url),"ðŸŒ€ Accretion (WebGL)":()=>n(()=>import("./WebGL_Accretion-BIM9kTks.js"),[],import.meta.url),"âš¡ Lightning (WebGL)":()=>n(()=>import("./WebGL_Lightning-DsFB_DjF.js"),[],import.meta.url),"ðŸŒ… Sunset (WebGL)":()=>n(()=>import("./WebGL_Sunset-DZlHUt2l.js"),[],import.meta.url),"ðŸŽ² HoloDice (WebGL)":()=>n(()=>import("./WebGL_HoloDice-DqmOk3zH.js"),[],import.meta.url),"ðŸ“¦ Cube (WebGL)":()=>n(()=>import("./WebGL_Cube-Dj23Vaob.js"),[],import.meta.url),"â˜ï¸ Clouds (WebGL)":()=>n(()=>import("./WebGL_Clouds-DIhS2Hn9.js"),[],import.meta.url),"ðŸŒŒ Universe (WebGL)":()=>n(()=>import("./WebGL_Universe-D0J77Yrn.js"),[],import.meta.url),"âœ¨ Kuko (WebGL)":()=>n(()=>import("./WebGL_Kuko-sPFI5GkG.js"),[],import.meta.url),"ðŸ§µ Fiber (WebGL)":()=>n(()=>import("./WebGL_Fiber-CmIjI2dj.js"),__vite__mapDeps([8,1,2,3]),import.meta.url),"âš¡ Zippy (WebGL)":()=>n(()=>import("./WebGL_Zippy-DeGfICcn.js"),[],import.meta.url),"ðŸŽ¨ Art (WebGL)":()=>n(()=>import("./WebGL_Art-qDDGaYAW.js"),[],import.meta.url),"ðŸŒŸ StarNest (WebGL)":()=>n(()=>import("./WebGL_StarNest-DpDPEAgs.js"),[],import.meta.url),"ðŸžï¸ Landscape (WebGL)":()=>n(()=>import("./WebGL_Landscape-Bcb22APO.js"),[],import.meta.url),"ðŸ”¥ Fire (WebGL)":()=>n(()=>import("./WebGL_Fire-ZxZw3sMd.js"),[],import.meta.url),"ðŸ’Ž Fragment (WebGL)":()=>n(()=>import("./WebGL_Fragment-DHpBRSmf.js"),[],import.meta.url),"ðŸª Orbital (WebGL)":()=>n(()=>import("./WebGL_Orbital-Ct4uMVat.js"),[],import.meta.url),"ðŸŽ¨ Palettes (WebGL)":()=>n(()=>import("./WebGL_Palettes-CjFKYfT2.js"),[],import.meta.url),"ðŸ© Torus (WebGL)":()=>n(()=>import("./WebGL_Torus-BcgYzkSV.js"),[],import.meta.url),"ðŸ³ Aqua (WebGL)":()=>n(()=>import("./WebGL_Aqua-CP1_6NCZ.js"),[],import.meta.url),"ðŸ”º Fractal (WebGL)":()=>n(()=>import("./WebGL_FractalPyramid-B1VQRlL_.js"),[],import.meta.url),"ðŸ§Š 4D (WebGL)":()=>n(()=>import("./WebGL_4D-D3WK_BV7.js"),[],import.meta.url),"ðŸ”® Sphere (WebGL)":()=>n(()=>import("./WebGL_Sphere-9FH20SQs.js"),[],import.meta.url),"ðŸ’š Matrix (WebGL)":()=>n(()=>import("./WebGL_Matrix-CnuTdeJ8.js"),[],import.meta.url),"ðŸŒˆ Spectrum (WebGL)":()=>n(()=>import("./WebGL_Spectrum-DCw1_fOU.js"),[],import.meta.url),"ðŸ”¥ Flame (WebGL)":()=>n(()=>import("./WebGL_Flame-JYcLNWR8.js"),[],import.meta.url),"ðŸŒ€ Portal (WebGL)":()=>n(()=>import("./WebGL_Portal-BHgbLwNR.js"),[],import.meta.url),"âš›ï¸ Plasma (WebGL)":()=>n(()=>import("./WebGL_Plasma-B05-xi8I.js"),[],import.meta.url),"ðŸš— Drive (WebGL)":()=>n(()=>import("./WebGL_Drive-_iHZG6CX.js"),[],import.meta.url),"ðŸŒˆ Rainbow (WebGL)":()=>n(()=>import("./WebGL_Rainbow-rcItOx_d.js"),[],import.meta.url),"âœ¡ï¸ Octagram (WebGL)":()=>n(()=>import("./WebGL_Octagram-DudxPa6c.js"),[],import.meta.url),"ðŸ’“ Beat (WebGL)":()=>n(()=>import("./WebGL_Beat-tcf6yLu_.js"),[],import.meta.url),"ðŸ‘ï¸ Eye (WebGL)":()=>n(()=>import("./WebGL_Eye-CJEPQhbs.js"),[],import.meta.url),"ðŸŒŒ Lensing (WebGL)":()=>n(()=>import("./WebGL_Lensing-B8ie-vTY.js"),[],import.meta.url)},Oe=Object.keys(me),Ve=Oe[1],Ie=new Map;let J=null;async function yt(r){const o=r==null?void 0:r.mode;J!==null&&J!==o&&Me(J),J=o;let a=Ie.get(o);if(!a){const l=await(me[o]||me[Ve])();if(!l.default)throw new Error(`Invalid render function for mode: ${o}`);a=typeof l.default=="string"?St(l.default):l.default,Ie.set(o,a)}a(r)}function St(r){return o=>Ct(o,r)}function Nt(){Me(0)}const ee=new Map,zt=()=>{ee.clear()},kt=(r,o,a)=>(ee.has(o)||ee.set(o,a()),ee.get(o)),Ce=120,ye=120,Se=400,Ne=200;function Mt({onClose:r,isInPiP:o=!1,forceCenter:a=!1,stop:c=!1}){const l=ct(),h=dt(),g=a||l==="center",M=s.useRef(null),T=s.useRef(null),C=s.useRef(0),[P,i]=V("zen_visualizer_mode",Ve),[E,u]=V("zen_visualizer_position",{x:50,y:50}),[m,re]=V("zen_visualizer_size",{width:Se,height:Ne}),[b,G]=s.useState(!1);s.useEffect(()=>{zt()},[m.width,m.height]);const[D,A]=V("zen_visualizer_logo",null),oe=s.useRef(null),[pe,H]=s.useState(!1),j=s.useRef(null),F=s.useRef(null),[y,he]=s.useState(!1),[R,fe]=s.useState(!1),[_e,ge]=s.useState(""),[x,q]=V("zen_visualizer_config",ht()),[W,Ge]=V("zen_visualizer_performance_mode",!1),[k,Fe]=V("zen_visualizer_show_fps",!1),xe=s.useRef(W);s.useEffect(()=>{xe.current=W},[W]),s.useEffect(()=>{R||ge("")},[R]);const be=s.useRef(0),ie=s.useRef(0),we=s.useRef(performance.now()),ve=s.useRef(k);s.useEffect(()=>{ve.current=k},[k]),s.useEffect(()=>{if(D){const t=new Image;t.onload=()=>{oe.current=t},t.src=D}else oe.current=null},[D]),s.useEffect(()=>{ce(x)},[]),s.useEffect(()=>()=>{j.current&&!j.current.closed&&j.current.close()},[]);const We=s.useCallback(t=>{var p;const d=(p=t.target.files)==null?void 0:p[0];if(d){const L=new FileReader;L.onload=O=>{var I;const B=(I=O.target)==null?void 0:I.result;A(B)},L.readAsDataURL(d)}},[A]),ke=s.useCallback(()=>{A(null)},[A]);s.useCallback(t=>{t.stopPropagation(),i(t.target.value)},[i]);const Ue=s.useCallback(t=>{t.stopPropagation(),r==null||r(),Nt()},[r]),[Y,Ee]=s.useState(()=>K()),Be=s.useCallback(async t=>{if(t.stopPropagation(),Y)xt(),Ee(!1);else{const d=await mt();Ee(d)}},[Y]),U=s.useCallback((t,d)=>{const p={...x,[t]:d};q(p),ce({[t]:d})},[x,q]),Xe=s.useCallback(t=>{t.stopPropagation(),he(d=>!d),fe(!1)},[]),He=s.useCallback(t=>{t.stopPropagation();const d=pt();q(d),ce(d)},[q]),qe=s.useCallback(async t=>{if(t.stopPropagation(),!window.documentPictureInPicture){alert("Document Picture-in-Picture is not supported in your browser. Please use Chrome 116+ or Edge 116+.");return}if(j.current&&!j.current.closed){j.current.close(),j.current=null,F.current=null,H(!1);return}try{const d=await window.documentPictureInPicture.requestWindow({width:m.width,height:m.height});j.current=d,d.document.body.style.margin="0",d.document.body.style.padding="0",d.document.body.style.overflow="hidden",d.document.body.style.background="linear-gradient(135deg, rgba(15, 15, 30, 1), rgba(30, 20, 50, 1))";const p=d.document.createElement("canvas");p.width=m.width,p.height=m.height,p.style.width="100%",p.style.height="100%",d.document.body.appendChild(p),F.current=p,d.addEventListener("pagehide",()=>{j.current=null,F.current=null,H(!1)}),H(!0)}catch(d){console.error("PiP error:",d),alert("Failed to activate Picture-in-Picture mode. Error: "+d.message),H(!1)}},[m]),[$,Re]=s.useState(!1),[S,Le]=s.useState(null),X=s.useRef({x:0,y:0,posX:0,posY:0}),w=s.useRef({x:0,y:0,width:Se,height:Ne,posX:0,posY:0}),Ye=s.useCallback(t=>{t.target.classList.contains("resize-handle")||(t.preventDefault(),Re(!0),X.current={x:t.clientX,y:t.clientY,posX:E.x,posY:E.y})},[E]),ne=s.useCallback(t=>{if($){const d=t.clientX-X.current.x,p=t.clientY-X.current.y;u({x:X.current.posX+d,y:X.current.posY+p})}else if(S){const d=t.clientX-w.current.x,p=t.clientY-w.current.y;let L=w.current.width,O=w.current.height,B=w.current.posX,I=w.current.posY;if(S.includes("e")&&(L=Math.max(Ce,w.current.width+d)),S.includes("w")){const _=w.current.width-d;_>=Ce&&(L=_,B=w.current.posX+d)}if(S.includes("s")&&(O=Math.max(ye,w.current.height+p)),S.includes("n")){const _=w.current.height-p;_>=ye&&(O=_,I=w.current.posY+p)}re({width:L,height:O}),u({x:B,y:I})}},[$,S,m.width,m.height]),ae=s.useCallback(()=>{Re(!1),Le(null)},[]),N=s.useCallback((t,d)=>{t.preventDefault(),t.stopPropagation(),Le(d),w.current={x:t.clientX,y:t.clientY,width:m.width,height:m.height,posX:E.x,posY:E.y}},[m,E]);s.useEffect(()=>{if($||S)return window.addEventListener("mousemove",ne),window.addEventListener("mouseup",ae),()=>{window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",ae)}},[$,S,ne,ae]);const se=s.useRef(new Array(64).fill(0)),z=s.useRef(0);s.useEffect(()=>{const t=M.current;if(!t)return;const d=t.getContext("2d");if(!d)return;const p=async()=>{if(c)return;z.current+=.02;let L;if(K())L=ft();else{for(let v=0;v<se.current.length;v++){const Ke=.3+(Math.sin(z.current*2+v*.3)*.3+Math.sin(z.current*3.5+v*.5)*.2+Math.sin(z.current*1.2+v*.7)*.25)*.5;se.current[v]=Math.max(0,Math.min(1,Ke+Math.random()*.1))}L=se.current}const O=L.length,B=K()?_t():Math.sin(z.current*4)*.3+.3,I=K()?gt():{bass:Math.sin(z.current*1.25)*.3+.4,mid:Math.sin(z.current*1.3)*.25+.35,high:Math.sin(z.current*1.4)*.2+.3};let _=d,Z=t;if(F.current){const v=F.current.getContext("2d");v&&(_=v,Z=F.current)}if(_.clearRect(0,0,Z.width,Z.height),await yt({ctx:_,canvas:Z,data:L,barCount:O,performanceMode:xe.current,logoImage:oe.current,beatIntensity:B,bass:I.bass,mid:I.mid,high:I.high,mode:P}),ve.current){_.save(),_.font="bold 12px monospace",_.fillStyle="rgba(255, 255, 255, 0.8)",_.shadowColor="rgba(0, 0, 0, 0.8)",_.shadowBlur=4,_.fillText(`${be.current} FPS`,10,20),_.restore(),ie.current++;const v=performance.now(),ue=v-we.current;ue>=500&&(be.current=Math.round(ie.current*1e3/ue),ie.current=0,we.current=v)}C.current=requestAnimationFrame(p)};return p(),()=>{cancelAnimationFrame(C.current)}},[P,c]);const $e=()=>e.jsx("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.7)",border:"1px solid rgba(168, 85, 247, 0.3)",maxHeight:m.height-50,overflowY:"auto"},onMouseDown:t=>t.stopPropagation(),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:e.jsx("span",{children:"FFT Size"})}),e.jsx("select",{value:x.fftSize,onChange:t=>U("fftSize",parseInt(t.target.value)),className:"w-full px-2 py-1 text-xs bg-white/10 text-white/90 rounded-md border border-white/20 cursor-pointer focus:outline-none focus:border-purple-500",children:[32,64,128,256,512,1024,2048,4096,8192,16384,32768].map(t=>e.jsx("option",{value:t,className:"bg-gray-900",children:t},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[e.jsx("span",{children:"Smoothing"}),e.jsx("span",{className:"text-purple-400",children:x.smoothingTimeConstant.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0",max:"0.99",step:"0.01",value:x.smoothingTimeConstant,onChange:t=>U("smoothingTimeConstant",parseFloat(t.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[e.jsx("span",{children:"Min dB"}),e.jsx("span",{className:"text-purple-400",children:x.minDecibels})]}),e.jsx("input",{type:"range",min:"-100",max:"-30",step:"1",value:x.minDecibels,onChange:t=>U("minDecibels",parseInt(t.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[e.jsx("span",{children:"Max dB"}),e.jsx("span",{className:"text-purple-400",children:x.maxDecibels})]}),e.jsx("input",{type:"range",min:"-50",max:"0",step:"1",value:x.maxDecibels,onChange:t=>U("maxDecibels",parseInt(t.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[e.jsx("span",{children:"Freq Start"}),e.jsx("span",{className:"text-purple-400",children:x.freqStartIndex})]}),e.jsx("input",{type:"range",min:"0",max:"1024",step:"1",value:x.freqStartIndex,onChange:t=>U("freqStartIndex",parseInt(t.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[e.jsx("span",{children:"Freq Count"}),e.jsx("span",{className:"text-purple-400",children:x.freqLength})]}),e.jsx("input",{type:"range",min:"5",max:"1024",step:"1",value:x.freqLength,onChange:t=>U("freqLength",parseInt(t.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsx("label",{className:"flex justify-between text-xs text-white/70 mb-2",children:e.jsx("span",{children:"Center Logo (Trap Nation)"})}),D?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:D,alt:"Logo preview",className:"w-12 h-12 object-contain rounded bg-white/10"}),e.jsxs("button",{onClick:ke,className:"flex-1 px-3 py-1.5 text-xs font-medium text-red-400 bg-red-500/10 hover:bg-red-500/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",children:[e.jsx(nt,{size:14}),"Remove"]})]}):e.jsxs("label",{className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",children:[e.jsx(at,{size:14}),"Upload Image",e.jsx("input",{type:"file",accept:"image/*",onChange:We,className:"hidden"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("button",{onClick:()=>Ge(!W),className:`w-full px-3 py-2 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2 ${W?"text-green-400 bg-green-500/20 hover:bg-green-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Performance mode reduces visual effects for better framerate on low-end devices",children:[e.jsx(st,{size:14}),"Performance Mode ",W?"ON":"OFF"]}),e.jsxs("button",{onClick:()=>Fe(!k),className:`w-full mt-2 px-3 py-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2 ${k?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Show FPS counter on the visualizer",children:["Show FPS ",k?"ON":"OFF"]})]}),e.jsxs("button",{onClick:He,className:"w-full mt-2 px-3 py-1.5 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",title:"Reset to defaults",children:[e.jsx(lt,{size:14}),"Reset to Defaults"]})]})}),le=Oe.filter(t=>t.toLowerCase().includes(_e.toLowerCase())),Te=le.filter(t=>!t.includes("(WebGL)")),Pe=le.filter(t=>t.includes("(WebGL)")),De=t=>e.jsx("button",{onClick:()=>{i(t)},className:`px-2 py-2 text-xs font-medium rounded-md transition-all cursor-pointer truncate ${P===t?"text-purple-400 bg-purple-500/30 border border-purple-500/50":"text-white/80 bg-white/10 hover:bg-white/20 border border-transparent"}`,title:t,children:t.replace(" (WebGL)","")},t),Ze=()=>e.jsxs("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.9)",border:"1px solid rgba(168, 85, 247, 0.3)",maxHeight:m.height-50,overflowY:"auto"},onMouseDown:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(ut,{size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-white/50"}),e.jsx("input",{type:"text",placeholder:"Search modes...",value:_e,onChange:t=>ge(t.target.value),className:"w-full pl-7 pr-3 py-1.5 text-xs bg-white/10 text-white/90 rounded-md border border-white/20 focus:outline-none focus:border-purple-500 placeholder:text-white/40",autoFocus:!0})]}),Te.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-2",children:[e.jsx("div",{className:"h-px flex-1 bg-white/20"}),e.jsx("span",{className:"text-xs text-white/50 font-medium",children:"Simple"}),e.jsx("div",{className:"h-px flex-1 bg-white/20"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Te.map(De)})]}),Pe.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-2",children:[e.jsx("div",{className:"h-px flex-1 bg-white/20"}),e.jsx("span",{className:"text-xs text-white/50 font-medium",children:"WebGL"}),e.jsx("div",{className:"h-px flex-1 bg-white/20"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Pe.map(De)})]}),le.length===0&&e.jsx("div",{className:"text-center text-white/50 text-xs py-4",children:"No modes found"})]});return e.jsx("div",{ref:T,className:`select-none fixed ${g?"":"cursor-move"}`,style:g?{left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:m.width,height:m.height,zIndex:50}:{left:E.x,top:E.y,width:m.width,height:m.height,zIndex:40},onMouseDown:g?void 0:Ye,onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),children:e.jsxs("div",{className:`relative w-full h-full rounded-2xl overflow-hidden transition-all duration-300 ${g&&!b&&!y&&!R?"":"backdrop-blur-md"}`,style:{background:g&&!b&&!y&&!R?"transparent":"linear-gradient(135deg, rgba(15, 15, 30, 0.85), rgba(30, 20, 50, 0.85))",border:g&&!b&&!y&&!R?"1px solid transparent":"1px solid rgba(168, 85, 247, 0.3)",boxShadow:g&&!b&&!y&&!R?"none":"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 60px rgba(168, 85, 247, 0.1)"},children:[e.jsxs("div",{className:`absolute top-0 left-0 right-0 flex items-center justify-between px-3 py-2 z-10 transition-opacity duration-300 ${g&&!b&&!y&&!R?"opacity-0":""}`,style:{background:"linear-gradient(180deg, rgba(0,0,0,0.4), transparent)",opacity:b||y||R?1:0},children:[e.jsx("span",{className:"text-xs font-medium text-white/60 uppercase tracking-wider",children:"Visualizer"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:Be,className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${Y?"text-green-400 bg-green-500/20 hover:bg-green-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:Y?"Stop audio capture":"Capture tab audio",children:e.jsx(Qe,{size:14})}),!o&&e.jsx("button",{onClick:qe,className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${pe?"text-purple-400 bg-purple-500/20 hover:bg-purple-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:pe?"Close PiP":"Open in PiP",children:e.jsx(Je,{size:14})}),e.jsx("button",{onClick:Xe,className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${y?"text-amber-400 bg-amber-500/20 hover:bg-amber-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Audio analyzer settings",children:e.jsx(et,{size:14})}),e.jsxs("button",{onClick:()=>{fe(!R),he(!1)},onMouseDown:t=>t.stopPropagation(),className:`px-2 py-1 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center gap-1.5 ${R?"text-purple-400 bg-purple-500/20 hover:bg-purple-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Select visualizer mode",children:[e.jsx(tt,{size:12}),e.jsx("span",{className:"max-w-[80px] truncate",children:P})]}),h&&!a&&e.jsx("button",{onClick:t=>{if(t.stopPropagation(),l==="center"){const d=(window.innerWidth-m.width)/2,p=(window.innerHeight-m.height)/2;u({x:d,y:p})}h(l==="center"?"window":"center")},className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${l==="center"?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:l==="center"?"Switch to window mode":"Switch to center mode",children:l==="center"?e.jsx(rt,{size:14}):e.jsx(ot,{size:14})}),e.jsx("button",{onClick:Ue,className:"p-1.5 text-xs font-medium text-white/80 bg-white/10 hover:bg-red-500/30 hover:text-red-400 rounded-md transition-colors cursor-pointer",title:"Close visualizer",children:e.jsx(it,{size:14})})]})]}),y&&$e(),R&&Ze(),e.jsx("canvas",{ref:M,width:m.width,height:m.height,className:"w-full h-full"}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"resize-handle absolute top-0 left-0 w-4 h-4 cursor-nw-resize",onMouseDown:t=>N(t,"nw")}),e.jsx("div",{className:"resize-handle absolute top-0 right-0 w-4 h-4 cursor-ne-resize",onMouseDown:t=>N(t,"ne")}),e.jsx("div",{className:"resize-handle absolute bottom-0 left-0 w-4 h-4 cursor-sw-resize",onMouseDown:t=>N(t,"sw")}),e.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:t=>N(t,"se")}),e.jsx("div",{className:"resize-handle absolute top-0 left-4 right-4 h-2 cursor-n-resize",onMouseDown:t=>N(t,"n")}),e.jsx("div",{className:"resize-handle absolute bottom-0 left-4 right-4 h-2 cursor-s-resize",onMouseDown:t=>N(t,"s")}),e.jsx("div",{className:"resize-handle absolute left-0 top-4 bottom-4 w-2 cursor-w-resize",onMouseDown:t=>N(t,"w")}),e.jsx("div",{className:"resize-handle absolute right-0 top-4 bottom-4 w-2 cursor-e-resize",onMouseDown:t=>N(t,"e")})]})]})})}const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"}));export{Ut as V,Wt as a,Tt as b,je as c,Pt as d,wt as e,ze as f,kt as g,Ft as h,vt as i};
