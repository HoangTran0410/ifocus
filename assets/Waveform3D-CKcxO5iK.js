const s={history:[],maxHistory:25};function O({ctx:t,canvas:i,data:p,performanceMode:f=!1}){const I=f?15:25;s.maxHistory=I,s.history.push([...p]),s.history.length>I&&s.history.shift();const X=p.reduce((o,n)=>o+n,0)/p.length,d=i.height*.35,S=i.height*.95,D=i.width/2,b=.7,$=s.history.length,c=f?24:40;for(let o=0;o<$-1;o++){const n=s.history[o],h=s.history[o+1];if(!n||!h)continue;const e=o/$,r=(o+1)/$,l=Math.pow(e,b),y=Math.pow(r,b),w=d+(S-d)*l,g=d+(S-d)*y,a=i.width*(.15+l*.85),T=i.width*(.15+y*.85),k=D-a/2,m=D-T/2;for(let u=0;u<c-1;u++){const R=u/(c-1),W=(u+1)/(c-1),H=Math.floor(R*(n.length-1)),P=Math.floor(W*(n.length-1)),Y=n[H]||0,z=n[P]||0,Z=h[P]||0,B=h[H]||0,M=i.height*.25*(.3+l*.7),C=i.height*.25*(.3+y*.7),v=k+R*a,A=w-Y*M,E=k+W*a,F=w-z*M,G=m+W*T,J=g-Z*C,K=m+R*T,L=g-B*C,x=(Y+z+Z+B)/4,Q=260+x*60,N=70+x*30,j=35+e*25+x*20,q=.4+e*.5;t.beginPath(),t.moveTo(v,A),t.lineTo(E,F),t.lineTo(G,J),t.lineTo(K,L),t.closePath(),t.fillStyle=`hsla(${Q}, ${N}%, ${j}%, ${q})`,t.fill(),(!f||o%2===0)&&(t.strokeStyle=`hsla(${Q+30}, 90%, ${j+20}%, ${q*.8})`,t.lineWidth=.5+e,t.stroke())}}if(!f&&s.history.length>0){const o=s.history[s.history.length-1],n=S,h=i.width*.97,e=D-h/2;t.beginPath(),t.moveTo(e,n);for(let r=0;r<c;r++){const l=r/(c-1),y=Math.floor(l*(o.length-1)),w=o[y]||0,g=e+l*h,a=n-w*i.height*.25;r===0?t.moveTo(g,a):t.lineTo(g,a)}t.shadowColor="rgba(236, 72, 153, 0.8)",t.shadowBlur=15+X*20,t.strokeStyle=`rgba(255, 255, 255, ${.6+X*.4})`,t.lineWidth=2,t.stroke(),t.shadowBlur=0}}export{O as default};
