const u={rotation:0,pulsePhase:0};function Y({ctx:o,canvas:T,data:P,performanceMode:$=!1,beatIntensity:n=0}){const z=T.width,W=T.height,i=z/2,h=W/2,t=P.reduce((s,r)=>s+r,0)/P.length,y=Math.min(i,h)*.95;u.rotation+=.005+t*.01+n*.02,u.pulsePhase+=.03+n*.05;const k=$?6:8,m=$?4:6,A=Math.PI*2/k;for(let s=m-1;s>=0;s--){const r=s/m,f=y*(.2+r*.8),p=Math.floor(r*P.length),e=P[p]||t,C=Math.sin(u.pulsePhase+s*.5)*.1,a=f*(1+C+e*.15+n*.1),d=(260+s*30+u.rotation*20)%360,M=70+e*30,S=40+e*25,R=.5+e*.4,F=u.rotation*(s%2===0?1:-.7);for(let w=0;w<k;w++){const X=w*A+F;o.save(),o.translate(i,h),o.rotate(X);const b=s%3;if(b===0){const l=a*(.3+e*.15);o.beginPath();for(let c=0;c<3;c++){const v=c/3*Math.PI*2-Math.PI/2,G=a*.5+Math.cos(v)*l,I=Math.sin(v)*l;c===0?o.moveTo(G,I):o.lineTo(G,I)}o.closePath()}else if(b===1){const l=a*(.25+e*.1);o.beginPath(),o.moveTo(a*.5,-l),o.lineTo(a*.5+l*.6,0),o.lineTo(a*.5,l),o.lineTo(a*.5-l*.6,0),o.closePath()}else{const l=a*(.2+e*.1);o.beginPath(),o.arc(a*.5,0,l,0,Math.PI,!1),o.closePath()}if($)o.fillStyle=`hsla(${d}, ${M}%, ${S}%, ${R*.8})`;else{const l=o.createRadialGradient(a*.5,0,0,a*.5,0,a*.3);l.addColorStop(0,`hsla(${d+20}, ${M}%, ${S+20}%, ${R})`),l.addColorStop(1,`hsla(${d}, ${M}%, ${S}%, ${R*.6})`),o.fillStyle=l}o.fill(),!$&&e>.3&&(o.shadowColor=`hsla(${d}, 100%, 60%, 0.8)`,o.shadowBlur=8+e*12),o.strokeStyle=`hsla(${d+30}, ${M+20}%, ${S+15}%, ${R})`,o.lineWidth=1+e*1.5,o.stroke(),o.shadowBlur=0,o.restore()}}const B=20+t*25+n*20,g=o.createRadialGradient(i,h,0,i,h,B);if(g.addColorStop(0,`rgba(255, 255, 255, ${.9+t*.1})`),g.addColorStop(.3,`hsla(280, 80%, 70%, ${.7+t*.3})`),g.addColorStop(.7,`hsla(260, 70%, 50%, ${.4+t*.3})`),g.addColorStop(1,"transparent"),o.beginPath(),o.arc(i,h,B,0,Math.PI*2),o.fillStyle=g,o.fill(),!$){const s=y*(.9+t*.1);o.beginPath(),o.arc(i,h,s,0,Math.PI*2),o.strokeStyle=`hsla(280, 80%, 60%, ${.2+t*.3})`,o.lineWidth=2+n*3,o.shadowColor="hsla(280, 100%, 70%, 0.8)",o.shadowBlur=15+t*10,o.stroke(),o.shadowBlur=0}if(!$&&n>.4){const s=Math.floor(n*15);for(let r=0;r<s;r++){const f=Math.random()*Math.PI*2,p=y*(.3+Math.random()*.6),e=i+Math.cos(f)*p,C=h+Math.sin(f)*p,a=2+Math.random()*4,d=260+Math.random()*60;o.beginPath(),o.arc(e,C,a,0,Math.PI*2),o.fillStyle=`hsla(${d}, 80%, 70%, ${.4+n*.4})`,o.fill()}}}export{Y as default};
