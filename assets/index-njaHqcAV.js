const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./comp-background-2KjCJFop.js","./vendor-7n6RyNsU.js","./comp-audiocontroller-C9_egn6F.js","./comp-timer-B7Iemjq4.js","./comp-tasks-KbsVr7_x.js","./comp-pipcontent-5EVzBlQI.js","./comp-notes-CjZNVZJq.js","./comp-sceneselector-D66UxE7M.js","./comp-effectsselector-CMIbLwob.js","./comp-visualizer-dpYbgoWi.js"])))=>i.map(i=>d[i]);
import{l,r as m,j as e,a as L,u as O,E as R,G as V,I as $,J as k,K as _,M as N,N as P,d as y,X as D,O as F,Q as M}from"./vendor-7n6RyNsU.js";import{_ as c,L as a,b as W,c as q,f as B,d as G,e as K}from"./comp-background-2KjCJFop.js";import"./comp-audiocontroller-C9_egn6F.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))x(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&x(i)}).observe(document,{childList:!0,subtree:!0});function f(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function x(s){if(s.ep)return;s.ep=!0;const t=f(s);fetch(s.href,t)}})();const J=l(()=>c(()=>import("./comp-background-2KjCJFop.js").then(n=>n.M),__vite__mapDeps([0,1,2]),import.meta.url),{fallback:a}),Q=l(()=>c(()=>import("./comp-timer-B7Iemjq4.js"),__vite__mapDeps([3,1,2,0]),import.meta.url),{fallback:a}),X=l(()=>c(()=>import("./comp-audiocontroller-C9_egn6F.js").then(n=>n.A),__vite__mapDeps([2,1]),import.meta.url),{fallback:a}),H=l(()=>c(()=>import("./comp-tasks-KbsVr7_x.js"),__vite__mapDeps([4,1,0,2]),import.meta.url),{fallback:a}),U=l(()=>c(()=>import("./comp-pipcontent-5EVzBlQI.js"),__vite__mapDeps([5,0,1,2]),import.meta.url),{fallback:a}),Y=l(()=>c(()=>import("./comp-notes-CjZNVZJq.js"),__vite__mapDeps([6,1,0,2]),import.meta.url),{fallback:a}),Z=l(()=>c(()=>import("./comp-sceneselector-D66UxE7M.js"),__vite__mapDeps([7,1,2,0]),import.meta.url),{fallback:a}),ee=l(()=>c(()=>import("./comp-effectsselector-CMIbLwob.js"),__vite__mapDeps([8,1,2,0]),import.meta.url),{fallback:a}),te=l(()=>c(()=>import("./comp-visualizer-dpYbgoWi.js").then(n=>n.V),__vite__mapDeps([9,1,2,0]),import.meta.url),{fallback:a});function se(){const n=W(),d=q(),f=B(),x=G(),s=K(),[t,i]=m.useState("none"),[u,S]=m.useState(new Set),[z,v]=m.useState(!1),[b,w]=m.useState(!1),r=m.useRef(null);m.useEffect(()=>{t!=="none"&&!u.has(t)&&S(o=>new Set([...o,t]))},[t,u]);const C=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),v(!1)):(document.documentElement.requestFullscreen(),v(!0))},A=async()=>{try{if(console.log("Toggle PiP clicked"),!window.documentPictureInPicture){alert("Document Picture-in-Picture is not supported in your browser. Please use Chrome 116+ or Edge 116+.");return}if(r.current&&!r.current.closed){r.current.close(),r.current=null,w(!1);return}const o=await window.documentPictureInPicture.requestWindow({width:800,height:450});r.current=o,Array.from(document.styleSheets).forEach(j=>{try{const g=Array.from(j.cssRules).map(T=>T.cssText).join(`
`),h=o.document.createElement("style");h.textContent=g,o.document.head.appendChild(h)}catch{const h=o.document.createElement("link");h.rel="stylesheet",h.href=j.href||"",h.href&&o.document.head.appendChild(h)}}),o.document.body.style.margin="0",o.document.body.style.padding="0",o.document.body.style.overflow="hidden",o.addEventListener("pagehide",()=>{r.current=null,w(!1)}),w(!0)}catch(o){console.error("PiP error:",o),alert("Failed to activate Picture-in-Picture mode. Error: "+o.message),w(!1)}},I=()=>{window.open("https://github.com/hoangtran0410/ifocus","_blank")};return m.useEffect(()=>()=>{r.current&&!r.current.closed&&r.current.close()},[]),e.jsxs("div",{className:"pip-capture-root relative w-screen h-screen overflow-hidden font-sans",children:[e.jsx(J,{}),n&&e.jsx(te,{onClose:()=>d(!1),stop:b}),e.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 pointer-events-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-white/10 rounded-lg p-2 transition-colors",onClick:I,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/20 backdrop-blur-md flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-white",children:"F"})}),e.jsx("span",{className:"text-white font-semibold tracking-wide text-lg shadow-black drop-shadow-md",children:"iFocus"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:A,className:`p-3 transition-colors rounded-full hover:bg-white/10 hidden sm:block ${b?"text-white":"text-white/70 hover:text-white"}`,title:"Picture-in-Picture",children:e.jsx(O,{size:20})}),e.jsx("button",{onClick:C,className:"p-3 text-white/70 hover:text-white transition-colors rounded-full hover:bg-white/10",title:"Fullscreen",children:z?e.jsx(R,{size:20}):e.jsx(V,{size:20})}),e.jsx("button",{onClick:()=>i(t==="none"?"scenes":"none"),className:`p-3 transition-colors rounded-full hover:bg-white/10 sm:hidden ${t!=="none"?"text-white bg-white/10":"text-white/70 hover:text-white"}`,title:"Menu",children:e.jsx($,{size:20})})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pointer-events-auto",children:x&&!(n&&f==="center")?e.jsx("div",{className:"transition-all duration-500",children:e.jsx(Q,{onClose:()=>s(!1)})}):null}),e.jsx("div",{className:"flex justify-center pb-6 pointer-events-auto hidden sm:flex",children:e.jsx("div",{className:"transition-all duration-500",children:e.jsxs("div",{className:"flex gap-0 sm:gap-2 p-2 bg-black/40 opacity-50 hover:opacity-100 hover:backdrop-blur transition-all rounded-2xl border border-white/10 shadow-2xl",children:[e.jsx(p,{icon:e.jsx(k,{size:20}),label:"Scenes",isActive:t==="scenes",onClick:()=>i(t==="scenes"?"none":"scenes")}),e.jsx(p,{icon:e.jsx(_,{size:20}),label:"Effects",isActive:t==="effects",onClick:()=>i(t==="effects"?"none":"effects")}),e.jsx(p,{icon:e.jsx(N,{size:20}),label:"Sounds",isActive:t==="audio",onClick:()=>i(t==="audio"?"none":"audio")}),e.jsx("div",{className:"w-px h-10 bg-white/10 mx-1 self-center"}),e.jsx(p,{icon:e.jsx(P,{size:20}),label:"Tasks",isActive:t==="tasks",onClick:()=>i(t==="tasks"?"none":"tasks")}),e.jsx(p,{icon:e.jsx(y,{size:20}),label:"Notes",isActive:t==="notes",onClick:()=>i(t==="notes"?"none":"notes")})]})})})]}),e.jsx("div",{className:`absolute top-0 right-0 h-full w-full sm:w-96 glass-panel border-l border-white/10 transition-transform duration-300 ease-out ${t!=="none"?"translate-x-0":"translate-x-full"}`,style:{zIndex:t!=="none"?50:-1},children:e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>i("scenes"),className:`p-2 rounded-lg transition-all ${t==="scenes"?"bg-white/20 text-white":"text-white/50 hover:text-white hover:bg-white/10"}`,title:"Scenes",children:e.jsx(k,{size:18})}),e.jsx("button",{onClick:()=>i("effects"),className:`p-2 rounded-lg transition-all ${t==="effects"?"bg-white/20 text-white":"text-white/50 hover:text-white hover:bg-white/10"}`,title:"Effects",children:e.jsx(_,{size:18})}),e.jsx("button",{onClick:()=>i("audio"),className:`p-2 rounded-lg transition-all ${t==="audio"?"bg-white/20 text-white":"text-white/50 hover:text-white hover:bg-white/10"}`,title:"Sounds",children:e.jsx(N,{size:18})}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-1 self-center"}),e.jsx("button",{onClick:()=>i("tasks"),className:`p-2 rounded-lg transition-all ${t==="tasks"?"bg-white/20 text-white":"text-white/50 hover:text-white hover:bg-white/10"}`,title:"Tasks",children:e.jsx(P,{size:18})}),e.jsx("button",{onClick:()=>i("notes"),className:`p-2 rounded-lg transition-all ${t==="notes"?"bg-white/20 text-white":"text-white/50 hover:text-white hover:bg-white/10"}`,title:"Notes",children:e.jsx(y,{size:18})})]}),e.jsx("button",{onClick:()=>i("none"),className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:e.jsx(D,{size:20})})]}),e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("span",{className:"text-white/50 text-xs font-bold uppercase tracking-widest",children:t})}),e.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[e.jsx("div",{className:`absolute inset-0 ${t==="audio"?"block":"hidden"}`,children:u.has("audio")&&e.jsx(X,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="tasks"?"block":"hidden"}`,children:u.has("tasks")&&e.jsx(H,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="notes"?"block":"hidden"}`,children:u.has("notes")&&e.jsx(Y,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="scenes"?"block":"hidden"}`,children:u.has("scenes")&&e.jsx(Z,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="effects"?"block":"hidden"}`,children:u.has("effects")&&e.jsx(ee,{})})]})]})}),b&&r.current&&L.createPortal(e.jsx(U,{}),r.current.document.body)]})}const p=({icon:n,label:d,isActive:f,onClick:x})=>e.jsxs("button",{onClick:x,className:`group relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 ${f?"bg-white text-black shadow-lg":"text-white/70 hover:bg-white/10 hover:text-white hover:translate-y-[-2px]"}`,children:[n,e.jsx("span",{className:"absolute -bottom-8 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-medium text-white bg-black/60 px-2 py-1 rounded backdrop-blur-sm whitespace-nowrap pointer-events-none",children:d})]}),E=document.getElementById("root");if(!E)throw new Error("Could not find root element to mount to");const ie=F.createRoot(E);ie.render(e.jsx(M.StrictMode,{children:e.jsx(se,{})}));
