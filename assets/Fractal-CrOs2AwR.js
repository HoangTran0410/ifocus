const u={rotation:0,pulsePhase:0};function q({ctx:o,canvas:T,data:P,performanceMode:d=!1,beatIntensity:$=0,bass:z=0,mid:W=0}){const A=T.width,F=T.height,n=A/2,i=F/2,e=P.reduce((s,h)=>s+h,0)/P.length,c=Math.min(n,i)*.95;u.rotation+=.005+e*.01+z*.025,u.pulsePhase+=.03+W*.06;const b=d?6:8,k=d?4:6,X=Math.PI*2/b;for(let s=k-1;s>=0;s--){const h=s/k,f=c*(.2+h*.8),p=Math.floor(h*P.length),t=P[p]||e,C=Math.sin(u.pulsePhase+s*.5)*.1,a=f*(1+C+t*.15+$*.1),r=(260+s*30+u.rotation*20)%360,M=70+t*30,S=40+t*25,y=.5+t*.4,Y=u.rotation*(s%2===0?1:-.7);for(let w=0;w<b;w++){const j=w*X+Y;o.save(),o.translate(n,i),o.rotate(j);const I=s%3;if(I===0){const l=a*(.3+t*.15);o.beginPath();for(let R=0;R<3;R++){const B=R/3*Math.PI*2-Math.PI/2,v=a*.5+Math.cos(B)*l,G=Math.sin(B)*l;R===0?o.moveTo(v,G):o.lineTo(v,G)}o.closePath()}else if(I===1){const l=a*(.25+t*.1);o.beginPath(),o.moveTo(a*.5,-l),o.lineTo(a*.5+l*.6,0),o.lineTo(a*.5,l),o.lineTo(a*.5-l*.6,0),o.closePath()}else{const l=a*(.2+t*.1);o.beginPath(),o.arc(a*.5,0,l,0,Math.PI,!1),o.closePath()}if(d)o.fillStyle=`hsla(${r}, ${M}%, ${S}%, ${y*.8})`;else{const l=o.createRadialGradient(a*.5,0,0,a*.5,0,a*.3);l.addColorStop(0,`hsla(${r+20}, ${M}%, ${S+20}%, ${y})`),l.addColorStop(1,`hsla(${r}, ${M}%, ${S}%, ${y*.6})`),o.fillStyle=l}o.fill(),!d&&t>.3&&(o.shadowColor=`hsla(${r}, 100%, 60%, 0.8)`,o.shadowBlur=8+t*12),o.strokeStyle=`hsla(${r+30}, ${M+20}%, ${S+15}%, ${y})`,o.lineWidth=1+t*1.5,o.stroke(),o.shadowBlur=0,o.restore()}}const m=20+e*25+$*20,g=o.createRadialGradient(n,i,0,n,i,m);if(g.addColorStop(0,`rgba(255, 255, 255, ${.9+e*.1})`),g.addColorStop(.3,`hsla(280, 80%, 70%, ${.7+e*.3})`),g.addColorStop(.7,`hsla(260, 70%, 50%, ${.4+e*.3})`),g.addColorStop(1,"transparent"),o.beginPath(),o.arc(n,i,m,0,Math.PI*2),o.fillStyle=g,o.fill(),!d){const s=c*(.9+e*.1);o.beginPath(),o.arc(n,i,s,0,Math.PI*2),o.strokeStyle=`hsla(280, 80%, 60%, ${.2+e*.3})`,o.lineWidth=2+$*3,o.shadowColor="hsla(280, 100%, 70%, 0.8)",o.shadowBlur=15+e*10,o.stroke(),o.shadowBlur=0}if(!d&&$>.4){const s=Math.floor($*15);for(let h=0;h<s;h++){const f=Math.random()*Math.PI*2,p=c*(.3+Math.random()*.6),t=n+Math.cos(f)*p,C=i+Math.sin(f)*p,a=2+Math.random()*4,r=260+Math.random()*60;o.beginPath(),o.arc(t,C,a,0,Math.PI*2),o.fillStyle=`hsla(${r}, 80%, 70%, ${.4+$*.4})`,o.fill()}}}export{q as default};
