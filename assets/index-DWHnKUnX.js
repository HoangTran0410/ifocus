const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./component-background-BQF_Xtp_.js","./react-vendor-BfW9shI7.js","./vendor-2Ktpr_8P.js","./loadable-vendor-EfPwe1ln.js","./component-timer-mePvX7L7.js","./component-audiocontroller-Cq-fsp9z.js","./component-tasks-DbJOcSyi.js","./component-pipcontent-BdyezbAL.js","./component-notes-vof96mHQ.js","./component-sceneselector-CRGT5wEF.js","./component-effectsselector-D-emwJ4b.js","./component-visualizer-DDXNXnko.js"])))=>i.map(i=>d[i]);
import{r as c,j as e,a as K,n as U,u as X,v as H,I as J,w as Q,M as Y,x as Z,c as ee,X as te,y as se,s as oe}from"./react-vendor-BfW9shI7.js";import{_ as d,L as u}from"./component-background-BQF_Xtp_.js";import{l as m}from"./loadable-vendor-EfPwe1ln.js";import{u as a,D as ne}from"./component-audiocontroller-Cq-fsp9z.js";import"./vendor-2Ktpr_8P.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))w(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&w(l)}).observe(document,{childList:!0,subtree:!0});function h(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function w(s){if(s.ep)return;s.ep=!0;const o=h(s);fetch(s.href,o)}})();const ie=m(()=>d(()=>import("./component-background-BQF_Xtp_.js").then(r=>r.B),__vite__mapDeps([0,1,2,3]),import.meta.url),{fallback:u}),re=m(()=>d(()=>import("./component-timer-mePvX7L7.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),{fallback:u}),le=m(()=>d(()=>import("./component-audiocontroller-Cq-fsp9z.js").then(r=>r.A),__vite__mapDeps([5,1,2]),import.meta.url),{fallback:u}),ce=m(()=>d(()=>import("./component-tasks-DbJOcSyi.js"),__vite__mapDeps([6,1,2]),import.meta.url),{fallback:u}),ae=m(()=>d(()=>import("./component-pipcontent-BdyezbAL.js"),__vite__mapDeps([7,0,1,2,3]),import.meta.url),{fallback:u}),de=m(()=>d(()=>import("./component-notes-vof96mHQ.js"),__vite__mapDeps([8,1,2]),import.meta.url),{fallback:u}),ue=m(()=>d(()=>import("./component-sceneselector-CRGT5wEF.js"),__vite__mapDeps([9,1,2,5]),import.meta.url),{fallback:u}),me=m(()=>d(()=>import("./component-effectsselector-D-emwJ4b.js"),__vite__mapDeps([10,1,2,5]),import.meta.url),{fallback:u}),C=m(()=>d(()=>import("./component-visualizer-DDXNXnko.js"),__vite__mapDeps([11,1,2,5]),import.meta.url),{fallback:u});function fe(){const[r,f]=a("zen_scene",ne[0]),[h,w]=a("zen_effect","none"),[s,o]=a("zen_show_visualizer",!1),[l,g]=a("zen_visualizer_mode_display","window"),[v,y]=a("zen_show_timer",!0),[L,T]=a("zen_tasks",[]),[D,R]=a("zen_notes",[]),[k,O]=a("zen_bg_muted",!0),[P,E]=a("zen_timerMode","pomodoro"),[t,p]=c.useState("none"),[x,V]=c.useState(new Set);c.useEffect(()=>{t!=="none"&&!x.has(t)&&V(n=>new Set([...n,t]))},[t,x]);const[F,N]=c.useState(!1),[z,_]=c.useState(!1),[$,S]=c.useState(!1),i=c.useRef(null);c.useEffect(()=>{!v&&t==="none"&&p("effects")},[v]);const B=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),N(!1)):(document.documentElement.requestFullscreen(),N(!0))},q=async()=>{try{if(console.log("Toggle PiP clicked"),!window.documentPictureInPicture){alert("Document Picture-in-Picture is not supported in your browser. Please use Chrome 116+ or Edge 116+.");return}if(i.current&&!i.current.closed){i.current.close(),i.current=null,_(!1);return}const n=await window.documentPictureInPicture.requestWindow({width:800,height:450});i.current=n,Array.from(document.styleSheets).forEach(M=>{try{const A=Array.from(M.cssRules).map(G=>G.cssText).join(`
`),b=n.document.createElement("style");b.textContent=A,n.document.head.appendChild(b)}catch{const b=n.document.createElement("link");b.rel="stylesheet",b.href=M.href||"",b.href&&n.document.head.appendChild(b)}}),n.document.body.style.margin="0",n.document.body.style.padding="0",n.document.body.style.overflow="hidden",n.addEventListener("pagehide",()=>{i.current=null,_(!1)}),_(!0)}catch(n){console.error("PiP error:",n),alert("Failed to activate Picture-in-Picture mode. Error: "+n.message),_(!1)}},W=()=>{window.open("https://github.com/hoangtran0410/ifocus","_blank")};return c.useEffect(()=>()=>{i.current&&!i.current.closed&&i.current.close()},[]),e.jsxs("div",{className:"pip-capture-root relative w-screen h-screen overflow-hidden font-sans",children:[e.jsx(ie,{scene:r,effect:h,isMuted:k,showVideoModal:$,setShowVideoModal:S}),s&&l==="window"&&e.jsx(C,{onClose:()=>o(!1),displayMode:l,setDisplayMode:g}),e.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 pointer-events-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-white/10 rounded-lg p-2 transition-colors",onClick:W,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/20 backdrop-blur-md flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-white",children:"F"})}),e.jsx("span",{className:"text-white font-semibold tracking-wide text-lg shadow-black drop-shadow-md",children:"iFocus"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:q,className:`p-3 transition-colors rounded-full hover:bg-white/10 ${z?"text-white":"text-white/70 hover:text-white"}`,title:"Picture-in-Picture",children:e.jsx(U,{size:20})}),e.jsx("button",{onClick:B,className:"p-3 text-white/70 hover:text-white transition-colors rounded-full hover:bg-white/10",title:"Fullscreen",children:F?e.jsx(X,{size:20}):e.jsx(H,{size:20})})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pointer-events-auto",children:s&&l==="center"?e.jsx("div",{className:"transition-all duration-500 w-full max-w-2xl",children:e.jsx(C,{onClose:()=>o(!1),displayMode:l,setDisplayMode:g,isCenterMode:!0})}):v?e.jsx("div",{className:"transition-all duration-500",children:e.jsx(re,{mode:P,setMode:E,onClose:()=>y(!1)})}):null}),e.jsx("div",{className:"flex justify-center pb-6 pointer-events-auto",children:e.jsx("div",{className:"transition-all duration-500",children:e.jsxs("div",{className:"flex gap-0 sm:gap-2 p-2 bg-black/40 opacity-50 hover:opacity-100 hover:backdrop-blur transition-all rounded-2xl border border-white/10 shadow-2xl",children:[e.jsx(j,{icon:e.jsx(J,{size:20}),label:"Scenes",isActive:t==="scenes",onClick:()=>p(t==="scenes"?"none":"scenes")}),e.jsx(j,{icon:e.jsx(Q,{size:20}),label:"Effects",isActive:t==="effects",onClick:()=>p(t==="effects"?"none":"effects")}),e.jsx(j,{icon:e.jsx(Y,{size:20}),label:"Sounds",isActive:t==="audio",onClick:()=>p(t==="audio"?"none":"audio")}),e.jsx("div",{className:"w-px h-10 bg-white/10 mx-1 self-center"}),e.jsx(j,{icon:e.jsx(Z,{size:20}),label:"Tasks",isActive:t==="tasks",onClick:()=>p(t==="tasks"?"none":"tasks")}),e.jsx(j,{icon:e.jsx(ee,{size:20}),label:"Notes",isActive:t==="notes",onClick:()=>p(t==="notes"?"none":"notes")})]})})})]}),e.jsx("div",{className:`absolute top-0 right-0 h-full w-full sm:w-96 glass-panel border-l border-white/10 transition-transform duration-300 ease-out z-20 ${t!=="none"?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-white/50 text-xs font-bold uppercase tracking-widest",children:t}),e.jsx("button",{onClick:()=>p("none"),className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:e.jsx(te,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[e.jsx("div",{className:`absolute inset-0 ${t==="audio"?"block":"hidden"}`,children:x.has("audio")&&e.jsx(le,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="tasks"?"block":"hidden"}`,children:x.has("tasks")&&e.jsx(ce,{tasks:L,setTasks:T})}),e.jsx("div",{className:`absolute inset-0 ${t==="notes"?"block":"hidden"}`,children:x.has("notes")&&e.jsx(de,{notes:D,setNotes:R})}),e.jsx("div",{className:`absolute inset-0 ${t==="scenes"?"block":"hidden"}`,children:x.has("scenes")&&e.jsx(ue,{currentScene:r,setScene:f,isBgMuted:k,setIsBgMuted:O,setShowVideoModal:S})}),e.jsx("div",{className:`absolute inset-0 ${t==="effects"?"block":"hidden"}`,children:x.has("effects")&&e.jsx(me,{currentEffect:h,setEffect:w,showVisualizer:s,setShowVisualizer:o,showTimer:v,setShowTimer:y,visualizerMode:l,setVisualizerMode:g})})]})]})}),z&&i.current&&K.createPortal(e.jsx(ae,{currentScene:r,currentEffect:h,isBgMuted:k,timerMode:P,setTimerMode:E,showTimer:v,setShowTimer:y,showVisualizer:s,setShowVisualizer:o}),i.current.document.body)]})}const j=({icon:r,label:f,isActive:h,onClick:w})=>e.jsxs("button",{onClick:w,className:`group relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 ${h?"bg-white text-black shadow-lg":"text-white/70 hover:bg-white/10 hover:text-white hover:translate-y-[-2px]"}`,children:[r,e.jsx("span",{className:"absolute -bottom-8 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-medium text-white bg-black/60 px-2 py-1 rounded backdrop-blur-sm whitespace-nowrap pointer-events-none",children:f})]}),I=document.getElementById("root");if(!I)throw new Error("Could not find root element to mount to");const he=se.createRoot(I);he.render(e.jsx(oe.StrictMode,{children:e.jsx(fe,{})}));
