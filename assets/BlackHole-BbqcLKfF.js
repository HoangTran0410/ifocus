const d={rotation:0,particles:[]};function I({ctx:a,canvas:P,data:S,performanceMode:h=!1}){const o=P.width/2,r=P.height/2,g=Math.min(o,r)*.85,n=S.reduce((t,e)=>t+e,0)/S.length,l=g*.15+n*g*.05;d.rotation+=.02+n*.03;const M=h?100:200;if(d.particles.length<M&&Math.random()<.3+n*.5&&d.particles.push({angle:Math.random()*Math.PI*2,radius:g*(.6+Math.random()*.4),speed:.01+Math.random()*.02,size:1+Math.random()*3,hue:20+Math.random()*40,opacity:.5+Math.random()*.5}),!h)for(let t=5;t>=1;t--){const e=l*(1.5+t*.4),i=Math.sin(d.rotation*2+t)*.1;a.beginPath(),a.ellipse(o,r,e*(1+i),e*(1-i*.5),d.rotation*.3,0,Math.PI*2),a.strokeStyle=`rgba(147, 112, 219, ${.05+n*.05})`,a.lineWidth=1,a.stroke()}const C=h?3:5;for(let t=C;t>=1;t--){const e=l*(2+t*.8),i=g*.15,u=.35,s=a.createRadialGradient(o,r,l,o,r,e+i),f=t/C*n;s.addColorStop(0,`rgba(255, 100, 50, ${.3+f*.4})`),s.addColorStop(.3,`rgba(255, 150, 50, ${.2+f*.3})`),s.addColorStop(.6,`rgba(255, 200, 100, ${.15+f*.2})`),s.addColorStop(1,"rgba(255, 200, 100, 0)"),a.save(),a.translate(o,r),a.rotate(d.rotation+t*.1),a.scale(1,u),a.translate(-o,-r),a.beginPath(),a.arc(o,r,e+i,0,Math.PI*2),a.fillStyle=s,a.fill(),a.restore()}if(d.particles=d.particles.filter(t=>{if(t.angle+=t.speed*(1+(1-t.radius/g)*2),t.radius-=.5+n*1.5,t.opacity-=.002,t.radius<=l||t.opacity<=0)return!1;const e=.35,i=o+Math.cos(t.angle+d.rotation)*t.radius,u=r+Math.sin(t.angle+d.rotation)*t.radius*e,s=1-(t.radius-l)/(g-l);return a.beginPath(),a.arc(i,u,t.size*(1+s),0,Math.PI*2),a.fillStyle=`hsla(${t.hue-s*20}, 100%, ${50+s*30}%, ${t.opacity})`,a.fill(),!h&&s>.5&&(a.beginPath(),a.arc(i,u,t.size*3,0,Math.PI*2),a.fillStyle=`hsla(${t.hue}, 100%, 70%, ${t.opacity*.3})`,a.fill()),!0}),!h)for(let t=0;t<2;t++){const e=g*.5*(.3+n*.7),i=a.createLinearGradient(o,r,o,r+e*(t===0?-1:1));i.addColorStop(0,`rgba(200, 150, 255, ${.4+n*.4})`),i.addColorStop(.5,`rgba(150, 100, 255, ${.2+n*.2})`),i.addColorStop(1,"rgba(100, 50, 200, 0)"),a.beginPath(),a.moveTo(o-l*.3,r),a.quadraticCurveTo(o,r+e*.5*(t===0?-1:1),o,r+e*(t===0?-1:1)),a.quadraticCurveTo(o,r+e*.5*(t===0?-1:1),o+l*.3,r),a.fillStyle=i,a.fill()}const $=h?3:6;for(let t=0;t<$;t++){const e=Math.floor(t/$*S.length),i=S[e]||0,u=l*(1.1+t*.15+i*.2);a.beginPath(),a.arc(o,r,u,0,Math.PI*2),a.strokeStyle=`rgba(255, ${150+t*15}, ${50+t*20}, ${.3+i*.5})`,a.lineWidth=1+i*2,a.stroke()}const b=a.createRadialGradient(o,r,0,o,r,l);b.addColorStop(0,"rgba(0, 0, 0, 1)"),b.addColorStop(.7,"rgba(0, 0, 0, 1)"),b.addColorStop(.9,"rgba(20, 10, 30, 0.95)"),b.addColorStop(1,"rgba(50, 30, 70, 0.8)"),a.beginPath(),a.arc(o,r,l,0,Math.PI*2),a.fillStyle=b,a.fill(),h||(a.shadowColor=`rgba(255, 200, 100, ${.5+n*.5})`,a.shadowBlur=15+n*20),a.beginPath(),a.arc(o,r,l*1.05,0,Math.PI*2),a.strokeStyle=`rgba(255, 200, 150, ${.6+n*.4})`,a.lineWidth=2+n*2,a.stroke(),a.shadowBlur=0;const y=a.createRadialGradient(o,r,l*.8,o,r,l*1.2);y.addColorStop(0,"rgba(255, 150, 50, 0)"),y.addColorStop(.5,`rgba(255, 100, 50, ${.2+n*.3})`),y.addColorStop(1,"rgba(255, 50, 0, 0)"),a.beginPath(),a.arc(o,r,l*1.2,0,Math.PI*2),a.fillStyle=y,a.fill()}export{I as default};
