const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./component-background-C44tmEon.js","./react-vendor-DAgaEvQw.js","./vendor-Doe1xN7X.js","./loadable-vendor-DAwHS16R.js","./component-timer-BjZDEvVN.js","./component-audiocontroller-CdJmNcde.js","./component-tasks-BQd1elC9.js","./component-pipcontent-CNsZU62Y.js","./component-notes-sKhig4rP.js","./component-sceneselector-Bhuo3B3F.js","./component-effectsselector-BVxnx0Rp.js","./component-visualizer-DJlDjeIn.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,a as $,n as B,s as q,t as W,I as G,u as K,M as U,v as X,b as H,X as J,w as Q,p as Y}from"./react-vendor-DAgaEvQw.js";import{_ as l,L as c}from"./component-background-C44tmEon.js";import{l as a}from"./loadable-vendor-DAwHS16R.js";import{u as p,D as Z}from"./component-audiocontroller-CdJmNcde.js";import"./vendor-Doe1xN7X.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))x(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const v of o.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&x(v)}).observe(document,{childList:!0,subtree:!0});function m(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function x(s){if(s.ep)return;s.ep=!0;const o=m(s);fetch(s.href,o)}})();const ee=a(()=>l(()=>import("./component-background-C44tmEon.js").then(i=>i.B),__vite__mapDeps([0,1,2,3]),import.meta.url),{fallback:c}),te=a(()=>l(()=>import("./component-timer-BjZDEvVN.js"),__vite__mapDeps([4,1,2,5]),import.meta.url),{fallback:c}),se=a(()=>l(()=>import("./component-audiocontroller-CdJmNcde.js").then(i=>i.A),__vite__mapDeps([5,1,2]),import.meta.url),{fallback:c}),oe=a(()=>l(()=>import("./component-tasks-BQd1elC9.js"),__vite__mapDeps([6,1,2]),import.meta.url),{fallback:c}),ne=a(()=>l(()=>import("./component-pipcontent-CNsZU62Y.js"),__vite__mapDeps([7,0,1,2,3]),import.meta.url),{fallback:c}),re=a(()=>l(()=>import("./component-notes-sKhig4rP.js"),__vite__mapDeps([8,1,2]),import.meta.url),{fallback:c}),ie=a(()=>l(()=>import("./component-sceneselector-Bhuo3B3F.js"),__vite__mapDeps([9,1,2,5]),import.meta.url),{fallback:c}),le=a(()=>l(()=>import("./component-effectsselector-BVxnx0Rp.js"),__vite__mapDeps([10,1,2,5]),import.meta.url),{fallback:c}),ce=a(()=>l(()=>import("./component-visualizer-DJlDjeIn.js"),__vite__mapDeps([11,1,2,5]),import.meta.url),{fallback:c});function ae(){const[i,u]=p("zen_scene",Z[0]),[m,x]=p("zen_effect","none"),[s,o]=p("zen_show_visualizer",!1),[v,A]=p("zen_tasks",[]),[C,I]=p("zen_notes",[]),[_,L]=p("zen_bg_muted",!0),[g,k]=p("zen_timerMode","pomodoro"),[t,b]=d.useState("none"),[f,M]=d.useState(new Set);d.useEffect(()=>{t!=="none"&&!f.has(t)&&M(n=>new Set([...n,t]))},[t,f]);const[R,P]=d.useState(!1),[y,j]=d.useState(!1),[T,E]=d.useState(!1),r=d.useRef(null),O=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),P(!1)):(document.documentElement.requestFullscreen(),P(!0))},D=async()=>{try{if(console.log("Toggle PiP clicked"),!window.documentPictureInPicture){alert("Document Picture-in-Picture is not supported in your browser. Please use Chrome 116+ or Edge 116+.");return}if(r.current&&!r.current.closed){r.current.close(),r.current=null,j(!1);return}const n=await window.documentPictureInPicture.requestWindow({width:800,height:450});r.current=n,Array.from(document.styleSheets).forEach(N=>{try{const S=Array.from(N.cssRules).map(F=>F.cssText).join(`
`),h=n.document.createElement("style");h.textContent=S,n.document.head.appendChild(h)}catch{const h=n.document.createElement("link");h.rel="stylesheet",h.href=N.href||"",h.href&&n.document.head.appendChild(h)}}),n.document.body.style.margin="0",n.document.body.style.padding="0",n.document.body.style.overflow="hidden",n.addEventListener("pagehide",()=>{r.current=null,j(!1)}),j(!0)}catch(n){console.error("PiP error:",n),alert("Failed to activate Picture-in-Picture mode. Error: "+n.message),j(!1)}},V=()=>{window.open("https://github.com/hoangtran0410/ifocus","_blank")};return d.useEffect(()=>()=>{r.current&&!r.current.closed&&r.current.close()},[]),e.jsxs("div",{className:"pip-capture-root relative w-screen h-screen overflow-hidden font-sans",children:[e.jsx(ee,{scene:i,effect:m,isMuted:_,showVideoModal:T,setShowVideoModal:E}),s&&e.jsx(ce,{onClose:()=>o(!1)}),e.jsxs("div",{className:"relative z-10 w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 pointer-events-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-white/10 rounded-lg p-2 transition-colors",onClick:V,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/20 backdrop-blur-md flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-white",children:"F"})}),e.jsx("span",{className:"text-white font-semibold tracking-wide text-lg shadow-black drop-shadow-md",children:"iFocus"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:D,className:`p-3 transition-colors rounded-full hover:bg-white/10 ${y?"text-white":"text-white/70 hover:text-white"}`,title:"Picture-in-Picture",children:e.jsx(B,{size:20})}),e.jsx("button",{onClick:O,className:"p-3 text-white/70 hover:text-white transition-colors rounded-full hover:bg-white/10",title:"Fullscreen",children:R?e.jsx(q,{size:20}):e.jsx(W,{size:20})})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pointer-events-auto",children:e.jsx("div",{className:"transition-all duration-500",children:e.jsx(te,{mode:g,setMode:k})})}),e.jsx("div",{className:"flex justify-center pb-6 pointer-events-auto",children:e.jsx("div",{className:"transition-all duration-500",children:e.jsxs("div",{className:"flex gap-0 sm:gap-2 p-2 bg-black/40 opacity-50 hover:opacity-100 hover:backdrop-blur transition-all rounded-2xl border border-white/10 shadow-2xl",children:[e.jsx(w,{icon:e.jsx(G,{size:20}),label:"Scenes",isActive:t==="scenes",onClick:()=>b(t==="scenes"?"none":"scenes")}),e.jsx(w,{icon:e.jsx(K,{size:20}),label:"Effects",isActive:t==="effects",onClick:()=>b(t==="effects"?"none":"effects")}),e.jsx(w,{icon:e.jsx(U,{size:20}),label:"Sounds",isActive:t==="audio",onClick:()=>b(t==="audio"?"none":"audio")}),e.jsx("div",{className:"w-px h-10 bg-white/10 mx-1 self-center"}),e.jsx(w,{icon:e.jsx(X,{size:20}),label:"Tasks",isActive:t==="tasks",onClick:()=>b(t==="tasks"?"none":"tasks")}),e.jsx(w,{icon:e.jsx(H,{size:20}),label:"Notes",isActive:t==="notes",onClick:()=>b(t==="notes"?"none":"notes")})]})})})]}),e.jsx("div",{className:`absolute top-0 right-0 h-full w-full sm:w-96 glass-panel border-l border-white/10 transition-transform duration-300 ease-out z-20 ${t!=="none"?"translate-x-0":"translate-x-full"}`,children:e.jsxs("div",{className:"h-full flex flex-col p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-white/50 text-xs font-bold uppercase tracking-widest",children:t}),e.jsx("button",{onClick:()=>b("none"),className:"p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:e.jsx(J,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[e.jsx("div",{className:`absolute inset-0 ${t==="audio"?"block":"hidden"}`,children:f.has("audio")&&e.jsx(se,{})}),e.jsx("div",{className:`absolute inset-0 ${t==="tasks"?"block":"hidden"}`,children:f.has("tasks")&&e.jsx(oe,{tasks:v,setTasks:A})}),e.jsx("div",{className:`absolute inset-0 ${t==="notes"?"block":"hidden"}`,children:f.has("notes")&&e.jsx(re,{notes:C,setNotes:I})}),e.jsx("div",{className:`absolute inset-0 ${t==="scenes"?"block":"hidden"}`,children:f.has("scenes")&&e.jsx(ie,{currentScene:i,setScene:u,isBgMuted:_,setIsBgMuted:L,setShowVideoModal:E})}),e.jsx("div",{className:`absolute inset-0 ${t==="effects"?"block":"hidden"}`,children:f.has("effects")&&e.jsx(le,{currentEffect:m,setEffect:x,showVisualizer:s,setShowVisualizer:o})})]})]})}),y&&r.current&&$.createPortal(e.jsx(ne,{currentScene:i,currentEffect:m,isBgMuted:_,timerMode:g,setTimerMode:k}),r.current.document.body)]})}const w=({icon:i,label:u,isActive:m,onClick:x})=>e.jsxs("button",{onClick:x,className:`group relative flex flex-col items-center justify-center w-14 h-14 rounded-xl transition-all duration-300 ${m?"bg-white text-black shadow-lg":"text-white/70 hover:bg-white/10 hover:text-white hover:translate-y-[-2px]"}`,children:[i,e.jsx("span",{className:"absolute -bottom-8 opacity-0 group-hover:opacity-100 transition-opacity text-xs font-medium text-white bg-black/60 px-2 py-1 rounded backdrop-blur-sm whitespace-nowrap pointer-events-none",children:u})]}),z=document.getElementById("root");if(!z)throw new Error("Could not find root element to mount to");const de=Q.createRoot(z);de.render(e.jsx(Y.StrictMode,{children:e.jsx(ae,{})}));
