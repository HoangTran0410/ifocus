const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../vendor-BT9BOIqP.js","../index-C5euZUif.js","./effectslayer-ZfE5mt4t.js"])))=>i.map(i=>d[i]);
import{a as J,b as K,c as Q,d as X,e as ee,f as te,g as re,h as ae,i as se,j as ne,k as oe,l as le,_ as P,L as A}from"../index-C5euZUif.js";import{r as s,j as t,a as M,l as z}from"../vendor-BT9BOIqP.js";const ie=z(()=>P(()=>import("../vendor-BT9BOIqP.js").then(u=>u.Y),__vite__mapDeps([0,1]),import.meta.url),{fallback:A}),ce=z(()=>P(()=>import("./effectslayer-ZfE5mt4t.js"),__vite__mapDeps([2,0,1]),import.meta.url),{fallback:A});function fe({disableYouTube:u=!1,isInPiP:w=!1}){const a=J(),_=K(),h=Q(),Z=X(),j=ee(),T=te(),B=re(),v=ae(),n=s.useRef(null),[k,E]=s.useState(!1),[N,O]=s.useState(!1),[S,y]=s.useState(!1),g=s.useRef(!1),l=B||S,d=s.useRef(null),f=s.useRef(null),x=s.useRef(0),c={...se,...T},C=()=>{const e=[],r={...ne,...Z};return r.blur>0&&e.push(`blur(${r.blur}px)`),r.brightness!==100&&e.push(`brightness(${r.brightness}%)`),r.contrast!==100&&e.push(`contrast(${r.contrast}%)`),r.grayscale>0&&e.push(`grayscale(${r.grayscale}%)`),r.hueRotate!==0&&e.push(`hue-rotate(${r.hueRotate}deg)`),r.invert>0&&e.push(`invert(${r.invert}%)`),r.opacity!==100&&e.push(`opacity(${r.opacity}%)`),r.saturate!==100&&e.push(`saturate(${r.saturate}%)`),r.sepia>0&&e.push(`sepia(${r.sepia}%)`),e.length>0?e.join(" "):"none"},Y=()=>j/100;s.useEffect(()=>{const e=Y();if(!c.enabled){d.current&&(d.current.style.transform=`scale(${e})`),f.current&&(f.current.style.transform=`scale(${e})`);return}let r=e;const i=()=>{const m=o=>{o&&(o.style.transform=`scale(${r})`)};if(oe()){const o=le().bass,p=e+o*c.intensity;r+=(p-r)*c.speed}else r+=(e-r)*c.speed;m(d.current),m(f.current),x.current=requestAnimationFrame(i)};return x.current=requestAnimationFrame(i),()=>{cancelAnimationFrame(x.current),d.current&&(d.current.style.transform=`scale(${e})`),f.current&&(f.current.style.transform=`scale(${e})`)}},[c.enabled,c.speed,c.intensity,j]);const F=()=>{v(!1),y(!1)},I=e=>{const r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,i=e.match(r);return i&&i[2].length===11?i[2]:null};s.useEffect(()=>{if(E(!1),v(!1),y(!1),g.current=!1,a.type==="image"){const e=new Image;e.onload=()=>E(!0),e.src=a.url}return()=>{n.current=null}},[a.url,a.type,v]),s.useEffect(()=>{if(n.current&&a.type==="youtube")try{h?n.current.mute():n.current.unMute()}catch(e){console.warn("Error changing mute state:",e)}},[h,a.type]);const R=s.useCallback(()=>{var e,r,i,m;if(!(!n.current||g.current))try{const o=(r=(e=n.current).getPlayerState)==null?void 0:r.call(e);if(o===void 0)return;o!==1&&o!==3&&((m=(i=n.current).playVideo)==null||m.call(i),setTimeout(()=>{var p,L;if(n.current)try{const b=(L=(p=n.current).getPlayerState)==null?void 0:L.call(p);b!==void 0&&b!==1&&b!==3&&!g.current&&y(!0)}catch(b){console.warn("Error checking player state:",b)}},500))}catch(o){console.warn("Error checking YouTube player state:",o)}},[]);s.useEffect(()=>{if(a.type!=="youtube"||u)return;const e=()=>{R()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[a.type,u,R]);const D=e=>{try{n.current=e.target,h?e.target.mute():e.target.unMute(),e.target.playVideo()}catch(r){console.warn("Error in onPlayerReady:",r)}},q=e=>{try{e.data===1&&(g.current=!0,y(!1))}catch(r){console.warn("Error in onPlayerStateChange:",r)}},U=e=>{console.error("YouTube player error:",e.data),e.data===150||e.data===101?console.warn("Video may be unavailable or embedding restricted"):O(!0)},G={playerVars:{autoplay:1,mute:1,controls:1,loop:1,playlist:a.type==="youtube"&&I(a.url)||"",playsinline:1,showinfo:0,rel:0,iv_load_policy:3,disablekb:1,modestbranding:1}},$=()=>t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
                @keyframes modalFadeIn {
                  from { opacity: 0; }
                  to { opacity: 1; }
                }
              `}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm",style:{zIndex:99998,animation:"modalFadeIn 0.3s ease-out forwards"},onClick:F}),t.jsx("div",{ref:l?void 0:f,className:l?"contents":"fixed inset-0 w-full h-full overflow-hidden",style:l?void 0:{zIndex:-1,filter:C(),transformOrigin:"center center",transition:"filter 700ms ease-in-out"},children:t.jsxs("div",{className:l?"fixed w-[80vw] max-w-4xl aspect-video left-1/2 top-1/2 rounded-xl overflow-hidden shadow-2xl border border-white/10 bg-black":"w-full h-full",style:l?{zIndex:99999,transform:"translate(-50%, -50%)",animation:"modalFadeIn 0.3s ease-out forwards"}:{pointerEvents:"none"},children:[l&&t.jsxs(t.Fragment,{children:[a.type==="youtube"&&S&&!g.current&&t.jsx("div",{className:"absolute top-3 left-3 z-10 px-3 py-1.5 rounded-lg bg-black/60 text-white/90 text-sm",children:"Click the video to start playback"}),t.jsx("button",{onClick:F,className:"absolute top-3 right-3 z-10 w-8 h-8 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white/80 hover:text-white transition-all cursor-pointer",children:"âœ•"})]}),a.type==="video"?t.jsx("video",{autoPlay:!0,loop:!0,muted:h,controls:l,playsInline:!0,className:"w-full h-full object-cover",children:t.jsx("source",{src:a.url,type:"video/mp4"})},a.url):t.jsx(ie,{videoId:I(a.url)||"",opts:G,onReady:D,onStateChange:q,onError:U,className:"w-full h-full",iframeClassName:`w-full h-full ${l?"":"pointer-events-none"}`,style:{width:"100%",height:"100%"}},a.url)]})})]}),V=()=>t.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:1},children:t.jsx(ce,{type:_})}),W=t.jsxs("div",{ref:d,className:"absolute inset-0 w-full h-full -z-10 overflow-hidden bg-black",style:{filter:C(),transformOrigin:"center center",transition:"filter 700ms ease-in-out, opacity 700ms ease-in-out"},children:[a.type==="color"&&t.jsx("div",{className:"w-full h-full",style:{backgroundColor:a.url}}),a.type==="gradient"&&t.jsx("div",{className:"w-full h-full",style:{background:a.url}}),a.type==="image"&&t.jsxs(t.Fragment,{children:[a.thumbnail&&!k&&t.jsx("img",{src:a.thumbnail,alt:"background thumbnail",className:"w-full h-full object-cover blur-sm scale-105"}),t.jsx("img",{src:a.url,alt:"background",loading:"eager",className:`w-full h-full object-cover transition-opacity duration-700 ${k?"opacity-100":"opacity-0"}`,style:{position:a.thumbnail?"absolute":"relative"}}),t.jsx("div",{className:"absolute inset-0 bg-black/20"})]}),(a.type==="video"||a.type==="youtube"&&!u&&!N)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 bg-black/20"}),w?$():M.createPortal($(),document.body)]}),a.type==="youtube"&&(u||N)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full h-full",style:{backgroundColor:"#1a1a1a"}}),t.jsx("div",{className:"absolute inset-0 bg-black/20"})]}),_==="sun-rays"&&t.jsxs("div",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-hidden z-10",children:[t.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[80vw] h-[80vw] bg-[radial-gradient(circle,rgba(255,220,150,0.4)_0%,rgba(0,0,0,0)_70%)] blur-[80px]"}),t.jsx("div",{className:"absolute -top-[50%] -right-[50%] w-[200%] h-[200%] opacity-40 mix-blend-overlay origin-center animate-[spin_120s_linear_infinite]",children:t.jsx("div",{className:"w-full h-full bg-[conic-gradient(from_0deg_at_50%_50%,rgba(0,0,0,0)_0deg,rgba(255,255,255,0.1)_15deg,rgba(0,0,0,0)_30deg,rgba(255,200,100,0.1)_45deg,rgba(0,0,0,0)_60deg,rgba(255,255,255,0.1)_90deg,rgba(0,0,0,0)_130deg)]"})}),t.jsx("div",{className:"absolute -top-[50%] -right-[50%] w-[200%] h-[200%] opacity-30 mix-blend-soft-light origin-center animate-[spin_180s_linear_infinite_reverse]",children:t.jsx("div",{className:"w-full h-full bg-[conic-gradient(from_180deg_at_50%_50%,rgba(0,0,0,0)_0deg,rgba(255,255,200,0.1)_10deg,rgba(0,0,0,0)_20deg,rgba(255,255,255,0.05)_40deg,rgba(0,0,0,0)_80deg)]"})}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-transparent to-orange-200/20 mix-blend-screen"})]})]}),H=w?V():M.createPortal(V(),document.body);return t.jsxs(t.Fragment,{children:[W,H]})}export{fe as default};
