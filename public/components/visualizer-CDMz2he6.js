import{r as n,j as t,u as ot,v as K,w as ue,F as de,x as he,y as Te,z as at,B as ct,D as lt,X as ut,E as dt,G as ht,t as xt,i as pt,R as mt,T as gt,U as ft,S as wt}from"../vendor-C6GpDRhk.js";import{p as bt,q as vt,R as jt,w as S,S as xe,i as pe,U as yt,V as zt,W as Ct,X as Nt,Y as Mt,Z as St,$ as Pt,a0 as Rt,a1 as Dt,j as kt,a2 as Et}from"../index-CHfoDb82.js";import{c as At,a as Ft,M as Tt,D as Yt,r as It}from"../visualizers/index-DDLvGyGL.js";import"../visualizers/renderer-4zxM2zHw.js";import"../visualizers/utils-DsFqD6CR.js";const U=120,H=120,me=400,ge=200;function Wt({onClose:W,isInPiP:Ye=!1,forceCenter:fe=!1,stop:we=!1}){const P=bt(),be=vt(),q=jt(),v=fe||P==="center",ve=n.useRef(null),Ie=n.useRef(null),je=n.useRef(0),[$,Le]=S("zen_visualizer_mode",Yt),[h,T]=S("zen_visualizer_position",{x:50,y:50}),[r,Q]=S("zen_visualizer_size",{width:me,height:ge}),[R,ye]=n.useState(!1);n.useEffect(()=>{At()},[r.width,r.height]);const[Y,V]=S("zen_visualizer_logo",null),ee=n.useRef(null),[ze,G]=n.useState(!1),j=n.useRef(null),D=n.useRef(null),[u,N]=n.useState("none"),[Ce,Xe]=n.useState(new Set),[Ne,Me]=n.useState(""),[x,B]=S("zen_visualizer_config",Rt()),[k,_e]=S("zen_visualizer_performance_mode",!1),[E,Ue]=S("zen_visualizer_show_fps",!1),[te,He]=n.useState(!1),Se=n.useRef(k);n.useEffect(()=>{Se.current=k},[k]),n.useEffect(()=>{u!=="mode"&&Me(""),u!=="none"&&Xe(e=>new Set(e).add(u))},[u]);const Pe=n.useRef(0),se=n.useRef(0),Re=n.useRef(performance.now()),De=n.useRef(E);n.useEffect(()=>{De.current=E},[E]),n.useEffect(()=>{if(Y){const e=new Image;e.onload=()=>{ee.current=e},e.src=Y}else ee.current=null},[Y]),n.useEffect(()=>{xe(x)},[]),n.useEffect(()=>()=>{Ft()},[]),n.useEffect(()=>()=>{j.current&&!j.current.closed&&j.current.close()},[]);const We=n.useCallback(e=>{var i;const s=(i=e.target.files)==null?void 0:i[0];if(s){const a=new FileReader;a.onload=c=>{var g;const m=(g=c.target)==null?void 0:g.result;V(m)},a.readAsDataURL(s)}},[V]),qe=n.useCallback(()=>{V(null)},[V]),$e=n.useCallback(e=>{e.stopPropagation(),W==null||W()},[W]),[y,I]=n.useState(()=>pe()),[d,L]=n.useState(()=>yt()),ne=n.useRef(null),Ve=n.useCallback(async()=>{const e=await zt();I(e),L(e?"tab":"none"),e&&N("none")},[]),Ge=n.useCallback(async()=>{const e=await Ct();I(e),L(e?"mic":"none"),e&&N("none")},[]),Be=n.useCallback(async e=>{var i;const s=(i=e.target.files)==null?void 0:i[0];if(s){const a=await Nt(s);I(a),L(a?"file":"none"),a&&N("none")}ne.current&&(ne.current.value="")},[]),Oe=n.useCallback(()=>{d==="mixer"?Mt():Et(),I(!1),L("none")},[d]),Ze=n.useCallback(async()=>{const e=await St();I(e),L(e?"mixer":"none"),e&&N("none")},[]),Je=n.useCallback(e=>{e.stopPropagation(),N(s=>s==="audio"?"none":"audio")},[]),A=n.useCallback((e,s)=>{const i={...x,[e]:s};B(i),xe({[e]:s})},[x,B]),Ke=n.useCallback(e=>{e.stopPropagation(),N(s=>s==="settings"?"none":"settings")},[]),Qe=n.useCallback(e=>{e.stopPropagation();const s=Pt();B(s),xe(s)},[B]),et=n.useCallback(async e=>{if(e.stopPropagation(),!window.documentPictureInPicture){alert("Document Picture-in-Picture is not supported in your browser. Please use Chrome 116+ or Edge 116+.");return}if(j.current&&!j.current.closed){j.current.close(),j.current=null,D.current=null,G(!1);return}try{const s=await window.documentPictureInPicture.requestWindow({width:r.width,height:r.height});j.current=s,s.document.body.style.margin="0",s.document.body.style.padding="0",s.document.body.style.overflow="hidden",s.document.body.style.background="linear-gradient(135deg, rgba(15, 15, 30, 1), rgba(30, 20, 50, 1))";const i=s.document.createElement("canvas");i.width=r.width,i.height=r.height,i.style.width="100%",i.style.height="100%",s.document.body.appendChild(i),D.current=i,s.addEventListener("pagehide",()=>{j.current=null,D.current=null,G(!1)}),G(!0)}catch(s){console.error("PiP error:",s),alert("Failed to activate Picture-in-Picture mode. Error: "+s.message),G(!1)}},[r]),[F,X]=n.useState(!1),[p,O]=n.useState(null),[Z,ke]=n.useState(!1),J=n.useRef({distance:0,width:me,height:ge,centerX:0,centerY:0}),w=n.useRef({x:0,y:0,posX:0,posY:0}),o=n.useRef({x:0,y:0,width:me,height:ge,posX:0,posY:0}),tt=n.useCallback(e=>{e.target.classList.contains("resize-handle")||(e.preventDefault(),X(!0),w.current={x:e.clientX,y:e.clientY,posX:h.x,posY:h.y})},[h]),st=n.useCallback(e=>{if(!e.target.classList.contains("resize-handle")&&u==="none"){if(e.touches.length===1){const s=e.touches[0];X(!0),w.current={x:s.clientX,y:s.clientY,posX:h.x,posY:h.y}}else if(e.touches.length===2){e.preventDefault();const s=e.touches[0],i=e.touches[1],a=Math.hypot(i.clientX-s.clientX,i.clientY-s.clientY),c=(s.clientX+i.clientX)/2,m=(s.clientY+i.clientY)/2;ke(!0),X(!1),J.current={distance:a,width:r.width,height:r.height,centerX:c,centerY:m}}}},[h,r,u]),ie=n.useCallback(e=>{if(F){const s=e.clientX-w.current.x,i=e.clientY-w.current.y;T({x:w.current.posX+s,y:w.current.posY+i})}else if(p){const s=e.clientX-o.current.x,i=e.clientY-o.current.y;let a=o.current.width,c=o.current.height,m=o.current.posX,g=o.current.posY;if(p.includes("e")&&(a=Math.max(U,o.current.width+s)),p.includes("w")){const l=o.current.width-s;l>=U&&(a=l,m=o.current.posX+s)}if(p.includes("s")&&(c=Math.max(H,o.current.height+i)),p.includes("n")){const l=o.current.height-i;l>=H&&(c=l,g=o.current.posY+i)}Q({width:a,height:c}),T({x:m,y:g})}},[F,p,r.width,r.height]),re=n.useCallback(e=>{if(F&&e.touches.length===1){const s=e.touches[0],i=s.clientX-w.current.x,a=s.clientY-w.current.y;T({x:w.current.posX+i,y:w.current.posY+a})}else if(Z&&e.touches.length===2){e.preventDefault();const s=e.touches[0],i=e.touches[1],c=Math.hypot(i.clientX-s.clientX,i.clientY-s.clientY)/J.current.distance,m=Math.max(U,Math.round(J.current.width*c)),g=Math.max(H,Math.round(J.current.height*c));Q({width:m,height:g})}else if(p&&e.touches.length===1){const s=e.touches[0],i=s.clientX-o.current.x,a=s.clientY-o.current.y;let c=o.current.width,m=o.current.height,g=o.current.posX,l=o.current.posY;if(p.includes("e")&&(c=Math.max(U,o.current.width+i)),p.includes("w")){const b=o.current.width-i;b>=U&&(c=b,g=o.current.posX+i)}if(p.includes("s")&&(m=Math.max(H,o.current.height+a)),p.includes("n")){const b=o.current.height-a;b>=H&&(m=b,l=o.current.posY+a)}Q({width:c,height:m}),T({x:g,y:l})}},[F,Z,p]),oe=n.useCallback(()=>{X(!1),O(null)},[]),_=n.useCallback(()=>{X(!1),O(null),ke(!1)},[]),z=n.useCallback((e,s)=>{e.preventDefault(),e.stopPropagation(),O(s),o.current={x:e.clientX,y:e.clientY,width:r.width,height:r.height,posX:h.x,posY:h.y}},[r,h]),C=n.useCallback((e,s)=>{if(e.preventDefault(),e.stopPropagation(),e.touches.length===1){const i=e.touches[0];O(s),o.current={x:i.clientX,y:i.clientY,width:r.width,height:r.height,posX:h.x,posY:h.y}}},[r,h]);n.useEffect(()=>{if(F||p||Z)return window.addEventListener("mousemove",ie),window.addEventListener("mouseup",oe),window.addEventListener("touchmove",re,{passive:!1}),window.addEventListener("touchend",_),window.addEventListener("touchcancel",_),()=>{window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",oe),window.removeEventListener("touchmove",re),window.removeEventListener("touchend",_),window.removeEventListener("touchcancel",_)}},[F,p,Z,ie,oe,re,_]);const ae=n.useRef(new Array(64).fill(0)),M=n.useRef(0);n.useEffect(()=>{const e=ve.current;if(!e)return;const s=e.getContext("2d");if(!s)return;let i=!0;const a=async()=>{if(we||!i)return;M.current+=.02;let c;if(pe())c=Dt();else{for(let f=0;f<ae.current.length;f++){const rt=.3+(Math.sin(M.current*2+f*.3)*.3+Math.sin(M.current*3.5+f*.5)*.2+Math.sin(M.current*1.2+f*.7)*.25)*.5;ae.current[f]=Math.max(0,Math.min(1,rt+Math.random()*.1))}c=ae.current}const m=c.length,g=pe()?kt():{bass:Math.sin(M.current*1.25)*.3+.4,mid:Math.sin(M.current*1.3)*.25+.35,high:Math.sin(M.current*1.4)*.2+.3};let l=s,b=e;if(D.current){const f=D.current.getContext("2d");f&&(l=f,b=D.current)}if(l.clearRect(0,0,b.width,b.height),await It({ctx:l,canvas:b,data:c,barCount:m,performanceMode:Se.current,logoImage:ee.current,bass:g.bass,mid:g.mid,high:g.high,mode:$}),!!i){if(De.current){l.save(),l.font="bold 12px monospace",l.fillStyle="rgba(255, 255, 255, 0.8)",l.shadowColor="rgba(0, 0, 0, 0.8)",l.shadowBlur=4,l.fillText(`${Pe.current} FPS`,10,20),l.restore(),se.current++;const f=performance.now(),le=f-Re.current;le>=500&&(Pe.current=Math.round(se.current*1e3/le),se.current=0,Re.current=f)}je.current=requestAnimationFrame(a)}};return a(),()=>{i=!1,cancelAnimationFrame(je.current)}},[$,we]);const nt=()=>t.jsx("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.7)",border:"1px solid rgba(168, 85, 247, 0.3)",maxHeight:r.height-50,overflowY:"auto"},onMouseDown:e=>e.stopPropagation(),children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>_e(!k),className:`w-full px-3 py-2 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2 ${k?"text-green-400 bg-green-500/20 hover:bg-green-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Performance mode reduces visual effects for better framerate on low-end devices",children:[t.jsx(ht,{size:14}),"Performance Mode ",k?"ON":"OFF"]}),t.jsxs("button",{onClick:()=>Ue(!E),className:`w-full px-3 py-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2 ${E?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Show FPS counter on the visualizer",children:["Show FPS ",E?"ON":"OFF"]}),t.jsxs("div",{className:"border-t border-white/10 pt-2",children:[t.jsxs("button",{onClick:()=>He(!te),className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors cursor-pointer flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Te,{size:14}),"Audio Config"]}),te?t.jsx(xt,{size:14}):t.jsx(pt,{size:14})]}),te&&t.jsxs("div",{className:"mt-2 space-y-3 p-2 bg-white/5 rounded-md",children:[t.jsxs("button",{onClick:Qe,className:"w-full px-3 py-1.5 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",title:"Reset to defaults",children:[t.jsx(mt,{size:14}),"Reset to Defaults"]}),t.jsxs("div",{children:[t.jsx("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:t.jsx("span",{children:"FFT Size"})}),t.jsx("select",{value:x.fftSize,onChange:e=>A("fftSize",parseInt(e.target.value)),className:"w-full px-2 py-1 text-xs bg-white/10 text-white/90 rounded-md border border-white/20 cursor-pointer focus:outline-none focus:border-purple-500",children:[32,64,128,256,512,1024,2048,4096,8192,16384,32768].map(e=>t.jsx("option",{value:e,className:"bg-gray-900",children:e},e))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Smoothing"}),t.jsx("span",{className:"text-purple-400",children:x.smoothingTimeConstant.toFixed(2)})]}),t.jsx("input",{type:"range",min:"0",max:"0.99",step:"0.01",value:x.smoothingTimeConstant,onChange:e=>A("smoothingTimeConstant",parseFloat(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Min dB"}),t.jsx("span",{className:"text-purple-400",children:x.minDecibels})]}),t.jsx("input",{type:"range",min:"-100",max:"-30",step:"1",value:x.minDecibels,onChange:e=>A("minDecibels",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Max dB"}),t.jsx("span",{className:"text-purple-400",children:x.maxDecibels})]}),t.jsx("input",{type:"range",min:"-50",max:"0",step:"1",value:x.maxDecibels,onChange:e=>A("maxDecibels",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Freq Start"}),t.jsx("span",{className:"text-purple-400",children:x.freqStartIndex})]}),t.jsx("input",{type:"range",min:"0",max:"1024",step:"1",value:x.freqStartIndex,onChange:e=>A("freqStartIndex",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Freq Count"}),t.jsx("span",{className:"text-purple-400",children:x.freqLength})]}),t.jsx("input",{type:"range",min:"5",max:"1024",step:"1",value:x.freqLength,onChange:e=>A("freqLength",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{className:"pt-2 border-t border-white/10",children:[t.jsx("label",{className:"flex justify-between text-xs text-white/70 mb-2",children:t.jsx("span",{children:"Center Logo (Trap Nation)"})}),Y?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:Y,alt:"Logo preview",className:"w-12 h-12 object-contain rounded bg-white/10"}),t.jsxs("button",{onClick:qe,className:"flex-1 px-3 py-1.5 text-xs font-medium text-red-400 bg-red-500/10 hover:bg-red-500/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",children:[t.jsx(gt,{size:14}),"Remove"]})]}):t.jsxs("label",{className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",children:[t.jsx(ft,{size:14}),"Upload Image",t.jsx("input",{type:"file",accept:"image/*",onChange:We,className:"hidden"})]})]})]})]})]})}),ce=Tt.filter(e=>e.toLowerCase().includes(Ne.toLowerCase())),Ee=ce.filter(e=>!e.includes("(WebGL)")),Ae=ce.filter(e=>e.includes("(WebGL)")),Fe=e=>t.jsx("button",{onClick:()=>{Le(e)},className:`px-2 py-2 text-xs font-medium rounded-md transition-all cursor-pointer truncate ${$===e?"text-purple-400 bg-purple-500/30 border border-purple-500/50":"text-white/80 bg-white/10 hover:bg-white/20 border border-transparent"}`,title:e,children:e.replace(" (WebGL)","")},e),it=()=>t.jsxs("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.9)",border:"1px solid rgba(168, 85, 247, 0.3)",maxHeight:r.height-50,overflowY:"auto"},onMouseDown:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"relative mb-3",children:[t.jsx(wt,{size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-white/50"}),t.jsx("input",{type:"text",placeholder:"Search modes...",value:Ne,onChange:e=>Me(e.target.value),className:"w-full pl-7 pr-3 py-1.5 text-xs bg-white/10 text-white/90 rounded-md border border-white/20 focus:outline-none focus:border-purple-500 placeholder:text-white/40",autoFocus:!q})]}),Ee.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-white/20"}),t.jsx("span",{className:"text-xs text-white/50 font-medium",children:"Simple"}),t.jsx("div",{className:"h-px flex-1 bg-white/20"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Ee.map(Fe)})]}),Ae.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-white/20"}),t.jsx("span",{className:"text-xs text-white/50 font-medium",children:"WebGL"}),t.jsx("div",{className:"h-px flex-1 bg-white/20"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Ae.map(Fe)})]}),ce.length===0&&t.jsx("div",{className:"text-center text-white/50 text-xs py-4",children:"No modes found"})]});return t.jsx("div",{ref:Ie,className:`select-none fixed ${v?"":"cursor-move"}`,style:v?{left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:r.width,height:r.height,zIndex:50}:{left:h.x,top:h.y,width:r.width,height:r.height,zIndex:40},onMouseDown:v?void 0:tt,onTouchStart:v?void 0:st,onMouseEnter:()=>ye(!0),onMouseLeave:()=>ye(!1),children:t.jsxs("div",{className:`relative w-full h-full rounded-2xl overflow-hidden transition-all duration-300 ${v&&!R&&u==="none"?"":"backdrop-blur-md"}`,style:{background:v&&!R&&u==="none"?"transparent":"linear-gradient(135deg, rgba(15, 15, 30, 0.85), rgba(30, 20, 50, 0.85))",border:v&&!R&&u==="none"?"1px solid transparent":"1px solid rgba(168, 85, 247, 0.3)",boxShadow:v&&!R&&u==="none"?"none":"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 60px rgba(168, 85, 247, 0.1)"},children:[t.jsxs("div",{className:`absolute top-0 left-0 right-0 flex items-center justify-between px-3 py-2 z-10 transition-opacity duration-300 ${v&&!R&&u==="none"?"opacity-0":""}`,style:{background:"linear-gradient(180deg, rgba(0,0,0,0.4), transparent)",opacity:R||u!=="none"?1:0},children:[t.jsx("span",{className:"text-xs font-medium text-white/60 uppercase tracking-wider"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("button",{onClick:()=>{N(e=>e==="mode"?"none":"mode")},onMouseDown:e=>e.stopPropagation(),className:`px-2 py-1 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center gap-1.5 ${u==="mode"?"text-purple-400 bg-purple-500/20 hover:bg-purple-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Select visualizer mode",children:[t.jsx(ot,{size:12}),t.jsx("span",{className:"max-w-[80px] truncate",children:$})]}),t.jsxs("button",{onClick:Je,className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center gap-1 ${y?"text-green-400 bg-green-500/20 hover:bg-green-500/30":u==="audio"?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:y?`Audio: ${d}`:"Select audio source",children:[d==="mic"&&t.jsx(K,{size:14}),d==="tab"&&t.jsx(ue,{size:14}),d==="file"&&t.jsx(de,{size:14}),d==="mixer"&&t.jsx(he,{size:14}),d==="none"&&t.jsx(K,{size:14})]}),t.jsx("button",{onClick:Ke,onMouseDown:e=>e.stopPropagation(),className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${u==="settings"?"text-blue-400 bg-blue-500/20 hover:bg-blue-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Audio analyzer settings",children:t.jsx(Te,{size:14})}),!Ye&&!q&&t.jsx("button",{onClick:et,className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${ze?"text-purple-400 bg-purple-500/20 hover:bg-purple-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:ze?"Close PiP":"Open in PiP",children:t.jsx(at,{size:14})}),be&&!fe&&t.jsx("button",{onClick:e=>{if(e.stopPropagation(),P==="center"){const s=(window.innerWidth-r.width)/2,i=(window.innerHeight-r.height)/2;T({x:s,y:i})}be(P==="center"?"window":"center")},className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${P==="center"?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:P==="center"?"Switch to window mode":"Switch to center mode",children:P==="center"?t.jsx(ct,{size:14}):t.jsx(lt,{size:14})}),t.jsx("button",{onClick:$e,className:"p-1.5 text-xs font-medium text-white/80 bg-white/10 hover:bg-red-500/30 hover:text-red-400 rounded-md transition-colors cursor-pointer",title:"Close visualizer",children:t.jsx(ut,{size:14})})]})]}),t.jsx("div",{className:u==="settings"?"":"hidden",children:Ce.has("settings")&&nt()}),u==="audio"&&t.jsx("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.9)",border:"1px solid rgba(168, 85, 247, 0.3)"},onMouseDown:e=>e.stopPropagation(),children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-xs text-white/60 font-medium mb-2",children:"Select Audio Source"}),y&&t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-green-500/20 border border-green-500/30",children:[t.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-2",children:[d==="mic"&&t.jsx(K,{size:14}),d==="tab"&&t.jsx(ue,{size:14}),d==="file"&&t.jsx(de,{size:14}),d==="mixer"&&t.jsx(he,{size:14}),d==="tab"&&"Tab Audio",d==="mic"&&"Microphone",d==="file"&&"Audio File",d==="mixer"&&"In-App Audio"]}),t.jsxs("button",{onClick:Oe,className:"px-2 py-1 text-xs text-red-400 bg-red-500/20 hover:bg-red-500/30 rounded-md transition-colors flex items-center gap-1",children:[t.jsx(dt,{size:12}),"Stop"]})]}),!y&&t.jsxs("button",{onClick:Ze,className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors flex items-center gap-2",children:[t.jsx(he,{size:14}),"Ambience / Uploaded Media"]}),!q&&!y&&t.jsxs("button",{onClick:Ve,className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors flex items-center gap-2",children:[t.jsx(ue,{size:14}),"Capture Tab Audio"]}),!y&&t.jsxs("button",{onClick:Ge,className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors flex items-center gap-2",children:[t.jsx(K,{size:14}),"Use Microphone"]}),!y&&t.jsxs("label",{className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors flex items-center gap-2 cursor-pointer",children:[t.jsx(de,{size:14}),"Upload Audio/Video File",t.jsx("input",{ref:ne,type:"file",accept:"audio/*,video/*",onChange:Be,className:"hidden"})]}),!y&&t.jsx("p",{className:"text-xs text-white/40 mt-2",children:q?"Use 'In-App Audio' for sounds from Ambience/Media tabs.":"Use 'In-App Audio' to visualize sounds from Ambience or Media tabs."})]})}),t.jsx("div",{className:u==="mode"?"":"hidden",children:Ce.has("mode")&&it()}),t.jsx("canvas",{ref:ve,width:r.width,height:r.height,className:"w-full h-full"}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"resize-handle absolute top-0 left-0 w-4 h-4 cursor-nw-resize",onMouseDown:e=>z(e,"nw"),onTouchStart:e=>C(e,"nw")}),t.jsx("div",{className:"resize-handle absolute top-0 right-0 w-4 h-4 cursor-ne-resize",onMouseDown:e=>z(e,"ne"),onTouchStart:e=>C(e,"ne")}),t.jsx("div",{className:"resize-handle absolute bottom-0 left-0 w-4 h-4 cursor-sw-resize",onMouseDown:e=>z(e,"sw"),onTouchStart:e=>C(e,"sw")}),t.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:e=>z(e,"se"),onTouchStart:e=>C(e,"se")}),t.jsx("div",{className:"resize-handle absolute top-0 left-4 right-4 h-2 cursor-n-resize",onMouseDown:e=>z(e,"n"),onTouchStart:e=>C(e,"n")}),t.jsx("div",{className:"resize-handle absolute bottom-0 left-4 right-4 h-2 cursor-s-resize",onMouseDown:e=>z(e,"s"),onTouchStart:e=>C(e,"s")}),t.jsx("div",{className:"resize-handle absolute left-0 top-4 bottom-4 w-2 cursor-w-resize",onMouseDown:e=>z(e,"w"),onTouchStart:e=>C(e,"w")}),t.jsx("div",{className:"resize-handle absolute right-0 top-4 bottom-4 w-2 cursor-e-resize",onMouseDown:e=>z(e,"e"),onTouchStart:e=>C(e,"e")})]})]})})}export{Wt as default};
