import{r as n,j as t,p as J,q as le,F as ue,s as tt,t as st,u as nt,v as rt,w as it,X as ot,x as at,T as ct,U as lt,y as ut,R as dt,z as ht}from"../vendor-BT9BOIqP.js";import{r as pt,s as xt,O as gt,u as M,P as de,k as he,Q as mt,R as ft,S as wt,U as bt,V as vt,W as jt,X as yt,l as zt,Y as Nt}from"../index-C5euZUif.js";import{c as Ct,a as Mt,M as St,D as Pt,r as Rt}from"../visualizers/index-ChfC6XMV.js";import"../visualizers/renderer-4zxM2zHw.js";import"../visualizers/utils-DsFqD6CR.js";const A=120,_=120,pe=400,xe=200;function Yt({onClose:H,isInPiP:Fe=!1,forceCenter:ge=!1,stop:me=!1}){const S=pt(),fe=xt(),U=gt(),v=ge||S==="center",we=n.useRef(null),Ee=n.useRef(null),be=n.useRef(0),[W,Ye]=M("zen_visualizer_mode",Pt),[d,Y]=M("zen_visualizer_position",{x:50,y:50}),[i,K]=M("zen_visualizer_size",{width:pe,height:xe}),[P,ve]=n.useState(!1);n.useEffect(()=>{Ct()},[i.width,i.height]);const[L,q]=M("zen_visualizer_logo",null),ee=n.useRef(null),[je,$]=n.useState(!1),j=n.useRef(null),R=n.useRef(null),[u,D]=n.useState("none"),[ye,Le]=n.useState(new Set),[ze,Ne]=n.useState(""),[h,V]=M("zen_visualizer_config",jt()),[k,Xe]=M("zen_visualizer_performance_mode",!1),[T,Ie]=M("zen_visualizer_show_fps",!1),Ce=n.useRef(k);n.useEffect(()=>{Ce.current=k},[k]),n.useEffect(()=>{u!=="mode"&&Ne(""),u!=="none"&&Le(e=>new Set(e).add(u))},[u]);const Me=n.useRef(0),te=n.useRef(0),Se=n.useRef(performance.now()),Pe=n.useRef(T);n.useEffect(()=>{Pe.current=T},[T]),n.useEffect(()=>{if(L){const e=new Image;e.onload=()=>{ee.current=e},e.src=L}else ee.current=null},[L]),n.useEffect(()=>{de(h)},[]),n.useEffect(()=>()=>{Mt()},[]),n.useEffect(()=>()=>{j.current&&!j.current.closed&&j.current.close()},[]);const Ae=n.useCallback(e=>{var r;const s=(r=e.target.files)==null?void 0:r[0];if(s){const a=new FileReader;a.onload=c=>{var g;const x=(g=c.target)==null?void 0:g.result;q(x)},a.readAsDataURL(s)}},[q]),_e=n.useCallback(()=>{q(null)},[q]),He=n.useCallback(e=>{e.stopPropagation(),H==null||H()},[H]),[N,O]=n.useState(()=>he()),[f,G]=n.useState(()=>mt()),se=n.useRef(null),Ue=n.useCallback(async()=>{const e=await ft();O(e),G(e?"tab":"none"),e&&D("none")},[]),We=n.useCallback(async()=>{const e=await wt();O(e),G(e?"mic":"none"),e&&D("none")},[]),qe=n.useCallback(async e=>{var r;const s=(r=e.target.files)==null?void 0:r[0];if(s){const a=await bt(s);O(a),G(a?"file":"none"),a&&D("none")}se.current&&(se.current.value="")},[]),$e=n.useCallback(()=>{Nt(),O(!1),G("none")},[]),Ve=n.useCallback(e=>{e.stopPropagation(),D(s=>s==="audio"?"none":"audio")},[]),F=n.useCallback((e,s)=>{const r={...h,[e]:s};V(r),de({[e]:s})},[h,V]),Oe=n.useCallback(e=>{e.stopPropagation(),D(s=>s==="settings"?"none":"settings")},[]),Ge=n.useCallback(e=>{e.stopPropagation();const s=vt();V(s),de(s)},[V]),Be=n.useCallback(async e=>{if(e.stopPropagation(),!window.documentPictureInPicture){alert("Document Picture-in-Picture is not supported in your browser. Please use Chrome 116+ or Edge 116+.");return}if(j.current&&!j.current.closed){j.current.close(),j.current=null,R.current=null,$(!1);return}try{const s=await window.documentPictureInPicture.requestWindow({width:i.width,height:i.height});j.current=s,s.document.body.style.margin="0",s.document.body.style.padding="0",s.document.body.style.overflow="hidden",s.document.body.style.background="linear-gradient(135deg, rgba(15, 15, 30, 1), rgba(30, 20, 50, 1))";const r=s.document.createElement("canvas");r.width=i.width,r.height=i.height,r.style.width="100%",r.style.height="100%",s.document.body.appendChild(r),R.current=r,s.addEventListener("pagehide",()=>{j.current=null,R.current=null,$(!1)}),$(!0)}catch(s){console.error("PiP error:",s),alert("Failed to activate Picture-in-Picture mode. Error: "+s.message),$(!1)}},[i]),[E,X]=n.useState(!1),[p,B]=n.useState(null),[Q,Re]=n.useState(!1),Z=n.useRef({distance:0,width:pe,height:xe,centerX:0,centerY:0}),w=n.useRef({x:0,y:0,posX:0,posY:0}),o=n.useRef({x:0,y:0,width:pe,height:xe,posX:0,posY:0}),Qe=n.useCallback(e=>{e.target.classList.contains("resize-handle")||(e.preventDefault(),X(!0),w.current={x:e.clientX,y:e.clientY,posX:d.x,posY:d.y})},[d]),Ze=n.useCallback(e=>{if(!e.target.classList.contains("resize-handle")&&u==="none"){if(e.touches.length===1){const s=e.touches[0];X(!0),w.current={x:s.clientX,y:s.clientY,posX:d.x,posY:d.y}}else if(e.touches.length===2){e.preventDefault();const s=e.touches[0],r=e.touches[1],a=Math.hypot(r.clientX-s.clientX,r.clientY-s.clientY),c=(s.clientX+r.clientX)/2,x=(s.clientY+r.clientY)/2;Re(!0),X(!1),Z.current={distance:a,width:i.width,height:i.height,centerX:c,centerY:x}}}},[d,i,u]),ne=n.useCallback(e=>{if(E){const s=e.clientX-w.current.x,r=e.clientY-w.current.y;Y({x:w.current.posX+s,y:w.current.posY+r})}else if(p){const s=e.clientX-o.current.x,r=e.clientY-o.current.y;let a=o.current.width,c=o.current.height,x=o.current.posX,g=o.current.posY;if(p.includes("e")&&(a=Math.max(A,o.current.width+s)),p.includes("w")){const l=o.current.width-s;l>=A&&(a=l,x=o.current.posX+s)}if(p.includes("s")&&(c=Math.max(_,o.current.height+r)),p.includes("n")){const l=o.current.height-r;l>=_&&(c=l,g=o.current.posY+r)}K({width:a,height:c}),Y({x,y:g})}},[E,p,i.width,i.height]),re=n.useCallback(e=>{if(E&&e.touches.length===1){const s=e.touches[0],r=s.clientX-w.current.x,a=s.clientY-w.current.y;Y({x:w.current.posX+r,y:w.current.posY+a})}else if(Q&&e.touches.length===2){e.preventDefault();const s=e.touches[0],r=e.touches[1],c=Math.hypot(r.clientX-s.clientX,r.clientY-s.clientY)/Z.current.distance,x=Math.max(A,Math.round(Z.current.width*c)),g=Math.max(_,Math.round(Z.current.height*c));K({width:x,height:g})}else if(p&&e.touches.length===1){const s=e.touches[0],r=s.clientX-o.current.x,a=s.clientY-o.current.y;let c=o.current.width,x=o.current.height,g=o.current.posX,l=o.current.posY;if(p.includes("e")&&(c=Math.max(A,o.current.width+r)),p.includes("w")){const b=o.current.width-r;b>=A&&(c=b,g=o.current.posX+r)}if(p.includes("s")&&(x=Math.max(_,o.current.height+a)),p.includes("n")){const b=o.current.height-a;b>=_&&(x=b,l=o.current.posY+a)}K({width:c,height:x}),Y({x:g,y:l})}},[E,Q,p]),ie=n.useCallback(()=>{X(!1),B(null)},[]),I=n.useCallback(()=>{X(!1),B(null),Re(!1)},[]),y=n.useCallback((e,s)=>{e.preventDefault(),e.stopPropagation(),B(s),o.current={x:e.clientX,y:e.clientY,width:i.width,height:i.height,posX:d.x,posY:d.y}},[i,d]),z=n.useCallback((e,s)=>{if(e.preventDefault(),e.stopPropagation(),e.touches.length===1){const r=e.touches[0];B(s),o.current={x:r.clientX,y:r.clientY,width:i.width,height:i.height,posX:d.x,posY:d.y}}},[i,d]);n.useEffect(()=>{if(E||p||Q)return window.addEventListener("mousemove",ne),window.addEventListener("mouseup",ie),window.addEventListener("touchmove",re,{passive:!1}),window.addEventListener("touchend",I),window.addEventListener("touchcancel",I),()=>{window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",ie),window.removeEventListener("touchmove",re),window.removeEventListener("touchend",I),window.removeEventListener("touchcancel",I)}},[E,p,Q,ne,ie,re,I]);const oe=n.useRef(new Array(64).fill(0)),C=n.useRef(0);n.useEffect(()=>{const e=we.current;if(!e)return;const s=e.getContext("2d");if(!s)return;let r=!0;const a=async()=>{if(me||!r)return;C.current+=.02;let c;if(he())c=yt();else{for(let m=0;m<oe.current.length;m++){const et=.3+(Math.sin(C.current*2+m*.3)*.3+Math.sin(C.current*3.5+m*.5)*.2+Math.sin(C.current*1.2+m*.7)*.25)*.5;oe.current[m]=Math.max(0,Math.min(1,et+Math.random()*.1))}c=oe.current}const x=c.length,g=he()?zt():{bass:Math.sin(C.current*1.25)*.3+.4,mid:Math.sin(C.current*1.3)*.25+.35,high:Math.sin(C.current*1.4)*.2+.3};let l=s,b=e;if(R.current){const m=R.current.getContext("2d");m&&(l=m,b=R.current)}if(l.clearRect(0,0,b.width,b.height),await Rt({ctx:l,canvas:b,data:c,barCount:x,performanceMode:Ce.current,logoImage:ee.current,bass:g.bass,mid:g.mid,high:g.high,mode:W}),!!r){if(Pe.current){l.save(),l.font="bold 12px monospace",l.fillStyle="rgba(255, 255, 255, 0.8)",l.shadowColor="rgba(0, 0, 0, 0.8)",l.shadowBlur=4,l.fillText(`${Me.current} FPS`,10,20),l.restore(),te.current++;const m=performance.now(),ce=m-Se.current;ce>=500&&(Me.current=Math.round(te.current*1e3/ce),te.current=0,Se.current=m)}be.current=requestAnimationFrame(a)}};return a(),()=>{r=!1,cancelAnimationFrame(be.current)}},[W,me]);const Je=()=>t.jsx("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.7)",border:"1px solid rgba(168, 85, 247, 0.3)",maxHeight:i.height-50,overflowY:"auto"},onMouseDown:e=>e.stopPropagation(),children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:t.jsx("span",{children:"FFT Size"})}),t.jsx("select",{value:h.fftSize,onChange:e=>F("fftSize",parseInt(e.target.value)),className:"w-full px-2 py-1 text-xs bg-white/10 text-white/90 rounded-md border border-white/20 cursor-pointer focus:outline-none focus:border-purple-500",children:[32,64,128,256,512,1024,2048,4096,8192,16384,32768].map(e=>t.jsx("option",{value:e,className:"bg-gray-900",children:e},e))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Smoothing"}),t.jsx("span",{className:"text-purple-400",children:h.smoothingTimeConstant.toFixed(2)})]}),t.jsx("input",{type:"range",min:"0",max:"0.99",step:"0.01",value:h.smoothingTimeConstant,onChange:e=>F("smoothingTimeConstant",parseFloat(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Min dB"}),t.jsx("span",{className:"text-purple-400",children:h.minDecibels})]}),t.jsx("input",{type:"range",min:"-100",max:"-30",step:"1",value:h.minDecibels,onChange:e=>F("minDecibels",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Max dB"}),t.jsx("span",{className:"text-purple-400",children:h.maxDecibels})]}),t.jsx("input",{type:"range",min:"-50",max:"0",step:"1",value:h.maxDecibels,onChange:e=>F("maxDecibels",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Freq Start"}),t.jsx("span",{className:"text-purple-400",children:h.freqStartIndex})]}),t.jsx("input",{type:"range",min:"0",max:"1024",step:"1",value:h.freqStartIndex,onChange:e=>F("freqStartIndex",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex justify-between text-xs text-white/70 mb-1",children:[t.jsx("span",{children:"Freq Count"}),t.jsx("span",{className:"text-purple-400",children:h.freqLength})]}),t.jsx("input",{type:"range",min:"5",max:"1024",step:"1",value:h.freqLength,onChange:e=>F("freqLength",parseInt(e.target.value)),className:"w-full h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),t.jsxs("div",{className:"pt-2 border-t border-white/10",children:[t.jsx("label",{className:"flex justify-between text-xs text-white/70 mb-2",children:t.jsx("span",{children:"Center Logo (Trap Nation)"})}),L?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:L,alt:"Logo preview",className:"w-12 h-12 object-contain rounded bg-white/10"}),t.jsxs("button",{onClick:_e,className:"flex-1 px-3 py-1.5 text-xs font-medium text-red-400 bg-red-500/10 hover:bg-red-500/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",children:[t.jsx(ct,{size:14}),"Remove"]})]}):t.jsxs("label",{className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",children:[t.jsx(lt,{size:14}),"Upload Image",t.jsx("input",{type:"file",accept:"image/*",onChange:Ae,className:"hidden"})]})]}),t.jsxs("div",{className:"pt-2 border-t border-white/10",children:[t.jsxs("button",{onClick:()=>Xe(!k),className:`w-full px-3 py-2 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2 ${k?"text-green-400 bg-green-500/20 hover:bg-green-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Performance mode reduces visual effects for better framerate on low-end devices",children:[t.jsx(ut,{size:14}),"Performance Mode ",k?"ON":"OFF"]}),t.jsxs("button",{onClick:()=>Ie(!T),className:`w-full mt-2 px-3 py-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2 ${T?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Show FPS counter on the visualizer",children:["Show FPS ",T?"ON":"OFF"]})]}),t.jsxs("button",{onClick:Ge,className:"w-full mt-2 px-3 py-1.5 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors cursor-pointer flex items-center justify-center gap-2",title:"Reset to defaults",children:[t.jsx(dt,{size:14}),"Reset to Defaults"]})]})}),ae=St.filter(e=>e.toLowerCase().includes(ze.toLowerCase())),De=ae.filter(e=>!e.includes("(WebGL)")),ke=ae.filter(e=>e.includes("(WebGL)")),Te=e=>t.jsx("button",{onClick:()=>{Ye(e)},className:`px-2 py-2 text-xs font-medium rounded-md transition-all cursor-pointer truncate ${W===e?"text-purple-400 bg-purple-500/30 border border-purple-500/50":"text-white/80 bg-white/10 hover:bg-white/20 border border-transparent"}`,title:e,children:e.replace(" (WebGL)","")},e),Ke=()=>t.jsxs("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.9)",border:"1px solid rgba(168, 85, 247, 0.3)",maxHeight:i.height-50,overflowY:"auto"},onMouseDown:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"relative mb-3",children:[t.jsx(ht,{size:14,className:"absolute left-2 top-1/2 -translate-y-1/2 text-white/50"}),t.jsx("input",{type:"text",placeholder:"Search modes...",value:ze,onChange:e=>Ne(e.target.value),className:"w-full pl-7 pr-3 py-1.5 text-xs bg-white/10 text-white/90 rounded-md border border-white/20 focus:outline-none focus:border-purple-500 placeholder:text-white/40",autoFocus:!U})]}),De.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-white/20"}),t.jsx("span",{className:"text-xs text-white/50 font-medium",children:"Simple"}),t.jsx("div",{className:"h-px flex-1 bg-white/20"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:De.map(Te)})]}),ke.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-2",children:[t.jsx("div",{className:"h-px flex-1 bg-white/20"}),t.jsx("span",{className:"text-xs text-white/50 font-medium",children:"WebGL"}),t.jsx("div",{className:"h-px flex-1 bg-white/20"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:ke.map(Te)})]}),ae.length===0&&t.jsx("div",{className:"text-center text-white/50 text-xs py-4",children:"No modes found"})]});return t.jsx("div",{ref:Ee,className:`select-none fixed ${v?"":"cursor-move"}`,style:v?{left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:i.width,height:i.height,zIndex:50}:{left:d.x,top:d.y,width:i.width,height:i.height,zIndex:40},onMouseDown:v?void 0:Qe,onTouchStart:v?void 0:Ze,onMouseEnter:()=>ve(!0),onMouseLeave:()=>ve(!1),children:t.jsxs("div",{className:`relative w-full h-full rounded-2xl overflow-hidden transition-all duration-300 ${v&&!P&&u==="none"?"":"backdrop-blur-md"}`,style:{background:v&&!P&&u==="none"?"transparent":"linear-gradient(135deg, rgba(15, 15, 30, 0.85), rgba(30, 20, 50, 0.85))",border:v&&!P&&u==="none"?"1px solid transparent":"1px solid rgba(168, 85, 247, 0.3)",boxShadow:v&&!P&&u==="none"?"none":"0 8px 32px rgba(0, 0, 0, 0.4), 0 0 60px rgba(168, 85, 247, 0.1)"},children:[t.jsxs("div",{className:`absolute top-0 left-0 right-0 flex items-center justify-between px-3 py-2 z-10 transition-opacity duration-300 ${v&&!P&&u==="none"?"opacity-0":""}`,style:{background:"linear-gradient(180deg, rgba(0,0,0,0.4), transparent)",opacity:P||u!=="none"?1:0},children:[t.jsx("span",{className:"text-xs font-medium text-white/60 uppercase tracking-wider",children:"Visualizer"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("button",{onClick:Ve,className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center gap-1 ${N?"text-green-400 bg-green-500/20 hover:bg-green-500/30":u==="audio"?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:N?`Audio: ${f}`:"Select audio source",children:[f==="mic"&&t.jsx(J,{size:14}),f==="tab"&&t.jsx(le,{size:14}),f==="file"&&t.jsx(ue,{size:14}),f==="none"&&t.jsx(J,{size:14})]}),!Fe&&!U&&t.jsx("button",{onClick:Be,className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${je?"text-purple-400 bg-purple-500/20 hover:bg-purple-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:je?"Close PiP":"Open in PiP",children:t.jsx(tt,{size:14})}),t.jsx("button",{onClick:Oe,onMouseDown:e=>e.stopPropagation(),className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${u==="settings"?"text-blue-400 bg-blue-500/20 hover:bg-blue-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Audio analyzer settings",children:t.jsx(st,{size:14})}),t.jsxs("button",{onClick:()=>{D(e=>e==="mode"?"none":"mode")},onMouseDown:e=>e.stopPropagation(),className:`px-2 py-1 text-xs font-medium rounded-md transition-colors cursor-pointer flex items-center gap-1.5 ${u==="mode"?"text-purple-400 bg-purple-500/20 hover:bg-purple-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:"Select visualizer mode",children:[t.jsx(nt,{size:12}),t.jsx("span",{className:"max-w-[80px] truncate",children:W})]}),fe&&!ge&&t.jsx("button",{onClick:e=>{if(e.stopPropagation(),S==="center"){const s=(window.innerWidth-i.width)/2,r=(window.innerHeight-i.height)/2;Y({x:s,y:r})}fe(S==="center"?"window":"center")},className:`p-1.5 text-xs font-medium rounded-md transition-colors cursor-pointer ${S==="center"?"text-cyan-400 bg-cyan-500/20 hover:bg-cyan-500/30":"text-white/80 bg-white/10 hover:bg-white/20"}`,title:S==="center"?"Switch to window mode":"Switch to center mode",children:S==="center"?t.jsx(rt,{size:14}):t.jsx(it,{size:14})}),t.jsx("button",{onClick:He,className:"p-1.5 text-xs font-medium text-white/80 bg-white/10 hover:bg-red-500/30 hover:text-red-400 rounded-md transition-colors cursor-pointer",title:"Close visualizer",children:t.jsx(ot,{size:14})})]})]}),t.jsx("div",{className:u==="settings"?"":"hidden",children:ye.has("settings")&&Je()}),u==="audio"&&t.jsx("div",{className:"absolute top-10 left-0 right-0 z-20 p-3 mx-2 rounded-lg",style:{background:"rgba(15, 15, 30, 0.9)",border:"1px solid rgba(168, 85, 247, 0.3)"},onMouseDown:e=>e.stopPropagation(),children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-xs text-white/60 font-medium mb-2",children:"Select Audio Source"}),N&&t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-green-500/20 border border-green-500/30",children:[t.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-2",children:[f==="mic"&&t.jsx(J,{size:14}),f==="tab"&&t.jsx(le,{size:14}),f==="file"&&t.jsx(ue,{size:14}),f==="tab"&&"Tab Audio",f==="mic"&&"Microphone",f==="file"&&"Audio File"]}),t.jsxs("button",{onClick:$e,className:"px-2 py-1 text-xs text-red-400 bg-red-500/20 hover:bg-red-500/30 rounded-md transition-colors flex items-center gap-1",children:[t.jsx(at,{size:12}),"Stop"]})]}),!U&&!N&&t.jsxs("button",{onClick:Ue,className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors flex items-center gap-2",children:[t.jsx(le,{size:14}),"Capture Tab Audio"]}),!N&&t.jsxs("button",{onClick:We,className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors flex items-center gap-2",children:[t.jsx(J,{size:14}),"Use Microphone"]}),!N&&t.jsxs("label",{className:"w-full px-3 py-2 text-xs font-medium text-white/80 bg-white/10 hover:bg-white/20 rounded-md transition-colors flex items-center gap-2 cursor-pointer",children:[t.jsx(ue,{size:14}),"Upload Audio/Video File",t.jsx("input",{ref:se,type:"file",accept:"audio/*,video/*",onChange:qe,className:"hidden"})]}),!N&&t.jsx("p",{className:"text-xs text-white/40 mt-2",children:U?"Tab audio capture is not available on mobile devices.":"Choose how you want to provide audio for the visualizer."})]})}),t.jsx("div",{className:u==="mode"?"":"hidden",children:ye.has("mode")&&Ke()}),t.jsx("canvas",{ref:we,width:i.width,height:i.height,className:"w-full h-full"}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"resize-handle absolute top-0 left-0 w-4 h-4 cursor-nw-resize",onMouseDown:e=>y(e,"nw"),onTouchStart:e=>z(e,"nw")}),t.jsx("div",{className:"resize-handle absolute top-0 right-0 w-4 h-4 cursor-ne-resize",onMouseDown:e=>y(e,"ne"),onTouchStart:e=>z(e,"ne")}),t.jsx("div",{className:"resize-handle absolute bottom-0 left-0 w-4 h-4 cursor-sw-resize",onMouseDown:e=>y(e,"sw"),onTouchStart:e=>z(e,"sw")}),t.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-se-resize",onMouseDown:e=>y(e,"se"),onTouchStart:e=>z(e,"se")}),t.jsx("div",{className:"resize-handle absolute top-0 left-4 right-4 h-2 cursor-n-resize",onMouseDown:e=>y(e,"n"),onTouchStart:e=>z(e,"n")}),t.jsx("div",{className:"resize-handle absolute bottom-0 left-4 right-4 h-2 cursor-s-resize",onMouseDown:e=>y(e,"s"),onTouchStart:e=>z(e,"s")}),t.jsx("div",{className:"resize-handle absolute left-0 top-4 bottom-4 w-2 cursor-w-resize",onMouseDown:e=>y(e,"w"),onTouchStart:e=>z(e,"w")}),t.jsx("div",{className:"resize-handle absolute right-0 top-4 bottom-4 w-2 cursor-e-resize",onMouseDown:e=>y(e,"e"),onTouchStart:e=>z(e,"e")})]})]})})}export{Yt as default};
