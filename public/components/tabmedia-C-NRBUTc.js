import{r as d,j as e,f as u,X as m,H as g,M as h}from"../vendor-C0nNVFzt.js";import{w as x}from"../index-kAxOYwDN.js";function k(){const[s,l]=x("zen_yt_url",""),[i,p]=x("zen_yt_history",[]),[r,c]=d.useState(s),b=t=>{const a=[t,...i.filter(n=>n!==t)].slice(0,5);p(a)},y=t=>{p(i.filter(a=>a!==t))},f=t=>{t.preventDefault(),r&&(l(r),b(r))},w=t=>{c(t),l(t)},o=d.useMemo(()=>j(s),[s]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:f,className:"space-y-2",children:[e.jsx("label",{className:"text-xs text-white/70 uppercase tracking-wider",children:"Media URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:t=>c(t.target.value),placeholder:"YouTube, Spotify, Apple Music...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-white/50 transition-colors"}),e.jsx("button",{type:"submit",className:"bg-white/10 text-white p-2 rounded-lg hover:bg-white/20",children:e.jsx(u,{size:18})})]})]}),o&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-white/70 flex items-center gap-2",children:[o.type==="spotify"?"Spotify":o.type==="apple"?"Apple Music":"YouTube"," ","Player"]}),e.jsx("button",{onClick:()=>{l(""),c("")},className:"p-1 text-white/50 hover:text-white hover:bg-white/10 rounded transition-all",title:"Close player",children:e.jsx(m,{size:16})})]}),e.jsx("div",{className:`relative bg-black rounded-xl overflow-hidden shadow-lg border border-white/10 ${o.type==="youtube"?"pt-[56.25%]":"h-40"}`,children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:o.src,title:"Media player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,style:{border:0}})})]}),i.length>0&&e.jsxs("div",{className:"border-t border-white/10 pt-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-white/50 uppercase mb-3 flex items-center gap-2",children:[e.jsx(g,{size:12})," Recent"]}),e.jsx("div",{className:"space-y-2",children:i.map((t,a)=>e.jsxs("div",{className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-white/10 text-left group transition-colors",children:[e.jsxs("button",{onClick:()=>w(t),className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-6 bg-white/10 rounded flex items-center justify-center shrink-0",children:t.includes("spotify")?e.jsx(h,{size:12,className:"text-green-400"}):t.includes("apple")?e.jsx(h,{size:12,className:"text-pink-500"}):e.jsx(u,{size:10,fill:"white",className:"ml-0.5"})}),e.jsx("span",{className:"text-xs text-white/70 truncate flex-1 group-hover:text-white",children:t})]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),y(t)},className:"p-1 opacity-0 group-hover:opacity-100 text-white/50 hover:text-white hover:bg-white/10 rounded transition-all shrink-0",title:"Remove from history",children:e.jsx(m,{size:14})})]},a))})]}),e.jsx("div",{className:"text-xs text-white/30 leading-relaxed",children:"Supports YouTube videos, Spotify tracks/playlists, and Apple Music albums. Paste the link and we'll handle the embed."})]})}const j=s=>{if(!s)return null;const l=s.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);if(l&&l[2].length===11)return{type:"youtube",src:`https://www.youtube.com/embed/${l[2]}?enablejsapi=1&origin=${window.location.origin}`};if(s.includes("open.spotify.com")){let i=s;return s.includes("/embed")||(i=s.replace("open.spotify.com/","open.spotify.com/embed/")),{type:"spotify",src:i}}if(s.includes("music.apple.com")){let i=s;return s.includes("embed.music.apple.com")||(i=s.replace("music.apple.com","embed.music.apple.com")),{type:"apple",src:i}}return null};export{k as default};
