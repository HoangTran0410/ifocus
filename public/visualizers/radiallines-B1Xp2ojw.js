const d={rotation:0,pulsePhase:0,innerRotation:0};function w({ctx:n,canvas:W,data:P,barCount:v,performanceMode:$=!1,bass:r=0}){const e=W.width/2,i=W.height/2,u=Math.min(e,i)*.92,f=u*.12,l=P.reduce((t,a)=>t+a,0)/P.length;d.rotation+=.003+l*.008+r*.02,d.innerRotation-=.005+l*.01,d.pulsePhase+=.05+r*.12;const c=$?Math.min(v,48):v;if(!$)for(let t=2;t>=0;t--){const a=u*(.95-t*.08),s=.08+l*.1-t*.02;n.beginPath(),n.arc(e,i,a,0,Math.PI*2),n.strokeStyle=`rgba(168, 85, 247, ${s})`,n.lineWidth=2-t*.5,n.stroke()}if(!$){const t=Math.floor(c/2);for(let a=0;a<t;a++){const s=a/t*Math.PI*2+d.innerRotation,h=a*2%P.length,g=P[h]||l,o=f*1.5,y=o+g*u*.4,S=e+Math.cos(s)*o,p=i+Math.sin(s)*o,k=e+Math.cos(s)*y,I=i+Math.sin(s)*y;n.beginPath(),n.moveTo(S,p),n.lineTo(k,I),n.strokeStyle=`hsla(280, 80%, ${50+g*30}%, ${.3+g*.4})`,n.lineWidth=1+g*2,n.lineCap="round",n.stroke()}}for(let t=0;t<c;t++){const a=t/c*Math.PI*2-Math.PI/2,s=Math.sin(d.pulsePhase+t*.3)*.03,h=a+d.rotation+s,g=Math.floor(t/c*P.length),o=P[g]||l,y=Math.sin(d.pulsePhase+t*.2)*.1,S=f+(o+y)*(u-f),p=e+Math.cos(h)*f,k=i+Math.sin(h)*f,I=e+Math.cos(h)*S,R=i+Math.sin(h)*S,T=260+t/c*60+o*30,L=55+o*25,m=.6+o*.4;if(n.beginPath(),n.moveTo(p,k),n.lineTo(I,R),n.strokeStyle=`hsla(${T}, 85%, ${L}%, ${m})`,n.lineWidth=2+o*4,n.lineCap="round",n.stroke(),o>.5){const G=2+o*4+r*3;n.beginPath(),n.arc(I,R,G,0,Math.PI*2),n.fillStyle=`hsla(${T+20}, 100%, 75%, ${o})`,n.fill(),!$&&o>.7&&(n.beginPath(),n.arc(I,R,G*2.5,0,Math.PI*2),n.fillStyle=`hsla(${T}, 100%, 70%, ${o*.3})`,n.fill())}}if(r>.4){const t=$?12:24;for(let a=0;a<t;a++){const s=a/t*Math.PI*2+d.rotation*2,h=u*(.85+r*.15),g=u*.7,o=e+Math.cos(s)*g,y=i+Math.sin(s)*g,S=e+Math.cos(s)*h,p=i+Math.sin(s)*h;n.beginPath(),n.moveTo(o,y),n.lineTo(S,p),n.strokeStyle=`rgba(255, 200, 255, ${r*.6})`,n.lineWidth=1+r*2,n.lineCap="round",n.stroke()}}const M=f*(.8+l*.3+r*.2),b=n.createRadialGradient(e,i,0,e,i,M*1.5);b.addColorStop(0,`rgba(200, 150, 255, ${.4+l*.4})`),b.addColorStop(.5,`rgba(168, 85, 247, ${.2+l*.2})`),b.addColorStop(1,"transparent"),n.beginPath(),n.arc(e,i,M*1.5,0,Math.PI*2),n.fillStyle=b,n.fill(),n.beginPath(),n.arc(e,i,M,0,Math.PI*2);const C=n.createRadialGradient(e-M*.3,i-M*.3,0,e,i,M);C.addColorStop(0,`rgba(255, 255, 255, ${.9+l*.1})`),C.addColorStop(.4,`rgba(200, 150, 255, ${.8+l*.2})`),C.addColorStop(1,`rgba(100, 50, 200, ${.7+l*.3})`),n.fillStyle=C,n.fill(),n.beginPath(),n.arc(e,i,M,0,Math.PI*2),n.strokeStyle=`rgba(255, 255, 255, ${.5+r*.5})`,n.lineWidth=2,n.stroke()}export{w as default};
