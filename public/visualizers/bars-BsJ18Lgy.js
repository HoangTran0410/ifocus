import{g as p}from"./index-G4oQF-OW.js";import"../index--P0sXsZG.js";import"../vendor-Do42_EDI.js";import"./renderer-4zxM2zHw.js";import"./utils-DsFqD6CR.js";const h=new Array(50).fill(0);function W({ctx:e,canvas:l,data:S,performanceMode:y=!1}){const n=y?30:50,C=S.length;if(C>=n){const o=C/n;for(let r=0;r<n;r++){const i=Math.floor(r*o),t=Math.floor((r+1)*o);let f=0;for(let b=i;b<t;b++)f+=S[b];h[r]=f/(t-i)}}else{const o=(C-1)/(n-1);for(let r=0;r<n;r++){const i=r*o,t=Math.floor(i),f=Math.min(t+1,C-1),b=i-t;h[r]=S[t]*(1-b)+S[f]*b}}const a=l.width/n,d=Math.max(2,a*.15),g=a-d,s=l.height*.75,w=p(e,`bars-main-${l.height}`,()=>{const o=e.createLinearGradient(0,l.height,0,0);return o.addColorStop(0,"rgba(99, 102, 241, 0.95)"),o.addColorStop(.4,"rgba(139, 92, 246, 0.9)"),o.addColorStop(.7,"rgba(168, 85, 247, 0.85)"),o.addColorStop(1,"rgba(236, 72, 153, 0.9)"),o});if(y){e.fillStyle=w;for(let o=0;o<n;o++){const r=h[o]*s;if(r<2)continue;const i=o*a+d/2,t=l.height-r;e.fillRect(i,t,g,r)}return}let u=0;for(let o=0;o<n;o++)u+=h[o];u/=n;const H=p(e,`bars-glow-${l.height}`,()=>{const o=e.createLinearGradient(0,l.height,0,0);return o.addColorStop(0,"rgba(99, 102, 241, 0.4)"),o.addColorStop(.5,"rgba(168, 85, 247, 0.5)"),o.addColorStop(1,"rgba(236, 72, 153, 0.4)"),o}),B=p(e,`bars-highlight-${g}`,()=>{const o=e.createLinearGradient(0,0,g*.4,0);return o.addColorStop(0,"rgba(255, 255, 255, 0.5)"),o.addColorStop(1,"rgba(255, 255, 255, 0)"),o}),P=p(e,`bars-stroke-${l.width}`,()=>{const o=e.createLinearGradient(0,0,l.width,0);return o.addColorStop(0,"rgba(255, 255, 255, 0.9)"),o.addColorStop(.5,"rgba(236, 72, 153, 0.8)"),o.addColorStop(1,"rgba(255, 255, 255, 0.9)"),o});e.strokeStyle=`rgba(99, 102, 241, ${.08+u*.1})`,e.lineWidth=1,e.beginPath();const m=5;for(let o=1;o<=m;o++){const r=l.height-l.height/m*o;e.moveTo(0,r),e.lineTo(l.width,r)}e.stroke();const L=p(e,`bars-reflection-${l.height}`,()=>{const o=e.createLinearGradient(0,l.height,0,l.height+60);return o.addColorStop(0,"rgba(99, 102, 241, 0.2)"),o.addColorStop(1,"rgba(99, 102, 241, 0)"),o});e.fillStyle=L,e.beginPath();for(let o=0;o<n;o++){const r=h[o]*s;if(r<5)continue;const i=r*.2,t=o*a+d/2;e.roundRect(t,l.height,g,i,[0,0,4,4])}e.fill(),e.shadowColor="rgba(168, 85, 247, 0.6)",e.shadowBlur=15+u*20,e.fillStyle=H,e.beginPath();for(let o=0;o<n;o++){const r=h[o]*s;if(r<2)continue;const i=o*a+d/2,t=l.height-r;e.roundRect(i,t,g,r,[6,6,0,0])}e.fill(),e.shadowBlur=0,e.fillStyle=w,e.beginPath();for(let o=0;o<n;o++){const r=h[o]*s;if(r<2)continue;const i=o*a+d/2,t=l.height-r;e.roundRect(i,t,g,r,[6,6,0,0])}e.fill(),e.save(),e.fillStyle=B;for(let o=0;o<n;o++){const r=h[o]*s;if(r<8)continue;const i=o*a+d/2,t=l.height-r;e.setTransform(1,0,0,1,i,t),e.globalAlpha=.5+h[o]*.5,e.fillRect(0,0,g*.4,r)}e.restore();const G=g/2-2;if(G>0){e.fillStyle=`rgba(255, 255, 255, ${.3+u*.4})`,e.beginPath();for(let o=0;o<n;o++){const r=h[o]*s;if(r>15){const i=o*a+d/2,t=l.height-r;e.moveTo(i+g,t+2),e.arc(i+g/2,t+2,G,0,Math.PI,!0)}}e.fill()}e.shadowColor="rgba(236, 72, 153, 0.8)",e.shadowBlur=8,e.fillStyle="rgba(255, 255, 255, 0.95)",e.beginPath();for(let o=0;o<n;o++)if(h[o]>.45){const r=h[o]*s,i=o*a+a/2,t=l.height-r-10,f=2+h[o]*3;e.moveTo(i+f,t),e.arc(i,t,f,0,Math.PI*2)}e.fill(),e.shadowBlur=0,e.strokeStyle=P,e.lineWidth=2,e.lineCap="round",e.lineJoin="round",e.shadowColor="rgba(255, 255, 255, 0.5)",e.shadowBlur=6,e.beginPath();for(let o=0;o<n;o++){const r=h[o]*s,i=o*a+a/2,t=l.height-r;o===0?e.moveTo(i,t):e.lineTo(i,t)}e.stroke(),e.shadowBlur=0}export{W as default};
