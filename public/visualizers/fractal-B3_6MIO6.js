const u={rotation:0,pulsePhase:0};function j({ctx:o,canvas:w,data:P,performanceMode:$=!1,bass:n=0,mid:z=0}){const W=w.width,A=w.height,i=W/2,h=A/2,l=P.reduce((t,r)=>t+r,0)/P.length,I=Math.min(i,h)*.95;u.rotation+=.005+l*.01+n*.025,u.pulsePhase+=.03+z*.06;const T=$?6:8,k=$?4:6,F=Math.PI*2/T;for(let t=k-1;t>=0;t--){const r=t/k,f=I*(.2+r*.8),p=Math.floor(r*P.length),e=P[p]||l,c=Math.sin(u.pulsePhase+t*.5)*.1,a=f*(1+c+e*.15+n*.1),d=(260+t*30+u.rotation*20)%360,y=70+e*30,M=40+e*25,S=.5+e*.4,X=u.rotation*(t%2===0?1:-.7);for(let C=0;C<T;C++){const Y=C*F+X;o.save(),o.translate(i,h),o.rotate(Y);const b=t%3;if(b===0){const s=a*(.3+e*.15);o.beginPath();for(let R=0;R<3;R++){const B=R/3*Math.PI*2-Math.PI/2,v=a*.5+Math.cos(B)*s,G=Math.sin(B)*s;R===0?o.moveTo(v,G):o.lineTo(v,G)}o.closePath()}else if(b===1){const s=a*(.25+e*.1);o.beginPath(),o.moveTo(a*.5,-s),o.lineTo(a*.5+s*.6,0),o.lineTo(a*.5,s),o.lineTo(a*.5-s*.6,0),o.closePath()}else{const s=a*(.2+e*.1);o.beginPath(),o.arc(a*.5,0,s,0,Math.PI,!1),o.closePath()}if($)o.fillStyle=`hsla(${d}, ${y}%, ${M}%, ${S*.8})`;else{const s=o.createRadialGradient(a*.5,0,0,a*.5,0,a*.3);s.addColorStop(0,`hsla(${d+20}, ${y}%, ${M+20}%, ${S})`),s.addColorStop(1,`hsla(${d}, ${y}%, ${M}%, ${S*.6})`),o.fillStyle=s}o.fill(),!$&&e>.3&&(o.shadowColor=`hsla(${d}, 100%, 60%, 0.8)`,o.shadowBlur=8+e*12),o.strokeStyle=`hsla(${d+30}, ${y+20}%, ${M+15}%, ${S})`,o.lineWidth=1+e*1.5,o.stroke(),o.shadowBlur=0,o.restore()}}const m=20+l*25+n*20,g=o.createRadialGradient(i,h,0,i,h,m);if(g.addColorStop(0,`rgba(255, 255, 255, ${.9+l*.1})`),g.addColorStop(.3,`hsla(280, 80%, 70%, ${.7+l*.3})`),g.addColorStop(.7,`hsla(260, 70%, 50%, ${.4+l*.3})`),g.addColorStop(1,"transparent"),o.beginPath(),o.arc(i,h,m,0,Math.PI*2),o.fillStyle=g,o.fill(),!$){const t=I*(.9+l*.1);o.beginPath(),o.arc(i,h,t,0,Math.PI*2),o.strokeStyle=`hsla(280, 80%, 60%, ${.2+l*.3})`,o.lineWidth=2+n*3,o.shadowColor="hsla(280, 100%, 70%, 0.8)",o.shadowBlur=15+l*10,o.stroke(),o.shadowBlur=0}if(!$&&n>.4){const t=Math.floor(n*15);for(let r=0;r<t;r++){const f=Math.random()*Math.PI*2,p=I*(.3+Math.random()*.6),e=i+Math.cos(f)*p,c=h+Math.sin(f)*p,a=2+Math.random()*4,d=260+Math.random()*60;o.beginPath(),o.arc(e,c,a,0,Math.PI*2),o.fillStyle=`hsla(${d}, 80%, 70%, ${.4+n*.4})`,o.fill()}}}export{j as default};
