const T=[{exponent:1,color:"#FFFFFF",smoothMargin:0,delay:0,blurRadius:5},{exponent:1.12,color:"#FFFF00",smoothMargin:2,delay:1,blurRadius:5},{exponent:1.14,color:"#FF0000",smoothMargin:2,delay:2,blurRadius:5},{exponent:1.3,color:"#FF66FF",smoothMargin:3,delay:3,blurRadius:5},{exponent:1.33,color:"#333399",smoothMargin:3,delay:4,blurRadius:5},{exponent:1.36,color:"#0000FF",smoothMargin:3,delay:5,blurRadius:5},{exponent:1.5,color:"#33CCFF",smoothMargin:5,delay:6,blurRadius:5},{exponent:1.52,color:"#00FF00",smoothMargin:5,delay:7,blurRadius:5}],u=[];function _({ctx:o,canvas:c,data:d,logoImage:y,performanceMode:x=!1,bass:I=0}){const r=c.width/2,a=c.height/2,g=Math.min(c.width,c.height)/4,R=g/5,C=Math.PI/2;u.length>=T.length&&u.shift(),u.push([...d]);const f=d.reduce((s,n)=>s+n,0)/d.length,F=1.2,b=Math.min(1,Math.max(.3,1/(F-1)*(-Math.pow(f,F)+F*f)))*(g-R)+R+I*g*.1,w=T;for(let s=w.length-1;s>=0;s--){const n=w[s],p=Math.max(u.length-n.delay-1,0),m=u[p]||d,t=[],P=m.length;for(let l=0;l<P;l++){const i=Math.PI*(l/(P-1))-C,h=b+Math.pow(m[l]*g*.3,n.exponent),e=h*Math.cos(i),M=h*Math.sin(i);t.push({x:e,y:M})}o.fillStyle=n.color,x||(o.shadowColor=n.color,o.shadowBlur=n.blurRadius),o.beginPath();for(let l=0;l<=1;l++){const i=l?-1:1;o.moveTo(r,t[0].y+a);for(let e=1;e<t.length-2;e++){const M=i*(t[e].x+t[e+1].x)/2+r,S=(t[e].y+t[e+1].y)/2+a;o.quadraticCurveTo(i*t[e].x+r,t[e].y+a,M,S)}const h=t.length-1;o.quadraticCurveTo(i*t[h-1].x+r+l*2,t[h-1].y+a,i*t[h].x+r,t[h].y+a)}o.fill()}if(o.shadowBlur=0,y){const s=b*2,n=s/2;o.save(),o.beginPath(),o.arc(r,a,n,0,Math.PI*2),o.closePath(),o.clip();const p=r-n,m=a-n;o.drawImage(y,p,m,s,s),o.restore()}}export{_ as default};
