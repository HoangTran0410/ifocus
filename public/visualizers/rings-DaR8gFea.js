const r={rotation:0,pulsePhase:0};function v({ctx:t,canvas:C,data:o,performanceMode:g=!1,bass:c=0}){const a=C.width/2,i=C.height/2,P=Math.min(a,i)*.9,n=o.reduce((s,d)=>s+d,0)/o.length;r.rotation+=.005+n*.02+c*.06,r.pulsePhase+=.05+c*.15;const m=g?5:8,$=g?32:64,O=c*P*.15;for(let s=m-1;s>=0;s--){const d=s/m,B=P*(.2+d*.8)+O,T=Math.floor(d*o.length),l=o[T]||n,b=260-d*60,k=70+l*30,D=50+l*20;t.beginPath();for(let e=0;e<$;e++){const f=e/$,I=f*Math.PI*2+r.rotation*(s%2===0?1:-1),h=Math.floor(f*o.length),M=o[h]||n,w=Math.sin(r.pulsePhase+s*.5)*5,y=M*P*.15,p=B+y+w,R=a+Math.cos(I)*p,G=i+Math.sin(I)*p;e===0?t.moveTo(R,G):t.lineTo(R,G)}if(t.closePath(),!g&&l>.3&&(t.shadowColor=`hsla(${b}, ${k}%, ${D+20}%, 0.8)`,t.shadowBlur=15+l*10),t.strokeStyle=`hsla(${b}, ${k}%, ${D}%, ${.5+l*.5})`,t.lineWidth=2+l*2,t.stroke(),t.shadowBlur=0,!g)for(let e=0;e<$;e+=4){const f=e/$,I=Math.floor(f*o.length),h=o[I]||n;if(h>.5){const M=f*Math.PI*2+r.rotation*(s%2===0?1:-1),w=Math.sin(r.pulsePhase+s*.5)*5,y=B+h*P*.15+w,p=a+Math.cos(M)*y,R=i+Math.sin(M)*y;t.beginPath(),t.arc(p,R,2+h*3,0,Math.PI*2),t.fillStyle=`hsla(${b+30}, 90%, 70%, ${h})`,t.fill()}}}const S=20+n*30+c*25,u=t.createRadialGradient(a,i,0,a,i,S);u.addColorStop(0,`rgba(255, 255, 255, ${.9+n*.1})`),u.addColorStop(.3,`hsla(280, 80%, 70%, ${.7+n*.3})`),u.addColorStop(.7,`hsla(260, 70%, 50%, ${.4+n*.3})`),u.addColorStop(1,"transparent"),t.beginPath(),t.arc(a,i,S,0,Math.PI*2),t.fillStyle=u,t.fill(),g||(t.shadowColor="rgba(168, 85, 247, 0.5)",t.shadowBlur=30+n*20,t.beginPath(),t.arc(a,i,S*.5,0,Math.PI*2),t.fillStyle="rgba(255, 255, 255, 0.3)",t.fill(),t.shadowBlur=0)}export{v as default};
