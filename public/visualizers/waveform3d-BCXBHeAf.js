const n={history:[],maxHistory:25};function st({ctx:t,canvas:e,data:y,performanceMode:g=!1}){const R=g?15:25;n.maxHistory=R,n.history.push([...y]),n.history.length>R&&n.history.shift();const H=y.reduce((o,i)=>o+i,0)/y.length,S=e.height*.35,I=e.height*.95,p=e.width*.5,X=I-S,k=.7,D=n.history.length,m=g?24:40,d=m-1,W=e.height*.25,z=y.length-1;for(let o=0;o<D-1;o++){const i=n.history[o],h=n.history[o+1];if(!i||!h)continue;const r=o/D,$=(o+1)/D,s=Math.pow(r,k),c=Math.pow($,k),f=S+X*s,w=S+X*c,l=e.width*(.15+s*.85),a=e.width*(.15+c*.85),P=p-l*.5,Y=p-a*.5,B=W*(.3+s*.7),L=W*(.3+c*.7),Z=.4+r*.5,E=35+r*25,F=!g||o%2===0,G=.5+r;for(let u=0;u<d;u++){const T=u/d,b=(u+1)/d,O=T*z|0,v=b*z|0,A=i[O]||0,C=i[v]||0,M=h[v]||0,Q=h[O]||0,J=P+T*l,K=f-A*B,N=P+b*l,U=f-C*B,V=Y+b*a,_=w-M*L,tt=Y+T*a,ot=w-Q*L,x=(A+C+M+Q)*.25,j=260+x*60|0,nt=70+x*30|0,q=E+x*20|0;t.beginPath(),t.moveTo(J,K),t.lineTo(N,U),t.lineTo(V,_),t.lineTo(tt,ot),t.closePath(),t.fillStyle=`hsla(${j},${nt}%,${q}%,${Z})`,t.fill(),F&&(t.strokeStyle=`hsla(${j+30},90%,${q+20}%,${Z*.8})`,t.lineWidth=G,t.stroke())}}if(!g&&n.history.length>0){const o=n.history[n.history.length-1],i=I,h=e.width*.97,r=p-h*.5,$=o.length-1;t.beginPath();for(let s=0;s<m;s++){const c=s/d,f=c*$|0,w=o[f]||0,l=r+c*h,a=i-w*W;s===0?t.moveTo(l,a):t.lineTo(l,a)}t.shadowColor="rgba(236, 72, 153, 0.8)",t.shadowBlur=15+H*20,t.strokeStyle=`rgba(255, 255, 255, ${.6+H*.4})`,t.lineWidth=2,t.stroke(),t.shadowBlur=0}}export{st as default};
